function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../chunks/browser.B2KJ9jlP.js","../chunks/viewport.BY-YnxNg.js","../chunks/scheduler.COKmWNtP.js","../chunks/index.BJPD6ETK.js","../chunks/index.DSRq0rwD.js","../chunks/each.CYJ9jZYm.js","../assets/viewport.C1i3-f7Y.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{n as le,O as Pn,s as Ft,e as A,k as Z,_ as hi,c as D,d as E,p as y,f as O,D as $n,i as z,ac as jr,L as br,t as $e,j as ye,a as ee,b as Le,l as be,q as ut,E as Ct,g as ht,h as di,$ as fi,a0 as Pt,r as Ln,x as gi,M as xn,o as mi,u as jn,F as pi,H as vi,G as _i,a3 as Nr}from"../chunks/scheduler.COKmWNtP.js";import{n as yi,l as bi,h as wi,j as Ei,S as Bt,i as Gt,a as U,k as Ti,g as zt,t as te,c as Ht,f as ki,b as Ze,d as Ye,m as Qe,e as Xe,o as Ur}from"../chunks/index.BJPD6ETK.js";import{e as _e,u as wr,d as Oi,f as Si,o as Ai}from"../chunks/each.CYJ9jZYm.js";import{v as Di,S as Ii,T as Ri,a as Ci}from"../chunks/viewport.BY-YnxNg.js";import{b as Pi}from"../chunks/paths.DVz3m3P_.js";import{_ as et}from"../chunks/preload-helper.BQ24v_F8.js";function $i(n,e,t,r){if(!e)return le;const i=n.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return le;const{delay:s=0,duration:o=300,easing:a=Pn,start:l=yi()+s,end:u=l+o,tick:c=le,css:h}=t(n,{from:e,to:i},r);let d=!0,f=!1,g;function v(){h&&(g=wi(n,0,1,o,s,a,h)),s||(f=!0)}function _(){h&&Ei(n,g),d=!1}return bi(w=>{if(!f&&w>=l&&(f=!0),f&&w>=u&&(c(1,0),_()),!d)return!1;if(f){const m=w-l,p=0+1*a(m/o);c(p,1-p)}return!0}),v(),c(0,1),_}function Li(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:r}=e,i=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=r,xi(n,i)}}function xi(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const r=getComputedStyle(n),i=r.transform==="none"?"":r.transform;n.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function Mr(n,e,t){const r=n.slice();return r[5]=e[t],r}function Fr(n){let e,t;return{c(){e=A("link"),this.h()},l(r){e=D(r,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){y(e,"rel","preload"),y(e,"href",t=n[5]),y(e,"as","font"),y(e,"type","font/woff2"),y(e,"crossorigin","")},m(r,i){z(r,e,i)},p(r,i){i&16&&t!==(t=r[5])&&y(e,"href",t)},d(r){r&&E(e)}}}function ji(n){let e,t,r,i,s,o,a,l,u,c,h,d,f,g,v,_,w,m,p,b,k,F,re,Y,ge,ne;document.title=e=n[0];let ie=_e(n[4]),C=[];for(let R=0;R<ie.length;R+=1)C[R]=Fr(Mr(n,ie,R));return{c(){t=A("meta"),r=A("meta"),i=A("meta"),s=A("meta"),o=A("meta"),a=A("meta"),l=A("meta"),u=A("meta"),c=A("meta"),h=A("meta"),f=A("meta"),g=A("meta"),v=A("meta"),_=A("meta"),w=A("meta"),m=A("meta"),p=A("meta"),b=A("meta"),k=A("meta"),re=A("meta"),Y=A("link");for(let R=0;R<C.length;R+=1)C[R].c();ne=Z(),this.h()},l(R){const T=hi("svelte-1htu80s",document.head);t=D(T,"META",{name:!0,content:!0}),r=D(T,"META",{name:!0,content:!0}),i=D(T,"META",{name:!0,content:!0}),s=D(T,"META",{property:!0,content:!0}),o=D(T,"META",{property:!0,content:!0}),a=D(T,"META",{property:!0,content:!0}),l=D(T,"META",{property:!0,content:!0}),u=D(T,"META",{property:!0,content:!0}),c=D(T,"META",{property:!0,content:!0}),h=D(T,"META",{property:!0,content:!0}),f=D(T,"META",{property:!0,content:!0}),g=D(T,"META",{property:!0,content:!0}),v=D(T,"META",{property:!0,content:!0}),_=D(T,"META",{name:!0,content:!0}),w=D(T,"META",{name:!0,content:!0}),m=D(T,"META",{name:!0,content:!0}),p=D(T,"META",{name:!0,content:!0}),b=D(T,"META",{name:!0,content:!0}),k=D(T,"META",{name:!0,content:!0}),re=D(T,"META",{name:!0,content:!0}),Y=D(T,"LINK",{rel:!0,href:!0});for(let $=0;$<C.length;$+=1)C[$].l(T);ne=Z(),T.forEach(E),this.h()},h(){y(t,"name","description"),y(t,"content",n[1]),y(r,"name","author"),y(r,"content","The Pudding"),y(i,"name","news_keywords"),y(i,"content",n[3]),y(s,"property","og:title"),y(s,"content",n[0]),y(o,"property","og:site_name"),y(o,"content","The Pudding"),y(a,"property","og:url"),y(a,"content",n[2]),y(l,"property","og:description"),y(l,"content",n[1]),y(u,"property","og:type"),y(u,"content","article"),y(c,"property","og:locale"),y(c,"content","en_US"),y(h,"property","og:image"),y(h,"content",d=n[2]+"/assets/social-facebook.jpg"),y(f,"property","og:image:type"),y(f,"content","image/jpeg"),y(g,"property","og:image:width"),y(g,"content","1200"),y(v,"property","og:image:height"),y(v,"content","600"),y(_,"name","twitter:card"),y(_,"content","summary_large_image"),y(w,"name","twitter:site"),y(w,"content","https://pudding.cool"),y(m,"name","twitter:creator"),y(m,"content","@puddingviz"),y(p,"name","twitter:title"),y(p,"content",n[0]),y(b,"name","twitter:description"),y(b,"content",n[1]),y(k,"name","twitter:image:src"),y(k,"content",F=n[2]+"/assets/social-twitter.jpg"),y(re,"name","robots"),y(re,"content","max-image-preview:large"),y(Y,"rel","canonical"),y(Y,"href",ge=n[2]+"/")},m(R,T){O(document.head,t),O(document.head,r),O(document.head,i),O(document.head,s),O(document.head,o),O(document.head,a),O(document.head,l),O(document.head,u),O(document.head,c),O(document.head,h),O(document.head,f),O(document.head,g),O(document.head,v),O(document.head,_),O(document.head,w),O(document.head,m),O(document.head,p),O(document.head,b),O(document.head,k),O(document.head,re),O(document.head,Y);for(let $=0;$<C.length;$+=1)C[$]&&C[$].m(document.head,null);O(document.head,ne)},p(R,[T]){if(T&1&&e!==(e=R[0])&&(document.title=e),T&2&&y(t,"content",R[1]),T&8&&y(i,"content",R[3]),T&1&&y(s,"content",R[0]),T&4&&y(a,"content",R[2]),T&2&&y(l,"content",R[1]),T&4&&d!==(d=R[2]+"/assets/social-facebook.jpg")&&y(h,"content",d),T&1&&y(p,"content",R[0]),T&2&&y(b,"content",R[1]),T&4&&F!==(F=R[2]+"/assets/social-twitter.jpg")&&y(k,"content",F),T&4&&ge!==(ge=R[2]+"/")&&y(Y,"href",ge),T&16){ie=_e(R[4]);let $;for($=0;$<ie.length;$+=1){const Ae=Mr(R,ie,$);C[$]?C[$].p(Ae,T):(C[$]=Fr(Ae),C[$].c(),C[$].m(ne.parentNode,ne))}for(;$<C.length;$+=1)C[$].d(1);C.length=ie.length}},i:le,o:le,d(R){E(t),E(r),E(i),E(s),E(o),E(a),E(l),E(u),E(c),E(h),E(f),E(g),E(v),E(_),E(w),E(m),E(p),E(b),E(k),E(re),E(Y),$n(C,R),E(ne)}}}function Ni(n,e,t){let{title:r="Title TK"}=e,{description:i="Description TK"}=e,{url:s="https://pudding.cool"}=e,{keywords:o=""}=e,{preloadFont:a=[]}=e;return n.$$set=l=>{"title"in l&&t(0,r=l.title),"description"in l&&t(1,i=l.description),"url"in l&&t(2,s=l.url),"keywords"in l&&t(3,o=l.keywords),"preloadFont"in l&&t(4,a=l.preloadFont)},[r,i,s,o,a]}class Ui extends Bt{constructor(e){super(),Gt(this,e,Ni,ji,Ft,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function Mi(n){return n*n*n}function Nn(n){const e=n-1;return e*e*e+1}function Fi(n,{delay:e=0,duration:t=400,easing:r=Pn}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:s=>`opacity: ${s*i}`}}function Br(n,{delay:e=0,duration:t=400,easing:r=Nn,x:i=0,y:s=0,opacity:o=0}={}){const a=getComputedStyle(n),l=+a.opacity,u=a.transform==="none"?"":a.transform,c=l*(1-o),[h,d]=jr(i),[f,g]=jr(s);return{delay:e,duration:t,easing:r,css:(v,_)=>`
			transform: ${u} translate(${(1-v)*h}${d}, ${(1-v)*f}${g});
			opacity: ${l-c*_}`}}const Bi=[{name:"Seo Taiji & Kids (서태지와 아이들)",id:"1","debut year":"1992","debut song":"I Know (난 알아요)","debut song link":"https://www.youtube.com/watch?v=OEDHEzs5kyk","highest mv views":"Come Back Home","highest mv link":"https://youtu.be/q3xy4p2JTfU?si=ykWzTIrIAda-Ttn5",image:"NEED TO FIND","":""},{name:"H.O.T",id:"2","debut year":"1996","debut song":"Age of Violence (전사의 후예)","debut song link":"https://www.youtube.com/watch?v=7ggXa28ADLE","highest mv views":"Candy","highest mv link":"https://youtu.be/3NUaXU1d-NY?si=guXk0ojaXtw4DSKl",image:"ntf","":"REMOVE"},{name:"S.E.S.",id:"3","debut year":"1997","debut song":"('Cause) I'm Your Girl","debut song link":"https://www.youtube.com/watch?v=fBge8oUfFwU","highest mv views":"Dreams Come True","highest mv link":"https://youtu.be/8uiR4SrDGZk?si=1KPA6DJk7Y7VQR0d",image:"small","":"FIND OR REMOVE"},{name:"TVXQ! (동방신기)",id:"4","debut year":"2003","debut song":"Hug","debut song link":"https://www.youtube.com/watch?v=xQ635vE2RQI","highest mv views":"Mirotic (주문)","highest mv link":"https://youtu.be/HtJS32n6LNQ?si=Wrycm3J7W8dCvKhS",image:"DISCUSS","":""},{name:"Super Junior",id:"5","debut year":"2005","debut song":"Twins (Knock Out)","debut song link":"https://www.youtube.com/watch?v=SrazFGFRnhM","highest mv views":"Mr. Simple","highest mv link":"https://youtu.be/r6TwzSGYycM?si=5pJQL-PKNHicXXQD",image:"","":"REMOVE"},{name:"BIGBANG",id:"6","debut year":"2006","debut song":"LA-LA-LA","debut song link":"https://www.youtube.com/watch?v=rc-cHSzK5-U","highest mv views":"BANG BANG BANG","highest mv link":"https://youtu.be/2ips2mM7Zqw?si=-QTJrxsJdsaeZXyi",image:"NEED TO FIND","":""},{name:"Girls' Generation (소녀시대)",id:"7","debut year":"2007","debut song":"Into The New World (다시 만난 세계)","debut song link":"https://www.youtube.com/watch?v=0k2Zzkw_-0I&list=RD0k2Zzkw_-0I&start_radio=1","highest mv views":"Gee","highest mv link":"https://youtu.be/U7mPqycQ0tQ?si=-yR2pROXaf8CTGZI",image:"","":""},{name:"Wonder Girls",id:"8","debut year":"2007","debut song":"Irony","debut song link":"https://www.youtube.com/watch?v=uxFxoLxmcdg","highest mv views":"Nobody","highest mv link":"https://youtu.be/BA7fdSkp8ds?si=CKwWVeS6cKLQjYf1",image:"","":""},{name:"2PM",id:"9","debut year":"2008","debut song":"10 out of 10 (10점 만점에 10점)","debut song link":"https://www.youtube.com/watch?v=YEmRoYV8vMs","highest mv views":"Hands Up","highest mv link":"https://youtu.be/KgrB2KBZws4?si=IbFU-25G968a5O9C",image:"","":""},{name:"SHINee",id:"10","debut year":"2008","debut song":"Replay (누난 너무 예뻐)","debut song link":"https://www.youtube.com/watch?v=VTASffPQGhY","highest mv views":"Ring Ding Dong","highest mv link":"https://www.youtube.com/watch?v=roughtzsCDI",image:"","":""},{name:"2NE1",id:"11","debut year":"2009","debut song":"FIRE","debut song link":"https://www.youtube.com/watch?v=49AfuuRbgGo","highest mv views":"I AM THE BEST (내가 제일 잘 나가)","highest mv link":"https://youtu.be/j7_lSP8Vc3o?si=oXben2BqG_scXRi7",image:"FIND OR CROP SQUARE","":""},{name:"BEAST",id:"12","debut year":"2009","debut song":"BAD GIRL","debut song link":"https://www.youtube.com/watch?v=fA_rXpyF67s","highest mv views":"FICTION","highest mv link":"https://youtu.be/ZAzWT8mRoR0?si=JkI2xh7yrkCY6i96",image:"DISCUSS - 6 member og B2ST or 4 member HIGHLIGHT","":"REMOVE"},{name:"f(x)",id:"13","debut year":"2009","debut song":"LA chA TA","debut song link":"https://www.youtube.com/watch?v=H7MHZpSNJQc","highest mv views":"Electric Shock","highest mv link":"https://youtu.be/n8I8QGFA1oM?si=yciZ5UmZCkxwp-Ay",image:"","":"REMOVE"},{name:"miss A",id:"14","debut year":"2010","debut song":"Bad Girl, Good Girl","debut song link":"https://www.youtube.com/watch?v=8TeeJvcBdLA","highest mv views":"Only You (다른 남자 말고 너)","highest mv link":"https://youtu.be/zO9RzrhYR-I?si=e7EcbKbf3Bm0MhEI",image:"","":"REMOVE"},{name:"SISTAR",id:"15","debut year":"2010","debut song":"Push Push","debut song link":"https://www.youtube.com/watch?v=75y5iN7z-08","highest mv views":"Alone (나혼자)","highest mv link":"https://youtu.be/E0ZHXVp_wUE?feature=shared",image:"","":"REMOVE"},{name:"EXO",id:"16","debut year":"2012","debut song":"Mama","debut song link":"https://www.youtube.com/watch?v=KH6ZwnqZ7Wo","highest mv views":"Love Shot","highest mv link":"https://www.youtube.com/watch?v=pSudEWBAYRE",image:"","":""},{name:"BTS (방탄소년단)",id:"17","debut year":"2013","debut song":"No More Dream","debut song link":"https://www.youtube.com/watch?v=rBG5L7UsUxA","highest mv views":"Dynamite","highest mv link":"https://www.youtube.com/watch?v=gdZLi9oWNZg",image:"","":""},{name:"GOT7",id:"18","debut year":"2014","debut song":"Girls Girls Girls","debut song link":"https://www.youtube.com/watch?v=2sAoKmg7qPI","highest mv views":"Just right","highest mv link":"https://youtu.be/vrdk3IGcau8?feature=shared",image:"","":""},{name:"MAMAMOO",id:"19","debut year":"2014","debut song":"Mr. Ambiguous (Mr.애매모호)","debut song link":"https://www.youtube.com/watch?v=QwjWP2Tnsjk","highest mv views":"HIP","highest mv link":"https://youtu.be/KhTeiaCezwM?feature=shared",image:"","":""},{name:"Red Velvet",id:"20","debut year":"2014","debut song":"Happiness (행복)","debut song link":"https://youtu.be/JFgv8bKfxEs?si=Bg8hr6quDJP9Inug","highest mv views":"Bad Boy","highest mv link":"https://youtu.be/J_CFBjAyPWE?feature=shared",image:"","":""},{name:"WINNER",id:"21","debut year":"2014","debut song":"Empty (공허해)","debut song link":"https://youtu.be/gEqlF5N8UMs?si=9bijM1O3ZHlW2hHl","highest mv views":"REALLY REALLY","highest mv link":"https://youtu.be/4tBnF46ybZk?feature=shared",image:"","":""},{name:"GFRIEND (여자친구)",id:"22","debut year":"2015","debut song":"Glass Bead (유리구슬)","debut song link":"https://youtu.be/GU7icQFVzHo?si=BMHMgRNRXJ21JqNv","highest mv views":"MAGO","highest mv link":"https://youtu.be/LmBYPXGqtss?feature=shared",image:"","":"REMOVE"},{name:"iKON",id:"23","debut year":"2015","debut song":"MY TYPE (취향저격)","debut song link":"https://youtu.be/ZS6vfv4sszg?si=gYgMU0_fU1nY57-Q","highest mv views":"Love Scenario","highest mv link":"https://youtu.be/vecSVX1QYbQ?feature=shared",image:"","":"REMOVE"},{name:"OH MY GIRL",id:"24","debut year":"2015","debut song":"CUPID","debut song link":"https://youtu.be/fCrCUv6rQ7I?si=76PQlXLQx60PzA_8","highest mv views":"Nonstop","highest mv link":"https://www.youtube.com/watch?v=iDjQSdN_ig8",image:"","":"REMOVE"},{name:"SEVENTEEN",id:"25","debut year":"2015","debut song":"Adore U (아낀다)","debut song link":"https://youtu.be/9rUFQJrCT7M?si=C61CfBTQ_dhAj8ZN","highest mv views":"Don't Wanna Cry (울고 싶지 않아)","highest mv link":"https://youtu.be/zEkg4GBQumc?feature=shared",image:"","":""},{name:"TWICE",id:"26","debut year":"2015","debut song":"Like OOH-AHH (OOH-AHH하게)","debut song link":"https://youtu.be/0rtV5esQT6I?si=zv-CbcDtfQjYJX4k","highest mv views":"What is Love?","highest mv link":"https://www.youtube.com/watch?v=2sAoKmg7qPI",image:"","":""},{name:"NCT",id:"27","debut year":"2016","debut song":"The 7th Sense (일곱 번째 감각)","debut song link":"https://youtu.be/3UGMDJ9kZCA?si=UmuCEnMzhDtVSeI4","highest mv views":"Make A Wish (Birthday Song)","highest mv link":"https://youtu.be/tyrVtwE8Gv0?feature=shared",image:"","":""},{name:"I.O.I",id:"28","debut year":"2016","debut song":"Dream Girls","debut song link":"https://youtu.be/8Zu_yO4pNEY?si=JT0XwnUpANJ-EG9c","highest mv views":"Very Very Very (너무 너무 너무)","highest mv link":"https://youtu.be/GdxvD7r58ng?feature=shared",image:"small + low qual","":"REMOVE"},{name:"BLACKPINK",id:"29","debut year":"2016","debut song":"BOOMBAYAH","debut song link":"https://youtu.be/bwmSjveL3Lc?si=mbhaB5WSFjqzQV3W","highest mv views":"DDU-DU DDU-DU (뚜두뚜두) https://www.youtube.com/watch?v=IHNzOHi8sJs","highest mv link":"https://www.youtube.com/watch?v=IHNzOHi8sJs",image:"","":""},{name:"Wanna One",id:"30","debut year":"2017","debut song":"Energetic","debut song link":"https://youtu.be/EVaV7AwqBWg?si=a_nadrDDFLqZVa1G","highest mv views":"Energetic","highest mv link":"https://youtu.be/EVaV7AwqBWg?si=a_nadrDDFLqZVa1G",image:"small + low qual","":"REMOVE"},{name:"Stray Kids",id:"31","debut year":"2018","debut song":"District 9","debut song link":"https://youtu.be/u6unJQownW4?si=JlN0wr_QLhKewSN-","highest mv views":"God's Menu (神메뉴)","highest mv link":"https://www.youtube.com/watch?v=TQTlCHxyuu8",image:"","":""},{name:"(G)I-DLE ((여자)아이들)",id:"32","debut year":"2018","debut song":"LATATA","debut song link":"https://youtu.be/p4RIhcY7V3c?si=c_K87xUxsjn5BQGm","highest mv views":"Queencard (퀸카)","highest mv link":"https://youtu.be/7HDeem-JaSY?feature=shared",image:"","":""},{name:"IZ*ONE",id:"33","debut year":"2018","debut song":"La Vie en Rose (라비앙로즈)","debut song link":"https://youtu.be/WZwr2a_lFWY?si=EcUcpAfwJMyE57i5","highest mv views":"Fiesta","highest mv link":"https://www.youtube.com/watch?v=eDEFolvLn0A",image:"small + low qual","":"REMOVE"},{name:"ITZY",id:"34","debut year":"2019","debut song":"DALLA DALLA (달라달라)","debut song link":"https://youtu.be/pNfTK39k55U?si=b6ESkvjDTKImWhY9","highest mv views":"WANNABE","highest mv link":"https://www.youtube.com/watch?v=fE2h3lGlOsk",image:"","":""},{name:"TXT (TOMORROW X TOGETHER)",id:"35","debut year":"2019","debut song":"CROWN (어느날 머리에서 뿔이 자랐다)","debut song link":"https://youtu.be/W3iSnJ663II?si=fJMsbm94kuqfwpRs","highest mv views":"Blue Hour","highest mv link":"https://youtu.be/Vd9QkWsd5p4?feature=shared",image:"CROP TO SQUARE","":""},{name:"TREASURE",id:"36","debut year":"2020","debut song":"BOY","debut song link":"https://youtu.be/JSAfPh1A25E?si=SbasbZ41-BLJYBnL","highest mv views":"JIKJIN (직진)","highest mv link":"https://youtu.be/ZJaKdBBzUYk?feature=shared",image:"","":""},{name:"aespa",id:"37","debut year":"2020","debut song":"Black Mamba","debut song link":"https://youtu.be/ZeerrnuLi5E?si=S-gqX_sQc_hYSHz9","highest mv views":"Next Level","highest mv link":"https://youtu.be/4TWR90KJl84?feature=shared",image:"","":""},{name:"ENHYPEN",id:"38","debut year":"2020","debut song":"Given-Taken","debut song link":"https://youtu.be/nQ6wLuYvGd4?si=eUedkwc1OFPAU8iH","highest mv views":"Drunk-Dazed","highest mv link":"https://youtu.be/Fc7-Oe0tj5k?si=KQnSczgAk-4sCDFq",image:"small","":""},{name:"IVE",id:"39","debut year":"2021","debut song":"ELEVEN","debut song link":"https://youtu.be/--FmExEAsM8?si=MDcAyaT_NVInfrBf","highest mv views":"After LIKE","highest mv link":"https://www.youtube.com/watch?v=F0B7HDiY-10&list=PLw6GjJYVtN0zhT0vdt1mWeBkgNr0sNwpp&index=3",image:"","":""},{name:"Kep1er",id:"40","debut year":"2022","debut song":"WA DA DA","debut song link":"https://youtu.be/n0j5NPptyM0?si=436Z9gkZvSacjRUh","highest mv views":"WA DA DA","highest mv link":"https://youtu.be/n0j5NPptyM0?si=436Z9gkZvSacjRUh",image:"","":"REMOVE"},{name:"NMIXX",id:"41","debut year":"2022","debut song":"O.O","debut song link":"https://youtu.be/3GWscde8rM8?si=RprVx2q7st8GycEk","highest mv views":"DICE","highest mv link":"https://youtu.be/p1bjnyDqI9k?si=jDucukb0Qvs-xs9h",image:"","":""},{name:"LE SSERAFIM",id:"42","debut year":"2022","debut song":"FEARLESS","debut song link":"https://youtu.be/4vbDFu0PUew?si=2wiF8J4MbiNHfXIB","highest mv views":"ANTIFRAGILE","highest mv link":"https://youtu.be/pyf8cbqyfPs?si=pFVJTZDp_zxxe5eP",image:"","":""},{name:"NewJeans",id:"43","debut year":"2022","debut song":"Attention","debut song link":"https://youtu.be/js1CtxSY38I?si=HHYtXwITAk5O8KvJ","highest mv views":"Super Shy","highest mv link":"https://youtu.be/ArmDp-zijuc?si=dgUEWpUVN1lWOran",image:"small","":""},{name:"BOYNEXTDOOR",id:"44","debut year":"2023","debut song":"Serenade","debut song link":"https://youtu.be/Uyq9OE8lIz8?si=oxaR8pLU5zieqlpC","highest mv views":"Earth, Wind & Fire","highest mv link":"https://www.youtube.com/watch?v=u9nP3qXQA4o",image:"","":"REMOVE"},{name:"ZEROBASEONE",id:"45","debut year":"2023","debut song":"In Bloom","debut song link":"https://youtu.be/trzeUClQIIg?si=LxiBZRZ1Sv8SdG4g","highest mv views":"CRUSH (가시)","highest mv link":"https://www.youtube.com/watch?v=AZoZbtI67Yk",image:"","":""},{name:"RIIZE",id:"46","debut year":"2023","debut song":"Get A Guitar","debut song link":"https://youtu.be/iUw3LPM7OBU?si=v1PxZ1HQOecnbFri","highest mv views":"Get A Guitar","highest mv link":"https://youtu.be/iUw3LPM7OBU?si=v1PxZ1HQOecnbFri",image:"","":""},{name:"BABYMONSTER",id:"47","debut year":"2023","debut song":"Batter Up","debut song link":"https://youtu.be/olDWm2veCrM?si=hnAU6SGWrZJr9sUM","highest mv views":"Batter Up","highest mv link":"https://youtu.be/olDWm2veCrM?si=hnAU6SGWrZJr9sUM",image:"","":""},{name:"TWS (투어스)",id:"48","debut year":"2024","debut song":"plot twist (첫 만남은 계획대로 되지 않아)","debut song link":"https://youtu.be/hVAc1Vf2ITU?si=E4eRB4Xt7zqx5xE4","highest mv views":"plot twist (첫 만남은 계획대로 되지 않아)","highest mv link":"https://youtu.be/hVAc1Vf2ITU?si=E4eRB4Xt7zqx5xE4",image:"CROP TO SQUARE","":""},{name:"VCHA",id:"49","debut year":"2024","debut song":"Girls of the Year","debut song link":"https://youtu.be/rBHK8Z8cwmQ?si=azCvDC_7u-ZaancM","highest mv views":"Y.O.Universe","highest mv link":"https://youtu.be/M8EsxRh0zOc?si=WmBHbfOFxLClfNQg",image:"","":"REMOVE"},{name:"ILLIT",id:"50","debut year":"2024","debut song":"Magnetic","debut song link":"https://www.youtube.com/watch?v=Vk5-c_v4gMU","highest mv views":"Magnetic","highest mv link":"https://www.youtube.com/watch?v=Vk5-c_v4gMU",image:"","":""}],Gi={title:"Title TK",description:"Description tk."},zi={index:[{type:"section",value:[{type:"text",value:"This is an experiment to define <span class=intro-highlight>K-pop</span> generations."}]},{type:"section",value:[{type:"text",value:"We want <span class=intro-highlight>fans</span> to have the opportunity to <span class=intro-highlight>vote</span> and determine the answers."}]},{type:"voting",value:{}}]},mt={meta:Gi,body:zi};function Hi(n,{from:e,to:t},r={}){const i=getComputedStyle(n),s=i.transform==="none"?"":i.transform,[o,a]=i.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*o/t.width-(t.left+o),u=e.top+e.height*a/t.height-(t.top+a),{delay:c=0,duration:h=f=>Math.sqrt(f)*120,easing:d=Nn}=r;return{delay:c,duration:br(h)?h(Math.sqrt(l*l+u*u)):h,easing:d,css:(f,g)=>{const v=g*l,_=g*u,w=f+g*e.width/t.width,m=f+g*e.height/t.height;return`transform: ${s} translate(${v}px, ${_}px) scale(${w}, ${m});`}}}function Gr(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $t(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gr(Object(t),!0).forEach(function(r){tt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Gr(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function dt(n){"@babel/helpers - typeof";return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(n)}function tt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vi(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function qi(n,e){if(n==null)return{};var t=Vi(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Wi(n,e){return Ki(n)||Yi(n,e)||Er(n,e)||Xi()}function ae(n){return Ji(n)||Zi(n)||Er(n)||Qi()}function Ji(n){if(Array.isArray(n))return ar(n)}function Ki(n){if(Array.isArray(n))return n}function Zi(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Yi(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function Er(n,e){if(n){if(typeof n=="string")return ar(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ar(n,e)}}function ar(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Qi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Er(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}var es="finalize",ts="consider";function rt(n,e,t){n.dispatchEvent(new CustomEvent(es,{detail:{items:e,info:t}}))}function Se(n,e,t){n.dispatchEvent(new CustomEvent(ts,{detail:{items:e,info:t}}))}var Vt="draggedEntered",wt="draggedLeft",qt="draggedOverIndex",Tr="draggedLeftDocument",Lt={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function rs(n,e,t){n.dispatchEvent(new CustomEvent(Vt,{detail:{indexObj:e,draggedEl:t}}))}function ns(n,e,t){n.dispatchEvent(new CustomEvent(wt,{detail:{draggedEl:e,type:Lt.LEFT_FOR_ANOTHER,theOtherDz:t}}))}function is(n,e){n.dispatchEvent(new CustomEvent(wt,{detail:{draggedEl:e,type:Lt.OUTSIDE_OF_ANY}}))}function ss(n,e,t){n.dispatchEvent(new CustomEvent(qt,{detail:{indexObj:e,draggedEl:t}}))}function os(n){window.dispatchEvent(new CustomEvent(Tr,{detail:{draggedEl:n}}))}var W={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Vt,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:qt,DRAGGED_LEFT:wt,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},K={POINTER:"pointer",KEYBOARD:"keyboard"},nt="isDndShadowItem",kr="data-is-dnd-shadow-item-internal",as="data-is-dnd-shadow-item-hint",ls="id:dnd-shadow-placeholder-0000",cs="dnd-action-dragged-el",M="id",lr=0;function Un(){lr++}function Mn(){if(lr===0)throw new Error("Bug! trying to decrement when there are no dropzones");lr--}var Or=typeof window>"u";function cr(n){var e,t=n.getBoundingClientRect(),r=getComputedStyle(n),i=r.transform;if(i){var s,o,a,l;if(i.startsWith("matrix3d("))e=i.slice(9,-1).split(/, /),s=+e[0],o=+e[5],a=+e[12],l=+e[13];else if(i.startsWith("matrix("))e=i.slice(7,-1).split(/, /),s=+e[0],o=+e[3],a=+e[4],l=+e[5];else return t;var u=r.transformOrigin,c=t.x-a-(1-s)*parseFloat(u),h=t.y-l-(1-o)*parseFloat(u.slice(u.indexOf(" ")+1)),d=s?t.width/s:n.offsetWidth,f=o?t.height/o:n.offsetHeight;return{x:c,y:h,width:d,height:f,top:h,right:c+d,bottom:h+f,left:c}}else return t}function Fn(n){var e=cr(n);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Bn(n){var e=n.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Gn(n){return{x:(n.left+n.right)/2,y:(n.top+n.bottom)/2}}function us(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Wt(n,e){return n.y<=e.bottom&&n.y>=e.top&&n.x>=e.left&&n.x<=e.right}function pt(n){return Gn(Bn(n))}function zr(n,e){var t=pt(n),r=Fn(e);return Wt(t,r)}function hs(n,e){var t=pt(n),r=pt(e);return us(t,r)}function ds(n){var e=Bn(n);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}var We;function Sr(){We=new Map}Sr();function fs(n){var e=Array.from(n.children).findIndex(function(t){return t.getAttribute(kr)});if(e>=0)return We.has(n)||We.set(n,new Map),We.get(n).set(e,Fn(n.children[e])),e}function gs(n,e){if(!zr(n,e))return null;var t=e.children;if(t.length===0)return{index:0,isProximityBased:!0};for(var r=fs(e),i=0;i<t.length;i++)if(zr(n,t[i])){var s=We.has(e)&&We.get(e).get(i);return s&&!Wt(pt(n),s)?{index:r,isProximityBased:!1}:{index:i,isProximityBased:!1}}for(var o=Number.MAX_VALUE,a=void 0,l=0;l<t.length;l++){var u=hs(n,t[l]);u<o&&(o=u,a=l)}return{index:a,isProximityBased:!0}}function kt(n){return JSON.stringify(n,null,2)}function xt(n){if(!n)throw new Error("cannot get depth of a falsy node");return zn(n,0)}function zn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.parentElement?zn(n.parentElement,e+1):e-1}function ms(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(var t in n)if(!{}.hasOwnProperty.call(e,t)||e[t]!==n[t])return!1;return!0}function ps(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var vs=200,Hr=10,ur;function _s(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vs,r=arguments.length>3?arguments[3]:void 0,i,s,o=!1,a,l=Array.from(e).sort(function(c,h){return xt(h)-xt(c)});function u(){var c=pt(n),h=r.multiScrollIfNeeded();if(!h&&a&&Math.abs(a.x-c.x)<Hr&&Math.abs(a.y-c.y)<Hr){ur=window.setTimeout(u,t);return}if(ds(n)){os(n);return}a=c;var d=!1,f=bt(l),g;try{for(f.s();!(g=f.n()).done;){var v=g.value;h&&Sr();var _=gs(n,v);if(_!==null){var w=_.index;d=!0,v!==i?(i&&ns(i,n,v),rs(v,_,n),i=v):w!==s&&(ss(v,_,n),s=w);break}}}catch(m){f.e(m)}finally{f.f()}!d&&o&&i?(is(i,n),i=void 0,s=void 0,o=!1):o=!0,ur=window.setTimeout(u,t)}u()}function ys(){clearTimeout(ur),Sr()}var at=30;function bs(){var n;function e(){n={directionObj:void 0,stepPx:0}}e();function t(s){var o=n,a=o.directionObj,l=o.stepPx;a&&(s.scrollBy(a.x*l,a.y*l),window.requestAnimationFrame(function(){return t(s)}))}function r(s){return at-s}function i(s,o){if(!o)return!1;var a=ws(s,o);if(a===null)return e(),!1;var l=!!n.directionObj,u=!1,c=!1;return o.scrollHeight>o.clientHeight&&(a.bottom<at?(u=!0,n.directionObj={x:0,y:1},n.stepPx=r(a.bottom)):a.top<at&&(u=!0,n.directionObj={x:0,y:-1},n.stepPx=r(a.top)),!l&&u)||o.scrollWidth>o.clientWidth&&(a.right<at?(c=!0,n.directionObj={x:1,y:0},n.stepPx=r(a.right)):a.left<at&&(c=!0,n.directionObj={x:-1,y:0},n.stepPx=r(a.left)),!l&&c)?(t(o),!0):(e(),!1)}return{scrollIfNeeded:i,resetScrolling:e}}function ws(n,e){var t=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();return Wt(n,t)?{top:n.y-t.top,bottom:t.bottom-n.y,left:n.x-t.left,right:t.right-n.x}:null}function Es(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,t=ks(n),r=Array.from(t).sort(function(a,l){return xt(l)-xt(a)}),i=bs(),s=i.scrollIfNeeded;function o(){var a=e();if(!a||!r)return!1;for(var l=r.filter(function(h){return Wt(a,h.getBoundingClientRect())||h===document.scrollingElement}),u=0;u<l.length;u++){var c=s(a,l[u]);if(c)return!0}return!1}return{multiScrollIfNeeded:t.size>0?o:function(){return!1}}}function Ts(n){if(!n)return[];for(var e=[],t=n;t;){var r=window.getComputedStyle(t),i=r.overflow;i.split(" ").some(function(s){return s.includes("auto")||s.includes("scroll")})&&e.push(t),t=t.parentElement}return e}function ks(n){var e=new Set,t=bt(n),r;try{for(t.s();!(r=t.n()).done;){var i=r.value;Ts(i).forEach(function(s){return e.add(s)})}}catch(s){t.e(s)}finally{t.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement),e}function Os(n){var e=n.cloneNode(!0),t=[],r=n.tagName==="SELECT",i=r?[n]:ae(n.querySelectorAll("select")),s=bt(i),o;try{for(s.s();!(o=s.n()).done;){var a=o.value;t.push(a.value)}}catch(p){s.e(p)}finally{s.f()}if(i.length>0)for(var l=r?[e]:ae(e.querySelectorAll("select")),u=0;u<l.length;u++){var c=l[u],h=t[u],d=c.querySelector('option[value="'.concat(h,'"'));d&&d.setAttribute("selected",!0)}var f=n.tagName==="CANVAS",g=f?[n]:ae(n.querySelectorAll("canvas"));if(g.length>0)for(var v=f?[e]:ae(e.querySelectorAll("canvas")),_=0;_<v.length;_++){var w=g[_],m=v[_];m.width=w.width,m.height=w.height,m.getContext("2d").drawImage(w,0,0)}return e}var vt=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Ss=tt({},vt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Hn(n){if(!vt[n])throw new Error("Can't get non existing feature flag ".concat(n,"! Supported flags: ").concat(Object.keys(vt)));return Ss[n]}var As=.2;function De(n){return"".concat(n," ").concat(As,"s ease")}function Ds(n,e){var t=n.getBoundingClientRect(),r=Os(n);Vn(n,r),r.id=cs,r.style.position="fixed";var i=t.top,s=t.left;if(r.style.top="".concat(i,"px"),r.style.left="".concat(s,"px"),e){var o=Gn(t);i-=o.y-e.y,s-=o.x-e.x,window.setTimeout(function(){r.style.top="".concat(i,"px"),r.style.left="".concat(s,"px")},0)}return r.style.margin="0",r.style.boxSizing="border-box",r.style.height="".concat(t.height,"px"),r.style.width="".concat(t.width,"px"),r.style.transition="".concat(De("top"),", ").concat(De("left"),", ").concat(De("background-color"),", ").concat(De("opacity"),", ").concat(De("color")," "),window.setTimeout(function(){return r.style.transition+=", ".concat(De("width"),", ").concat(De("height"))},0),r.style.zIndex="9999",r.style.cursor="grabbing",r}function Is(n){n.style.cursor="grab"}function Rs(n,e,t,r){Vn(e,n);var i=e.getBoundingClientRect(),s=n.getBoundingClientRect(),o=i.width-s.width,a=i.height-s.height;if(o||a){var l={left:(t-s.left)/s.width,top:(r-s.top)/s.height};Hn(vt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(n.style.height="".concat(i.height,"px"),n.style.width="".concat(i.width,"px")),n.style.left="".concat(parseFloat(n.style.left)-l.left*o,"px"),n.style.top="".concat(parseFloat(n.style.top)-l.top*a,"px")}}function Vn(n,e){var t=window.getComputedStyle(n);Array.from(t).filter(function(r){return r.startsWith("background")||r.startsWith("padding")||r.startsWith("font")||r.startsWith("text")||r.startsWith("align")||r.startsWith("justify")||r.startsWith("display")||r.startsWith("flex")||r.startsWith("border")||r==="opacity"||r==="color"||r==="list-style-type"||Hn(vt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(r==="width"||r==="height")}).forEach(function(r){return e.style.setProperty(r,t.getPropertyValue(r),t.getPropertyPriority(r))})}function Cs(n,e){n.draggable=!1,n.ondragstart=function(){return!1},e?(n.style.userSelect="",n.style.WebkitUserSelect="",n.style.cursor=""):(n.style.userSelect="none",n.style.WebkitUserSelect="none",n.style.cursor="grab")}function qn(n){n.style.display="none",n.style.position="fixed",n.style.zIndex="-5"}function Ps(n){n.style.visibility="hidden",n.setAttribute(kr,"true")}function $s(n){n.style.visibility="",n.removeAttribute(kr)}function It(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};n.forEach(function(r){var i=e(r);Object.keys(i).forEach(function(s){r.style[s]=i[s]}),t(r).forEach(function(s){return r.classList.add(s)})})}function jt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};n.forEach(function(r){var i=e(r);Object.keys(i).forEach(function(s){r.style[s]=""}),t(r).forEach(function(s){return r.classList.contains(s)&&r.classList.remove(s)})})}function Ls(n){var e=n.style.minHeight;n.style.minHeight=window.getComputedStyle(n).getPropertyValue("height");var t=n.style.minWidth;return n.style.minWidth=window.getComputedStyle(n).getPropertyValue("width"),function(){n.style.minHeight=e,n.style.minWidth=t}}var xs="--any--",js=100,Ns=20,Vr=3,qr={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Wr="data-is-dnd-original-dragged-item",pe,G,J,Jt,L,Kt,Oe,V,Ee,X,xe=!1,Ar=!1,Dr,Et=!1,Rt=[],fe=new Map,j=new Map,Xt=new WeakMap;function Us(n,e){fe.has(e)||fe.set(e,new Set),fe.get(e).has(n)||(fe.get(e).add(n),Un())}function Jr(n,e){fe.get(e).delete(n),Mn(),fe.get(e).size===0&&fe.delete(e)}function Ms(){var n=fe.get(Jt),e=bt(n),t;try{for(e.s();!(t=e.n()).done;){var r=t.value;r.addEventListener(Vt,Wn),r.addEventListener(wt,Jn),r.addEventListener(qt,Kn)}}catch(a){e.e(a)}finally{e.f()}window.addEventListener(Tr,it);var i=Math.max.apply(Math,ae(Array.from(n.keys()).map(function(a){return j.get(a).dropAnimationDurationMs}))),s=i===0?Ns:Math.max(i,js),o=Es(n,function(){return X});_s(G,n,s*1.07,o)}function Fs(){var n=fe.get(Jt),e=bt(n),t;try{for(e.s();!(t=e.n()).done;){var r=t.value;r.removeEventListener(Vt,Wn),r.removeEventListener(wt,Jn),r.removeEventListener(qt,Kn)}}catch(i){e.e(i)}finally{e.f()}window.removeEventListener(Tr,it),ys()}function Zt(n){return n.findIndex(function(e){return!!e[nt]})}function Bs(n){var e;return $t($t({},n),{},(e={},tt(e,nt,!0),tt(e,M,ls),e))}function Wn(n){var e=j.get(n.currentTarget),t=e.items,r=e.dropFromOthersDisabled;if(!(r&&n.currentTarget!==L)){if(Et=!1,t=t.filter(function(c){return c[M]!==Oe[M]}),L!==n.currentTarget){var i=j.get(L).items,s=i.filter(function(c){return!c[nt]});Se(L,s,{trigger:W.DRAGGED_ENTERED_ANOTHER,id:J[M],source:K.POINTER})}var o=n.detail.indexObj,a=o.index,l=o.isProximityBased,u=l&&a===n.currentTarget.children.length-1?a+1:a;V=n.currentTarget,t.splice(u,0,Oe),Se(n.currentTarget,t,{trigger:W.DRAGGED_ENTERED,id:J[M],source:K.POINTER})}}function Jn(n){if(xe){var e=j.get(n.currentTarget),t=e.items,r=e.dropFromOthersDisabled;if(!(r&&n.currentTarget!==L&&n.currentTarget!==V)){var i=ae(t),s=Zt(i);s!==-1&&i.splice(s,1);var o=V;V=void 0;var a=n.detail,l=a.type,u=a.theOtherDz;if(l===Lt.OUTSIDE_OF_ANY||l===Lt.LEFT_FOR_ANOTHER&&u!==L&&j.get(u).dropFromOthersDisabled){Et=!0,V=L;var c=o===L?i:ae(j.get(L).items);c.splice(Kt,0,Oe),Se(L,c,{trigger:W.DRAGGED_LEFT_ALL,id:J[M],source:K.POINTER})}Se(n.currentTarget,i,{trigger:W.DRAGGED_LEFT,id:J[M],source:K.POINTER})}}}function Kn(n){var e=j.get(n.currentTarget),t=e.items,r=e.dropFromOthersDisabled;if(!(r&&n.currentTarget!==L)){var i=ae(t);Et=!1;var s=n.detail.indexObj.index,o=Zt(i);o!==-1&&i.splice(o,1),i.splice(s,0,Oe),Se(n.currentTarget,i,{trigger:W.DRAGGED_OVER_INDEX,id:J[M],source:K.POINTER})}}function Nt(n){n.preventDefault();var e=n.touches?n.touches[0]:n;X={x:e.clientX,y:e.clientY},G.style.transform="translate3d(".concat(X.x-Ee.x,"px, ").concat(X.y-Ee.y,"px, 0)")}function it(){Ar=!0,window.removeEventListener("mousemove",Nt),window.removeEventListener("touchmove",Nt),window.removeEventListener("mouseup",it),window.removeEventListener("touchend",it),Fs(),Is(G),V||(V=L);var n=j.get(V),e=n.items,t=n.type;jt(fe.get(t),function(s){return j.get(s).dropTargetStyle},function(s){return j.get(s).dropTargetClasses});var r=Zt(e);r===-1&&V===L&&(r=Kt),e=e.map(function(s){return s[nt]?J:s});function i(){Dr(),rt(V,e,{trigger:Et?W.DROPPED_OUTSIDE_OF_ANY:W.DROPPED_INTO_ZONE,id:J[M],source:K.POINTER}),V!==L&&rt(L,j.get(L).items,{trigger:W.DROPPED_INTO_ANOTHER,id:J[M],source:K.POINTER}),r!==-1&&$s(V.children[r]),Hs()}Gs(r,i)}function Gs(n,e){var t=n>-1?cr(V.children[n]):cr(V),r={x:t.left-parseFloat(G.style.left),y:t.top-parseFloat(G.style.top)},i=j.get(V),s=i.dropAnimationDurationMs,o="transform ".concat(s,"ms ease");G.style.transition=G.style.transition?G.style.transition+","+o:o,G.style.transform="translate3d(".concat(r.x,"px, ").concat(r.y,"px, 0)"),window.setTimeout(e,s)}function zs(n,e){Rt.push({dz:n,destroy:e}),window.requestAnimationFrame(function(){qn(n),document.body.appendChild(n)})}function Hs(){G.remove(),pe.remove(),Rt.length&&(Rt.forEach(function(n){var e=n.dz,t=n.destroy;t(),e.remove()}),Rt=[]),G=void 0,pe=void 0,J=void 0,Jt=void 0,L=void 0,Kt=void 0,Oe=void 0,V=void 0,Ee=void 0,X=void 0,xe=!1,Ar=!1,Dr=void 0,Et=!1}function Vs(n,e){var t=!1,r={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:qr,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1},i=new Map;function s(){window.addEventListener("mousemove",l,{passive:!1}),window.addEventListener("touchmove",l,{passive:!1,capture:!1}),window.addEventListener("mouseup",a,{passive:!1}),window.addEventListener("touchend",a,{passive:!1})}function o(){window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a)}function a(){o(),pe=void 0,Ee=void 0,X=void 0}function l(d){d.preventDefault();var f=d.touches?d.touches[0]:d;X={x:f.clientX,y:f.clientY},(Math.abs(X.x-Ee.x)>=Vr||Math.abs(X.y-Ee.y)>=Vr)&&(o(),c())}function u(d){if(!(d.target!==d.currentTarget&&(d.target.value!==void 0||d.target.isContentEditable))&&!d.button&&!xe){d.stopPropagation();var f=d.touches?d.touches[0]:d;Ee={x:f.clientX,y:f.clientY},X=$t({},Ee),pe=d.currentTarget,s()}}function c(){xe=!0;var d=i.get(pe);Kt=d,L=pe.parentElement;var f=L.closest("dialog")||L.getRootNode(),g=f.body||f,v=r.items,_=r.type,w=r.centreDraggedOnCursor,m=ae(v);J=m[d],Jt=_,Oe=Bs(J),G=Ds(pe,w&&X),pe.setAttribute(Wr,!0);function p(){G.parentElement?window.requestAnimationFrame(p):(g.appendChild(G),G.focus(),Ms(),qn(pe),g.appendChild(pe),Oe[M]=J[M])}window.requestAnimationFrame(p),It(Array.from(fe.get(r.type)).filter(function(b){return b===L||!j.get(b).dropFromOthersDisabled}),function(b){return j.get(b).dropTargetStyle},function(b){return j.get(b).dropTargetClasses}),m.splice(d,1,Oe),Dr=Ls(L),Se(L,m,{trigger:W.DRAG_STARTED,id:J[M],source:K.POINTER}),window.addEventListener("mousemove",Nt,{passive:!1}),window.addEventListener("touchmove",Nt,{passive:!1,capture:!1}),window.addEventListener("mouseup",it,{passive:!1}),window.addEventListener("touchend",it,{passive:!1})}function h(d){var f=d.items,g=f===void 0?void 0:f,v=d.flipDurationMs,_=v===void 0?0:v,w=d.type,m=w===void 0?xs:w,p=d.dragDisabled,b=p===void 0?!1:p,k=d.morphDisabled,F=k===void 0?!1:k,re=d.dropFromOthersDisabled,Y=re===void 0?!1:re,ge=d.dropTargetStyle,ne=ge===void 0?qr:ge,ie=d.dropTargetClasses,C=ie===void 0?[]:ie,R=d.transformDraggedElement,T=R===void 0?function(){}:R,$=d.centreDraggedOnCursor,Ae=$===void 0?!1:$;r.dropAnimationDurationMs=_,r.type&&m!==r.type&&Jr(n,r.type),r.type=m,r.items=ae(g),r.dragDisabled=b,r.morphDisabled=F,r.transformDraggedElement=T,r.centreDraggedOnCursor=Ae,t&&xe&&!Ar&&(!ms(ne,r.dropTargetStyle)||!ps(C,r.dropTargetClasses))&&(jt([n],function(){return r.dropTargetStyle},function(){return C}),It([n],function(){return ne},function(){return C})),r.dropTargetStyle=ne,r.dropTargetClasses=ae(C);function N(me,xr){return j.get(me)?j.get(me)[xr]:r[xr]}t&&xe&&r.dropFromOthersDisabled!==Y&&(Y?jt([n],function(me){return N(me,"dropTargetStyle")},function(me){return N(me,"dropTargetClasses")}):It([n],function(me){return N(me,"dropTargetStyle")},function(me){return N(me,"dropTargetClasses")})),r.dropFromOthersDisabled=Y,j.set(n,r),Us(n,m);for(var ui=Zt(r.items),Me=0;Me<n.children.length;Me++){var ce=n.children[Me];if(Cs(ce,b),Me===ui){r.transformDraggedElement(G,J,Me),F||Rs(G,ce,X.x,X.y),Ps(ce);continue}ce.removeEventListener("mousedown",Xt.get(ce)),ce.removeEventListener("touchstart",Xt.get(ce)),b||(ce.addEventListener("mousedown",u),ce.addEventListener("touchstart",u),Xt.set(ce,u)),i.set(ce,Me),t||(t=!0)}}return h(e),{update:function(f){h(f)},destroy:function(){function f(){Jr(n,j.get(n).type),j.delete(n)}xe&&!n.closest("[".concat(Wr,"]"))?zs(n,f):f()}}}var Ot,hr={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Zn=(Ot={},tt(Ot,hr.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),tt(Ot,hr.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Ot),qs="dnd-action-aria-alert",x;function dr(){x||(x=document.createElement("div"),function(){x.id=qs,x.style.position="fixed",x.style.bottom="0",x.style.left="0",x.style.zIndex="-5",x.style.opacity="0",x.style.height="0",x.style.width="0",x.setAttribute("role","alert")}(),document.body.prepend(x),Object.entries(Zn).forEach(function(n){var e=Wi(n,2),t=e[0],r=e[1];return document.body.prepend(Ks(t,r))}))}function Ws(){return Or?null:(document.readyState==="complete"?dr():window.addEventListener("DOMContentLoaded",dr),$t({},hr))}function Js(){Or||!x||(Object.keys(Zn).forEach(function(n){var e;return(e=document.getElementById(n))===null||e===void 0?void 0:e.remove()}),x.remove(),x=void 0)}function Ks(n,e){var t=document.createElement("div");return t.id=n,t.innerHTML="<p>".concat(e,"</p>"),t.style.display="none",t.style.position="fixed",t.style.zIndex="-5",t}function Je(n){if(!Or){x||dr(),x.innerHTML="";var e=document.createTextNode(n);x.appendChild(e),x.style.display="none",x.style.display="inline"}}var Zs="--any--",Kr={outline:"rgba(255, 255, 102, 0.7) solid 2px"},oe=!1,fr,q,Ne="",Ce,ve,ke="",Ut=new WeakSet,Zr=new WeakMap,Yr=new WeakMap,gr=new Map,B=new Map,de=new Map,Mt;function Ys(n,e){de.size===0&&(Mt=Ws(),window.addEventListener("keydown",Yn),window.addEventListener("click",Qn)),de.has(e)||de.set(e,new Set),de.get(e).has(n)||(de.get(e).add(n),Un())}function Qr(n,e){q===n&&_t(),de.get(e).delete(n),Mn(),de.get(e).size===0&&de.delete(e),de.size===0&&(window.removeEventListener("keydown",Yn),window.removeEventListener("click",Qn),Mt=void 0,Js())}function Yn(n){if(oe)switch(n.key){case"Escape":{_t();break}}}function Qn(){oe&&(Ut.has(document.activeElement)||_t())}function Qs(n){if(oe){var e=n.currentTarget;if(e!==q){Ne=e.getAttribute("aria-label")||"";var t=B.get(q),r=t.items,i=r.find(function(h){return h[M]===ve}),s=r.indexOf(i),o=r.splice(s,1)[0],a=B.get(e),l=a.items,u=a.autoAriaDisabled;e.getBoundingClientRect().top<q.getBoundingClientRect().top||e.getBoundingClientRect().left<q.getBoundingClientRect().left?(l.push(o),u||Je("Moved item ".concat(ke," to the end of the list ").concat(Ne))):(l.unshift(o),u||Je("Moved item ".concat(ke," to the beginning of the list ").concat(Ne)));var c=q;rt(c,r,{trigger:W.DROPPED_INTO_ANOTHER,id:ve,source:K.KEYBOARD}),rt(e,l,{trigger:W.DROPPED_INTO_ZONE,id:ve,source:K.KEYBOARD}),q=e}}}function Xn(){gr.forEach(function(n,e){var t=n.update;return t(B.get(e))})}function _t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;B.get(q).autoAriaDisabled||Je("Stopped dragging item ".concat(ke)),Ut.has(document.activeElement)&&document.activeElement.blur(),n&&Se(q,B.get(q).items,{trigger:W.DRAG_STOPPED,id:ve,source:K.KEYBOARD}),jt(de.get(fr),function(e){return B.get(e).dropTargetStyle},function(e){return B.get(e).dropTargetClasses}),Ce=null,ve=null,ke="",fr=null,q=null,Ne="",oe=!1,Xn()}function Xs(n,e){var t={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Kr,dropTargetClasses:[],autoAriaDisabled:!1};function r(c,h,d){c.length<=1||c.splice(d,1,c.splice(h,1,c[d])[0])}function i(c){switch(c.key){case"Enter":case" ":{if((c.target.disabled!==void 0||c.target.href||c.target.isContentEditable)&&!Ut.has(c.target))return;c.preventDefault(),c.stopPropagation(),oe?_t():s(c);break}case"ArrowDown":case"ArrowRight":{if(!oe)return;c.preventDefault(),c.stopPropagation();var h=B.get(n),d=h.items,f=Array.from(n.children),g=f.indexOf(c.currentTarget);g<f.length-1&&(t.autoAriaDisabled||Je("Moved item ".concat(ke," to position ").concat(g+2," in the list ").concat(Ne)),r(d,g,g+1),rt(n,d,{trigger:W.DROPPED_INTO_ZONE,id:ve,source:K.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!oe)return;c.preventDefault(),c.stopPropagation();var v=B.get(n),_=v.items,w=Array.from(n.children),m=w.indexOf(c.currentTarget);m>0&&(t.autoAriaDisabled||Je("Moved item ".concat(ke," to position ").concat(m," in the list ").concat(Ne)),r(_,m,m-1),rt(n,_,{trigger:W.DROPPED_INTO_ZONE,id:ve,source:K.KEYBOARD}));break}}}function s(c){a(c.currentTarget),q=n,fr=t.type,oe=!0;var h=Array.from(de.get(t.type)).filter(function(f){return f===q||!B.get(f).dropFromOthersDisabled});if(It(h,function(f){return B.get(f).dropTargetStyle},function(f){return B.get(f).dropTargetClasses}),!t.autoAriaDisabled){var d="Started dragging item ".concat(ke,". Use the arrow keys to move it within its list ").concat(Ne);h.length>1&&(d+=", or tab to another list in order to move the item into it"),Je(d)}Se(n,B.get(n).items,{trigger:W.DRAG_STARTED,id:ve,source:K.KEYBOARD}),Xn()}function o(c){oe&&c.currentTarget!==Ce&&(c.stopPropagation(),_t(!1),s(c))}function a(c){var h=B.get(n),d=h.items,f=Array.from(n.children),g=f.indexOf(c);Ce=c,Ce.tabIndex=t.zoneItemTabIndex,ve=d[g][M],ke=f[g].getAttribute("aria-label")||""}function l(c){var h=c.items,d=h===void 0?[]:h,f=c.type,g=f===void 0?Zs:f,v=c.dragDisabled,_=v===void 0?!1:v,w=c.zoneTabIndex,m=w===void 0?0:w,p=c.zoneItemTabIndex,b=p===void 0?0:p,k=c.dropFromOthersDisabled,F=k===void 0?!1:k,re=c.dropTargetStyle,Y=re===void 0?Kr:re,ge=c.dropTargetClasses,ne=ge===void 0?[]:ge,ie=c.autoAriaDisabled,C=ie===void 0?!1:ie;t.items=ae(d),t.dragDisabled=_,t.dropFromOthersDisabled=F,t.zoneTabIndex=m,t.zoneItemTabIndex=b,t.dropTargetStyle=Y,t.dropTargetClasses=ne,t.autoAriaDisabled=C,t.type&&g!==t.type&&Qr(n,t.type),t.type=g,Ys(n,g),C||(n.setAttribute("aria-disabled",_),n.setAttribute("role","list"),n.setAttribute("aria-describedby",_?Mt.DND_ZONE_DRAG_DISABLED:Mt.DND_ZONE_ACTIVE)),B.set(n,t),oe?n.tabIndex=n===q||Ce.contains(n)||t.dropFromOthersDisabled||q&&t.type!==B.get(q).type?-1:0:n.tabIndex=t.zoneTabIndex,n.addEventListener("focus",Qs);for(var R=function(Ae){var N=n.children[Ae];Ut.add(N),N.tabIndex=oe?-1:t.zoneItemTabIndex,C||N.setAttribute("role","listitem"),N.removeEventListener("keydown",Zr.get(N)),N.removeEventListener("click",Yr.get(N)),_||(N.addEventListener("keydown",i),Zr.set(N,i),N.addEventListener("click",o),Yr.set(N,o)),oe&&t.items[Ae][M]===ve&&(Ce=N,Ce.tabIndex=t.zoneItemTabIndex,N.focus())},T=0;T<n.children.length;T++)R(T)}l(e);var u={update:function(h){l(h)},destroy:function(){Qr(n,t.type),B.delete(n),gr.delete(n)}};return gr.set(n,u),u}var eo=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"];function to(n,e){if(ro(n))return{update:function(){},destroy:function(){}};Xr(e);var t=Vs(n,e),r=Xs(n,e);return{update:function(s){Xr(s),t.update(s),r.update(s)},destroy:function(){t.destroy(),r.destroy()}}}function ro(n){return!!n.closest("[".concat(as,'="true"]'))}function Xr(n){var e=n.items;n.flipDurationMs,n.type,n.dragDisabled,n.morphDisabled,n.dropFromOthersDisabled;var t=n.zoneTabIndex,r=n.zoneItemTabIndex;n.dropTargetStyle;var i=n.dropTargetClasses;n.transformDraggedElement,n.autoAriaDisabled,n.centreDraggedOnCursor;var s=qi(n,eo);if(Object.keys(s).length>0&&console.warn("dndzone will ignore unknown options",s),!e)throw new Error("no 'items' key provided to dndzone");var o=e.find(function(a){return!{}.hasOwnProperty.call(a,M)});if(o)throw new Error("missing '".concat(M,"' property for item ").concat(kt(o)));if(i&&!Array.isArray(i))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(dt(i),", ").concat(kt(i)));if(t&&!en(t))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(dt(t),", ").concat(kt(t)));if(r&&!en(r))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(dt(r),", ").concat(kt(r)))}function en(n){return!isNaN(n)&&function(e){return(e|0)===e}(parseFloat(n))}const no=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>et(()=>Promise.resolve().then(()=>Tt),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Ir extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class io extends Ir{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class so extends Ir{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class oo extends Ir{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ao=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class lo{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=no(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return ao(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(f=>{throw new io(f)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new so(u);if(!u.ok)throw new oo(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),d;return h==="application/json"?d=yield u.json():h==="application/octet-stream"?d=yield u.blob():h==="multipart/form-data"?d=yield u.formData():d=yield u.text(),{data:d,error:null}}catch(i){return{data:null,error:i}}})}}var co=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},st=co();const uo=st.fetch,Rr=st.fetch.bind(st),ei=st.Headers,ho=st.Request,fo=st.Response,Tt=Object.freeze(Object.defineProperty({__proto__:null,Headers:ei,Request:ho,Response:fo,default:Rr,fetch:uo},Symbol.toStringTag,{value:"Module"}));class go extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class mo{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Rr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let u=null,c=null,h=null,d=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const w=await s.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=w:c=JSON.parse(w))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),_=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&_&&_.length>1&&(h=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,d=406,f="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const v=await s.text();try{u=JSON.parse(v),Array.isArray(u)&&s.status===404&&(c=[],u=null,d=200,f="OK")}catch{s.status===404&&v===""?(d=204,f="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,d=200,f="OK"),u&&this.shouldThrowOnError)throw new go(u)}return{error:u,data:c,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}class po extends mo{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Ve extends po{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class vo{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ve({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ve({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ve({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new Ve({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ve({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const _o="1.9.2",yo={"X-Client-Info":`postgrest-js/${_o}`};class Cr{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},yo),t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new vo(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Cr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(s="HEAD",Object.entries(t).forEach(([u,c])=>{o.searchParams.append(u,`${c}`)})):(s="POST",a=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Ve({method:s,url:o,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const bo="2.9.3",wo={"X-Client-Info":`realtime-js/${bo}`},Eo="1.0.0",ti=1e4,To=1e3;var Ke;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ke||(Ke={}));var Q;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Q||(Q={}));var he;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(he||(he={}));var mr;(function(n){n.websocket="websocket"})(mr||(mr={}));var je;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(je||(je={}));class ri{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ko{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class er{constructor(e,t,r={},i=ti){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tn;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(tn||(tn={}));class ft{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ft.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=ft.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ft.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=s[u];if(h){const d=c.map(_=>_.presence_ref),f=h.map(_=>_.presence_ref),g=c.filter(_=>f.indexOf(_.presence_ref)<0),v=h.filter(_=>d.indexOf(_.presence_ref)<0);g.length>0&&(a[u]=g),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(f=>f.presence_ref),d=c.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var P;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(P||(P={}));const rn=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Oo(o,n,e,i),s),{})},Oo=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?ni(s,o):pr(o)},ni=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Io(e,t)}switch(n){case P.bool:return So(e);case P.float4:case P.float8:case P.int2:case P.int4:case P.int8:case P.numeric:case P.oid:return Ao(e);case P.json:case P.jsonb:return Do(e);case P.timestamp:return Ro(e);case P.abstime:case P.date:case P.daterange:case P.int4range:case P.int8range:case P.money:case P.reltime:case P.text:case P.time:case P.timestamptz:case P.timetz:case P.tsrange:case P.tstzrange:return pr(e);default:return pr(e)}},pr=n=>n,So=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Ao=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Do=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Io=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>ni(e,a))}return n},Ro=n=>typeof n=="string"?n.replace(" ","T"):n;var nn;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(nn||(nn={}));var sn;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(sn||(sn={}));var on;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(on||(on={}));class Pr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Q.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new er(this,he.join,this.params,this.timeout),this.rejoinTimer=new ri(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Q.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Q.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this._on(he.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new ft(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,d=(c=h==null?void 0:h.length)!==null&&c!==void 0?c:0,f=[];for(let g=0;g<d;g++){const v=h[g],{filter:{event:_,schema:w,table:m,filter:p}}=v,b=u&&u[g];if(b&&b.event===_&&b.schema===w&&b.table===m&&b.filter===p)f.push(Object.assign(Object.assign({},v),{id:b.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,a={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=t.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Q.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(he.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new er(this,he.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new er(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=he;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,v,_;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(v=f.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(f=>f.callback(d,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var g,v,_,w,m,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const b=f.id,k=(g=f.filter)===null||g===void 0?void 0:g.event;return b&&((v=t.ids)===null||v===void 0?void 0:v.includes(b))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const b=(m=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return b==="*"||b===((p=t==null?void 0:t.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:v,table:_,commit_timestamp:w,type:m,errors:p}=g;d=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:w,eventType:m,new:{},old:{},errors:p}),this._getPayloadRecords(g))}f.callback(d,r)})}_isClosed(){return this.state===Q.closed}_isJoined(){return this.state===Q.joined}_isJoining(){return this.state===Q.joining}_isLeaving(){return this.state===Q.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Pr.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(he.close,{},e)}_onError(e){this._on(he.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Q.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=rn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=rn(e.columns,e.old_record)),t}}const Co=()=>{},Po=typeof WebSocket<"u";class $o{constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=wo,this.params={},this.timeout=ti,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Co,this.conn=null,this.sendBuffer=[],this.serializer=new ko,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>et(()=>Promise.resolve().then(()=>Tt),void 0,import.meta.url).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${mr.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ri(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Po){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Lo(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),et(()=>import("../chunks/browser.B2KJ9jlP.js").then(e=>e.b),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ke.connecting:return je.Connecting;case Ke.open:return je.Open;case Ke.closing:return je.Closing;default:return je.Closed}}isConnected(){return this.connectionState()===je.Open}channel(e,t={config:{}}){const r=new Pr(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(he.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Eo}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(he.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(To,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Lo{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ke.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class $r extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function H(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class xo extends $r{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class an extends $r{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var jo=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const ii=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>et(()=>Promise.resolve().then(()=>Tt),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},No=()=>jo(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield et(()=>Promise.resolve().then(()=>Tt),void 0,import.meta.url)).Response:Response});var ot=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const tr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Uo=(n,e)=>ot(void 0,void 0,void 0,function*(){const t=yield No();n instanceof t?n.json().then(r=>{e(new xo(tr(r),n.status||500))}).catch(r=>{e(new an(tr(r),r))}):e(new an(tr(n),n))}),Mo=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function Yt(n,e,t,r,i,s){return ot(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Mo(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Uo(l,a))})})}function vr(n,e,t,r){return ot(this,void 0,void 0,function*(){return Yt(n,"GET",e,t,r)})}function we(n,e,t,r,i){return ot(this,void 0,void 0,function*(){return Yt(n,"POST",e,r,i,t)})}function Fo(n,e,t,r,i){return ot(this,void 0,void 0,function*(){return Yt(n,"PUT",e,r,i,t)})}function si(n,e,t,r,i){return ot(this,void 0,void 0,function*(){return Yt(n,"DELETE",e,r,i,t)})}var se=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Bo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ln={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Go{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=ii(i)}uploadOrUpdate(e,t,r,i){return se(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},ln),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl)):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield c.json();return c.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(H(s))return{data:null,error:s};throw s}})}upload(e,t,r){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return se(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:ln.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),d=yield h.json();return h.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(H(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return se(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield we(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+r.url),s=i.searchParams.get("token");if(!s)throw new $r("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}update(e,t,r){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return se(this,void 0,void 0,function*(){try{return{data:yield we(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}copy(e,t){return se(this,void 0,void 0,function*(){try{return{data:{path:(yield we(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return se(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield we(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(H(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return se(this,void 0,void 0,function*(){try{const i=yield we(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(H(i))return{data:null,error:i};throw i}})}download(e,t){return se(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield vr(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(H(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return se(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}list(e,t,r){return se(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Bo),t),{prefix:e||""});return{data:yield we(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(H(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const zo="2.5.5",Ho={"X-Client-Info":`storage-js/${zo}`};var Fe=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class Vo{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Ho),t),this.fetch=ii(r)}listBuckets(){return Fe(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(H(e))return{data:null,error:e};throw e}})}getBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Fe(this,void 0,void 0,function*(){try{return{data:yield we(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Fo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield we(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}}class qo extends Vo{constructor(e,t={},r){super(e,t,r)}from(e){return new Go(this.url,this.headers,e,this.fetch)}}const Wo="2.39.8";let ct="";typeof Deno<"u"?ct="deno":typeof document<"u"?ct="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ct="react-native":ct="node";const Jo={"X-Client-Info":`supabase-js-${ct}/${Wo}`},Ko={headers:Jo},Zo={schema:"public"},Yo={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qo={};var Xo=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const ea=n=>{let e;return n?e=n:typeof fetch>"u"?e=Rr:e=fetch,(...t)=>e(...t)},ta=()=>typeof Headers>"u"?ei:Headers,ra=(n,e,t)=>{const r=ea(t),i=ta();return(s,o)=>Xo(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};function na(n){return n.replace(/\/$/,"")}function ia(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:l,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s)}}function sa(n){return Math.round(Date.now()/1e3)+n}function oa(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ue=()=>typeof document<"u",Ie={tested:!1,writable:!1},gt=()=>{if(!ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ie.tested)return Ie.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ie.tested=!0,Ie.writable=!0}catch{Ie.tested=!0,Ie.writable=!1}return Ie.writable};function rr(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const oi=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>et(()=>Promise.resolve().then(()=>Tt),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},aa=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Re=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},St=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},nr=async(n,e)=>{await n.removeItem(e)};function la(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,o,a,l,u,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)o=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),l=e.indexOf(n.charAt(c++)),u=e.indexOf(n.charAt(c++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|u,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),u!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Qt{constructor(){this.promise=new Qt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Qt.promiseConstructor=Promise;function cn(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(la(r))}async function ca(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function ua(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function ha(n){return("0"+n.toString(16)).substr(-2)}function Be(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,ha).join("")}async function da(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function fa(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ge(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await da(n);return fa(t)}class Lr extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function S(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class ga extends Lr{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function ma(n){return S(n)&&n.name==="AuthApiError"}class ai extends Lr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ue extends Lr{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ze extends Ue{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class ir extends Ue{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class At extends Ue{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Dt extends Ue{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class un extends Ue{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _r extends Ue{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function sr(n){return S(n)&&n.name==="AuthRetryableFetchError"}class pa extends Ue{constructor(e,t,r){super(e,"AuthWeakPasswordError",t),this.reasons=r}}var va=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const qe=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),_a=[502,503,504];async function hn(n){if(!aa(n))throw new _r(qe(n),0);if(_a.includes(n.status))throw new _r(qe(n),n.status);let e;try{e=await n.json()}catch(t){throw new ai(qe(t),t)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)?new pa(qe(e),n.status,e.weak_password.reasons):new ga(qe(e),n.status||500)}const ya=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function I(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ba(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function ba(n,e,t,r,i,s){const o=ya(e,r,i,s);let a;try{a=await n(t,o)}catch(l){throw console.error(l),new _r(qe(l),0)}if(a.ok||await hn(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await hn(l)}}function Pe(n){var e;let t=null;ka(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=sa(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function dn(n){const e=Pe(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Te(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function wa(n){return{data:n,error:null}}function Ea(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=va(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Ta(n){return n}function ka(n){return n.access_token&&n.refresh_token&&n.expires_in}var Oa=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Sa{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=oi(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await I(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(S(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await I(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Te})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Oa(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await I(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ea,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(S(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await I(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Te})}catch(t){if(S(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await I(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ta});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=v}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(S(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await I(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Te})}catch(t){if(S(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await I(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Te})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await I(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Te})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await I(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(S(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await I(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(S(t))return{data:null,error:t};throw t}}}const li="0.0.0",Aa="http://localhost:9999",Da="supabase.auth.token",Ia={"X-Client-Info":`gotrue-js/${li}`},fn=10,Ra={getItem:n=>gt()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{gt()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{gt()&&globalThis.localStorage.removeItem(n)}};function gn(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Ca(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const He={debug:!!(globalThis&&gt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ci extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pa extends ci{}async function $a(n,e,t){He.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),He.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){He.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{He.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw He.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Pa(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(He.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}Ca();const La={url:Aa,storageKey:Da,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ia,flowType:"implicit",debug:!1},lt=30*1e3,mn=3;async function pn(n,e,t){return await t()}class yt{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yt.nextInstanceID,yt.nextInstanceID+=1,this.instanceID>0&&ue()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},La),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Sa({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=oi(i.fetch),this.lock=i.lock||pn,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,i.lock?this.lock=i.lock:ue()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=$a:this.lock=pn,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:gt()?this.storage=Ra:(this.memoryStorage={},this.storage=gn(this.memoryStorage)):(this.memoryStorage={},this.storage=gn(this.memoryStorage)),ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${li}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=ue()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return S(e)?{error:e}:{error:new ai("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,r,i;try{await this._removeSession();let s;if("email"in e){const{email:c,password:h,options:d}=e;let f=null,g=null;if(this.flowType==="pkce"){const v=Be();await Re(this.storage,`${this.storageKey}-code-verifier`,v),f=await Ge(v),g=v===f?"plain":"s256"}s=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},xform:Pe})}else if("phone"in e){const{phone:c,password:h,options:d}=e;s=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Pe})}else throw new At("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(S(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:dn})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:dn})}else throw new At("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ir}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(S(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await St(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/"),{data:s,error:o}=await I(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Pe});return await nr(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ir}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Pe}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ir}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(S(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let u=null,c=null;if(this.flowType==="pkce"){const d=Be();await Re(this.storage,`${this.storageKey}-code-verifier`,d),u=await Ge(d),c=d===u?"plain":"s256"}const{error:h}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new At("You must provide either an email or phone number.")}catch(a){if(S(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await I(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Pe});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(S(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{await this._removeSession();let s=null,o=null;if(this.flowType==="pkce"){const a=Be();await Re(this.storage,`${this.storageKey}-code-verifier`,a),s=await Ge(a),o=a===s?"plain":"s256"}return await I(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:wa})}catch(s){if(S(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ze;const{error:i}=await I(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(S(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await I(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await I(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new At("You must provide either an email or phone number and a type")}catch(t){if(S(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await St(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r)return{data:{session:e},error:null};const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Te}):await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Te})})}catch(t){if(S(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ze;const o=i.session;let a=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const h=Be();await Re(this.storage,`${this.storageKey}-code-verifier`,h),a=await Ge(h),l=h===a?"plain":"s256"}const{data:u,error:c}=await I(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Te});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return cn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ze;const t=Date.now()/1e3;let r=t,i=!0,s=null;const o=cn(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(S(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ze;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(S(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!ue())throw new Dt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Dt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new un("Not a valid PKCE flow url.");const t=rr(window.location.href);if(e){if(!t.code)throw new un("No code detected.");const{data:m,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:m.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Dt(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!s||!a||!o||!u)throw new Dt("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let d=c+h;l&&(d=parseInt(l));const f=d-c;f*1e3<=lt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=d-h;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",g,d,c);const{data:v,error:_}=await this._getUser(s);if(_)throw _;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(t){if(S(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=rr(window.location.href);return!!(ue()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=rr(window.location.href),t=await St(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(ma(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await nr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=oa(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){const s=Be();await Re(this.storage,`${this.storageKey}-code-verifier`,`${s}/PASSWORD_RECOVERY`),r=await Ge(s),i=s===r?"plain":"s256"}try{return await I(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(S(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(S(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:h,error:d}=s;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await I(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return ue()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(S(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await I(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(S(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await ua(async i=>(await ca(i*200),this._debug(t,"refreshing attempt",i),await I(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pe})),(i,s,o)=>o&&o.error&&sr(o.error)&&Date.now()+(i+1)*200-r<lt)}catch(r){if(this._debug(t,"error",r),S(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ue()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await St(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+fn;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${fn}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),sr(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ze;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Qt;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new ze;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),S(s)){const o={session:null,error:s};return sr(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await Re(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await nr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ue()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/lt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${lt}ms, refresh threshold is ${mn} ticks`),i<=mn&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ci)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ue()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const s=Be();await Re(this.storage,`${this.storageKey}-code-verifier`,s);const o=await Ge(s),a=s===o?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",o,"method",a);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await I(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(S(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:l}=await I(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((i=a==null?void 0:a.totp)===null||i===void 0)&&i.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(S(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(S(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(S(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}yt.nextInstanceID=0;class xa extends yt{constructor(e){super(e)}}var ja=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class Na{constructor(e,t,r){var i,s,o,a,l,u,c,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=na(e);this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g={db:Zo,realtime:Qo,auth:Object.assign(Object.assign({},Yo),{storageKey:f}),global:Ko},v=ia(r??{},g);this.storageKey=(s=(i=v.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=v.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=v.auth)!==null&&l!==void 0?l:{},this.headers,(u=v.global)===null||u===void 0?void 0:u.fetch),this.fetch=ra(t,this._getAccessToken.bind(this),(c=v.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new Cr(`${d}/rest/v1`,{headers:this.headers,schema:(h=v.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new lo(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new qo(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ja(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,debug:a},l,u){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xa({url:this.authUrl,headers:Object.assign(Object.assign({},c),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,debug:a,fetch:u})}_initRealtimeClient(e){return new $o(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ua=(n,e,t)=>new Na(n,e,t),Ma="https://lwpcpixtrbcdhvktfvas.supabase.co",Fa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx3cGNwaXh0cmJjZGh2a3RmdmFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTY2NTk5NTYsImV4cCI6MjAzMjIzNTk1Nn0.MY2A7T7t9DjfJhRNADoLukGlOfOsXvX3TryKOxI8XDI",Ba=Ua(Ma,Fa),Ga=async(n,e)=>{if(e.detail.info.trigger=="droppedIntoZone"){let t=e.detail.info.id,r=n;const i=await Ba.from("entries").insert([{artist_id:t,gen:r}],{returning:"minimal"}).select();if(i.error)throw console.log(i.error),new Error("insert failed");return!0}};function vn(n,e,t){const r=n.slice();return r[10]=e[t],r}function _n(n,e,t){const r=n.slice();r[13]=e[t],r[17]=t;const i=r[17];r[14]=i;const s=r[10].items.length;return r[15]=s,r}function yn(n){let e,t,r=n[13].name+"",i,s;return{c(){e=A("div"),t=A("span"),i=$e(r),this.h()},l(o){e=D(o,"DIV",{class:!0});var a=ee(e);t=D(a,"SPAN",{class:!0});var l=ee(t);i=Le(l,r),l.forEach(E),a.forEach(E),this.h()},h(){y(t,"class","svelte-ca8258"),y(e,"class","custom-shadow-item svelte-ca8258")},m(o,a){z(o,e,a),O(e,t),O(t,i)},p(o,a){a&1&&r!==(r=o[13].name+"")&&ht(i,r)},i(o){o&&(s||xn(()=>{s=Ti(e,Fi,{duration:200,easing:Mi}),s.start()}))},o:le,d(o){o&&E(e)}}}function bn(n,e){let t,r,i,s,o,a=le,l,u,c=e[13][nt]&&yn(e);return{key:n,first:null,c(){t=A("div"),r=A("div"),c&&c.c(),i=ye(),this.h()},l(h){t=D(h,"DIV",{class:!0,style:!0});var d=ee(t);r=D(d,"DIV",{class:!0,style:!0});var f=ee(r);c&&c.l(f),f.forEach(E),i=be(d),d.forEach(E),this.h()},h(){y(r,"class","card svelte-ca8258"),ut(r,"background-image","url("+Pi+"/assets/image.jpg)"),y(t,"class",s="card-container count-"+e[17]+" svelte-ca8258"),ut(t,"--count",e[15]-e[17]),this.first=t},m(h,d){z(h,t,d),O(t,r),c&&c.m(r,null),O(t,i),l||(u=[Pt(r,"click",or),Pt(t,"click",function(){br(or(e[13]))&&or(e[13]).apply(this,arguments)})],l=!0)},p(h,d){e=h,e[13][nt]?c?(c.p(e,d),d&1&&U(c,1)):(c=yn(e),c.c(),U(c,1),c.m(r,null)):c&&(c.d(1),c=null),d&1&&s!==(s="card-container count-"+e[17]+" svelte-ca8258")&&y(t,"class",s),d&1&&ut(t,"--count",e[15]-e[17])},r(){o=t.getBoundingClientRect()},f(){Li(t),a()},a(){a(),a=$i(t,o,Hi,{duration:yr})},d(h){h&&E(t),c&&c.d(),l=!1,Ln(u)}}}function wn(n){let e,t,r=n[10].name+"",i;return{c(){e=A("div"),t=A("p"),i=$e(r),this.h()},l(s){e=D(s,"DIV",{class:!0});var o=ee(e);t=D(o,"P",{class:!0});var a=ee(t);i=Le(a,r),a.forEach(E),o.forEach(E),this.h()},h(){y(t,"class","svelte-ca8258"),y(e,"class","column-title svelte-ca8258")},m(s,o){z(s,e,o),O(e,t),O(t,i)},p(s,o){o&1&&r!==(r=s[10].name+"")&&ht(i,r)},d(s){s&&E(e)}}}function En(n){let e,t="Which Generation?";return{c(){e=A("p"),e.textContent=t,this.h()},l(r){e=D(r,"P",{class:!0,"data-svelte-h":!0}),gi(e)!=="svelte-70121c"&&(e.textContent=t),this.h()},h(){y(e,"class","which svelte-ca8258")},m(r,i){z(r,e,i)},d(r){r&&E(e)}}}function Tn(n,e){let t,r,i=[],s=new Map,o,a,l,u,c,h,d,f=_e(e[10].items);const g=p=>p[13].id;for(let p=0;p<f.length;p+=1){let b=_n(e,f,p),k=g(b);s.set(k,i[p]=bn(k,b))}function v(...p){return e[6](e[10],...p)}function _(...p){return e[7](e[10],...p)}let w=e[10].id>0&&wn(e),m=e[10].id==0&&En();return{key:n,first:null,c(){t=A("div"),r=A("div");for(let p=0;p<i.length;p+=1)i[p].c();a=ye(),w&&w.c(),l=ye(),m&&m.c(),u=ye(),this.h()},l(p){t=D(p,"DIV",{class:!0});var b=ee(t);r=D(b,"DIV",{class:!0});var k=ee(r);for(let F=0;F<i.length;F+=1)i[F].l(k);k.forEach(E),a=be(b),w&&w.l(b),l=be(b),m&&m.l(b),u=be(b),b.forEach(E),this.h()},h(){y(r,"class","column-content svelte-ca8258"),y(t,"class",c="column column-"+e[10].id+" "+(e[10].id==0?"column-artists":"column-gen")+" svelte-ca8258"),this.first=t},m(p,b){z(p,t,b),O(t,r);for(let k=0;k<i.length;k+=1)i[k]&&i[k].m(r,null);O(t,a),w&&w.m(t,null),O(t,l),m&&m.m(t,null),O(t,u),h||(d=[fi(o=to.call(null,r,{centreDraggedOnCursor:!0,items:e[10].items,flipDurationMs:yr,morphDisabled:!0,transformDraggedElement:kn,dropTargetStyle:e[3]})),Pt(r,"consider",v),Pt(r,"finalize",_)],h=!0)},p(p,b){if(e=p,b&1){f=_e(e[10].items);for(let k=0;k<i.length;k+=1)i[k].r();i=wr(i,b,g,1,e,f,s,r,Si,bn,null,_n);for(let k=0;k<i.length;k+=1)i[k].a()}o&&br(o.update)&&b&1&&o.update.call(null,{centreDraggedOnCursor:!0,items:e[10].items,flipDurationMs:yr,morphDisabled:!0,transformDraggedElement:kn,dropTargetStyle:e[3]}),e[10].id>0?w?w.p(e,b):(w=wn(e),w.c(),w.m(t,l)):w&&(w.d(1),w=null),e[10].id==0?m||(m=En(),m.c(),m.m(t,u)):m&&(m.d(1),m=null),b&1&&c!==(c="column column-"+e[10].id+" "+(e[10].id==0?"column-artists":"column-gen")+" svelte-ca8258")&&y(t,"class",c)},d(p){p&&E(t);for(let b=0;b<i.length;b+=1)i[b].d();w&&w.d(),m&&m.d(),h=!1,Ln(d)}}}function za(n){let e,t,r=n[0][0].items[0].name+"",i,s,o,a,l=n[0][0].items[0]["debut year"]+"",u,c,h=n[0][0].items[0]["debut song"]+"",d,f,g=[],v=new Map,_=_e(n[0]);const w=m=>m[10].id;for(let m=0;m<_.length;m+=1){let p=vn(n,_,m),b=w(p);v.set(b,g[m]=Tn(b,p))}return{c(){e=A("section"),t=A("p"),i=$e(r),s=ye(),o=A("p"),a=$e("Debuted in "),u=$e(l),c=$e(" with YG and their most-streamed song is "),d=$e(h),f=ye();for(let m=0;m<g.length;m+=1)g[m].c();this.h()},l(m){e=D(m,"SECTION",{class:!0,style:!0});var p=ee(e);t=D(p,"P",{});var b=ee(t);i=Le(b,r),b.forEach(E),s=be(p),o=D(p,"P",{});var k=ee(o);a=Le(k,"Debuted in "),u=Le(k,l),c=Le(k," with YG and their most-streamed song is "),d=Le(k,h),k.forEach(E),f=be(p);for(let F=0;F<g.length;F+=1)g[F].l(p);p.forEach(E),this.h()},h(){y(e,"class","board svelte-ca8258"),ut(e,"height",n[2].height+"px"),Ct(e,"experienceStarted",n[1])},m(m,p){z(m,e,p),O(e,t),O(t,i),O(e,s),O(e,o),O(o,a),O(o,u),O(o,c),O(o,d),O(e,f);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(e,null)},p(m,[p]){p&1&&r!==(r=m[0][0].items[0].name+"")&&ht(i,r),p&1&&l!==(l=m[0][0].items[0]["debut year"]+"")&&ht(u,l),p&1&&h!==(h=m[0][0].items[0]["debut song"]+"")&&ht(d,h),p&57&&(_=_e(m[0]),g=wr(g,p,w,1,m,_,v,e,Oi,Tn,null,vn)),p&4&&ut(e,"height",m[2].height+"px"),p&2&&Ct(e,"experienceStarted",m[1])},i:le,o:le,d(m){m&&E(e);for(let p=0;p<g.length;p+=1)g[p].d()}}}const yr=200;async function or(n){}function kn(n,e,t){}function Ha(n,e,t){let r;di(n,Di,h=>t(2,r=h));let{columnItems:i}=e,{experienceStarted:s}=e,o={outline:"red solid 2px"};function a(h,d){const f=i.findIndex(g=>g.id===h);t(0,i[f].items=d.detail.items,i),t(0,i=[...i])}async function l(h,d){const f=i.findIndex(g=>g.id===h);t(0,i[f].items=d.detail.items,i),t(0,i=[...i]),await Ga(h,d)}const u=(h,d)=>a(h.id,d),c=(h,d)=>l(h.id,d);return n.$$set=h=>{"columnItems"in h&&t(0,i=h.columnItems),"experienceStarted"in h&&t(1,s=h.experienceStarted)},[i,s,r,o,a,l,u,c]}class Va extends Bt{constructor(e){super(),Gt(this,e,Ha,za,Ft,{columnItems:0,experienceStarted:1})}}function On(n,e,t){const r=n.slice();r[11]=e[t].type,r[12]=e[t].value,r[13]=e[t].component,r[16]=t;const i=r[16]==r[2];return r[14]=i,r}function Sn(n,e,t){const r=n.slice();return r[17]=e[t],r}function An(n){let e,t,r,i,s=n[4].indexOf(n[2])==-1,o;function a(c){n[8](c)}let l={duration:"0",$$slots:{default:[Ka]},$$scope:{ctx:n}};n[2]!==void 0&&(l.current=n[2]),t=new Ii({props:l}),n[7](t),jn.push(()=>ki(t,"current",a));let u=s&&Cn(n);return{c(){e=A("article"),Ze(t.$$.fragment),i=ye(),u&&u.c(),this.h()},l(c){e=D(c,"ARTICLE",{class:!0});var h=ee(e);Ye(t.$$.fragment,h),i=be(h),u&&u.l(h),h.forEach(E),this.h()},h(){y(e,"class","svelte-m8gftx")},m(c,h){z(c,e,h),Qe(t,e,null),O(e,i),u&&u.m(e,null),o=!0},p(c,h){const d={};h&1048581&&(d.$$scope={dirty:h,ctx:c}),!r&&h&4&&(r=!0,d.current=c[2],pi(()=>r=!1)),t.$set(d),h&4&&(s=c[4].indexOf(c[2])==-1),s?u?(u.p(c,h),h&4&&U(u,1)):(u=Cn(c),u.c(),U(u,1),u.m(e,null)):u&&(zt(),te(u,1,1,()=>{u=null}),Ht())},i(c){o||(U(t.$$.fragment,c),U(u),o=!0)},o(c){te(t.$$.fragment,c),te(u),o=!1},d(c){c&&E(e),n[7](null),Xe(t),u&&u.d()}}}function qa(n){let e,t;return e=new Va({props:{experienceStarted:n[0],columnItems:n[5]}}),{c(){Ze(e.$$.fragment)},l(r){Ye(e.$$.fragment,r)},m(r,i){Qe(e,r,i),t=!0},p(r,i){const s={};i&1&&(s.experienceStarted=r[0]),e.$set(s)},i(r){t||(U(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Xe(e,r)}}}function Wa(n){let e,t=_e(n[12]),r=[];for(let i=0;i<t.length;i+=1)r[i]=In(Sn(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Z()},l(i){for(let s=0;s<r.length;s+=1)r[s].l(i);e=Z()},m(i,s){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(i,s);z(i,e,s)},p(i,s){if(s&4){t=_e(i[12]);let o;for(o=0;o<t.length;o+=1){const a=Sn(i,t,o);r[o]?r[o].p(a,s):(r[o]=In(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},i:le,o:le,d(i){i&&E(e),$n(r,i)}}}function Dn(n){let e,t,r=n[17].value+"",i,s;return{c(){e=A("p"),t=new vi(!1),this.h()},l(o){e=D(o,"P",{class:!0});var a=ee(e);t=_i(a,!1),a.forEach(E),this.h()},h(){t.a=null,y(e,"class","text svelte-m8gftx"),Ct(e,"isActive",n[14])},m(o,a){z(o,e,a),t.m(r,e),s=!0},p(o,a){(!s||a&4)&&Ct(e,"isActive",o[14])},i(o){s||(o&&xn(()=>{s&&(i||(i=Ur(e,Br,{y:20,duration:500},!0)),i.run(1))}),s=!0)},o(o){o&&(i||(i=Ur(e,Br,{y:20,duration:500},!1)),i.run(0)),s=!1},d(o){o&&E(e),o&&i&&i.end()}}}function In(n){let e,t=n[14]&&Dn(n);return{c(){t&&t.c(),e=Z()},l(r){t&&t.l(r),e=Z()},m(r,i){t&&t.m(r,i),z(r,e,i)},p(r,i){r[14]?t?(t.p(r,i),i&4&&U(t,1)):(t=Dn(r),t.c(),U(t,1),t.m(e.parentNode,e)):t&&(zt(),te(t,1,1,()=>{t=null}),Ht())},d(r){r&&E(e),t&&t.d(r)}}}function Ja(n){let e,t,r,i;const s=[Wa,qa],o=[];function a(l,u){return l[11]==="section"?0:l[11]=="voting"?1:-1}return~(e=a(n))&&(t=o[e]=s[e](n)),{c(){t&&t.c(),r=Z()},l(l){t&&t.l(l),r=Z()},m(l,u){~e&&o[e].m(l,u),z(l,r,u),i=!0},p(l,u){t&&t.p(l,u)},i(l){i||(U(t),i=!0)},o(l){te(t),i=!1},d(l){l&&E(r),~e&&o[e].d(l)}}}function Rn(n,e){let t,r,i,s;return r=new Ci({props:{index:e[16],$$slots:{default:[Ja]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=Z(),Ze(r.$$.fragment),i=ye(),this.h()},l(o){t=Z(),Ye(r.$$.fragment,o),i=be(o),this.h()},h(){this.first=t},m(o,a){z(o,t,a),Qe(r,o,a),z(o,i,a),s=!0},p(o,a){e=o;const l={};a&1048581&&(l.$$scope={dirty:a,ctx:e}),r.$set(l)},i(o){s||(U(r.$$.fragment,o),s=!0)},o(o){te(r.$$.fragment,o),s=!1},d(o){o&&(E(t),E(i)),Xe(r,o)}}}function Ka(n){let e=[],t=new Map,r,i,s=_e(mt.body.index||[]);const o=a=>a[16];for(let a=0;a<s.length;a+=1){let l=On(n,s,a),u=o(l);t.set(u,e[a]=Rn(u,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=Z()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);r=Z()},m(a,l){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(a,l);z(a,r,l),i=!0},p(a,l){l&37&&(s=_e(mt.body.index||[]),zt(),e=wr(e,l,o,1,a,s,t,r.parentNode,Ai,Rn,r,On),Ht())},i(a){if(!i){for(let l=0;l<s.length;l+=1)U(e[l]);i=!0}},o(a){for(let l=0;l<e.length;l+=1)te(e[l]);i=!1},d(a){a&&E(r);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Cn(n){let e,t;return e=new Ri({props:{debug:!1,full:!0,directions:n[2]===0?["right"]:["left","right"],size:n[2]===0?"100%":["33%","67%"],enableKeyboard:!0,marginTop:0,showArrows:!0}}),e.$on("tap",n[6]),{c(){Ze(e.$$.fragment)},l(r){Ye(e.$$.fragment,r)},m(r,i){Qe(e,r,i),t=!0},p(r,i){const s={};i&4&&(s.directions=r[2]===0?["right"]:["left","right"]),i&4&&(s.size=r[2]===0?"100%":["33%","67%"]),e.$set(s)},i(r){t||(U(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Xe(e,r)}}}function Za(n){let e,t,r=n[3]&&An(n);return{c(){r&&r.c(),e=Z()},l(i){r&&r.l(i),e=Z()},m(i,s){r&&r.m(i,s),z(i,e,s),t=!0},p(i,[s]){i[3]?r?(r.p(i,s),s&8&&U(r,1)):(r=An(i),r.c(),U(r,1),r.m(e.parentNode,e)):r&&(zt(),te(r,1,1,()=>{r=null}),Ht())},i(i){t||(U(r),t=!0)},o(i){te(r),t=!1},d(i){i&&E(e),r&&r.d(i)}}}function Ya(n,e,t){let r,i=0,s=[2],o=[{id:0,name:"artists",items:Bi},{id:1,name:"1st",items:[]},{id:2,name:"2nd",items:[]},{id:3,name:"3rd",items:[]},{id:4,name:"4th",items:[]},{id:5,name:"5th",items:[]},{id:6,name:"I don't know",items:[]}],a=!1,l=!1;const u=({detail:d})=>{d==="right"?r.next():r.prev(),window.scrollTo(0,0)};mi(async()=>{t(3,l=!0),console.log(mt)});function c(d){jn[d?"unshift":"push"](()=>{r=d,t(1,r)})}function h(d){i=d,t(2,i)}return n.$$.update=()=>{n.$$.dirty&1&&console.log(a)},[a,r,i,l,s,o,u,c,h]}class Qa extends Bt{constructor(e){super(),Gt(this,e,Ya,Za,Ft,{})}}function Xa(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.17.0"),console.log("build: 2024-06-17-19:06"),console.log("--- --- --- --- --- ---")}function el(n){let e,t,r,i;return e=new Ui({props:{title:n[1],description:n[2],url:n[3],preloadFont:n[0],keywords:n[4]}}),r=new Qa({}),{c(){Ze(e.$$.fragment),t=ye(),Ze(r.$$.fragment)},l(s){Ye(e.$$.fragment,s),t=be(s),Ye(r.$$.fragment,s)},m(s,o){Qe(e,s,o),z(s,t,o),Qe(r,s,o),i=!0},p:le,i(s){i||(U(e.$$.fragment,s),U(r.$$.fragment,s),i=!0)},o(s){te(e.$$.fragment,s),te(r.$$.fragment,s),i=!1},d(s){s&&E(t),Xe(e,s),Xe(r,s)}}}function tl(n,e,t){let{data:r}=e;Xa();const i=[],{title:s,description:o,url:a,keywords:l}=mt;return Nr("copy",mt),Nr("data",r.data),n.$$set=u=>{"data"in u&&t(5,r=u.data)},[i,s,o,a,l,r]}class ll extends Bt{constructor(e){super(),Gt(this,e,tl,el,Ft,{data:5})}}export{ll as component};
