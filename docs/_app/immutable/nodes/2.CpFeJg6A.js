function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../chunks/browser.C_3xDvYS.js","../chunks/viewport.D9o6eLJg.js","../chunks/scheduler.COKmWNtP.js","../chunks/index.BJPD6ETK.js","../chunks/index.DSRq0rwD.js","../chunks/each.C8jWpFHs.js","../assets/viewport.C1i3-f7Y.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{n as ee,O as Dn,s as Nt,e as A,k as K,_ as gi,c as D,d as w,p,f as I,D as In,i as V,ac as $r,L as vr,a as fe,q as ir,E as Dt,h as mi,j as qe,l as We,$ as pi,a0 as It,r as Rn,t as Cn,b as Pn,g as $n,M as Ln,o as vi,u as xn,F as yi,H as _i,G as bi,a3 as Lr}from"../chunks/scheduler.COKmWNtP.js";import{n as wi,l as Ei,h as Ti,j as ki,S as Ut,i as Mt,a as U,k as Oi,g as Ft,t as te,c as Bt,f as Si,b as Je,d as Ke,m as Ze,e as Ye,o as xr}from"../chunks/index.BJPD6ETK.js";import{e as ye,u as yr,f as jn,o as Ai}from"../chunks/each.C8jWpFHs.js";import{v as Di,S as Ii,T as Ri,a as Ci}from"../chunks/viewport.D9o6eLJg.js";import{b as Pi}from"../chunks/paths.o7rawmQA.js";import{_ as Qe}from"../chunks/preload-helper.BQ24v_F8.js";function Nn(n,e,t,r){if(!e)return ee;const i=n.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return ee;const{delay:s=0,duration:o=300,easing:a=Dn,start:l=wi()+s,end:c=l+o,tick:u=ee,css:h}=t(n,{from:e,to:i},r);let d=!0,f=!1,g;function m(){h&&(g=Ti(n,0,1,o,s,a,h)),s||(f=!0)}function v(){h&&ki(n,g),d=!1}return Ei(E=>{if(!f&&E>=l&&(f=!0),f&&E>=c&&(u(1,0),v()),!d)return!1;if(f){const y=E-l,b=0+1*a(y/o);u(b,1-b)}return!0}),m(),u(0,1),v}function Un(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:r}=e,i=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=r,$i(n,i)}}function $i(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const r=getComputedStyle(n),i=r.transform==="none"?"":r.transform;n.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function jr(n,e,t){const r=n.slice();return r[5]=e[t],r}function Nr(n){let e,t;return{c(){e=A("link"),this.h()},l(r){e=D(r,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){p(e,"rel","preload"),p(e,"href",t=n[5]),p(e,"as","font"),p(e,"type","font/woff2"),p(e,"crossorigin","")},m(r,i){V(r,e,i)},p(r,i){i&16&&t!==(t=r[5])&&p(e,"href",t)},d(r){r&&w(e)}}}function Li(n){let e,t,r,i,s,o,a,l,c,u,h,d,f,g,m,v,E,y,b,_,k,Z,re,Y,ge,ne;document.title=e=n[0];let ie=ye(n[4]),C=[];for(let R=0;R<ie.length;R+=1)C[R]=Nr(jr(n,ie,R));return{c(){t=A("meta"),r=A("meta"),i=A("meta"),s=A("meta"),o=A("meta"),a=A("meta"),l=A("meta"),c=A("meta"),u=A("meta"),h=A("meta"),f=A("meta"),g=A("meta"),m=A("meta"),v=A("meta"),E=A("meta"),y=A("meta"),b=A("meta"),_=A("meta"),k=A("meta"),re=A("meta"),Y=A("link");for(let R=0;R<C.length;R+=1)C[R].c();ne=K(),this.h()},l(R){const T=gi("svelte-1htu80s",document.head);t=D(T,"META",{name:!0,content:!0}),r=D(T,"META",{name:!0,content:!0}),i=D(T,"META",{name:!0,content:!0}),s=D(T,"META",{property:!0,content:!0}),o=D(T,"META",{property:!0,content:!0}),a=D(T,"META",{property:!0,content:!0}),l=D(T,"META",{property:!0,content:!0}),c=D(T,"META",{property:!0,content:!0}),u=D(T,"META",{property:!0,content:!0}),h=D(T,"META",{property:!0,content:!0}),f=D(T,"META",{property:!0,content:!0}),g=D(T,"META",{property:!0,content:!0}),m=D(T,"META",{property:!0,content:!0}),v=D(T,"META",{name:!0,content:!0}),E=D(T,"META",{name:!0,content:!0}),y=D(T,"META",{name:!0,content:!0}),b=D(T,"META",{name:!0,content:!0}),_=D(T,"META",{name:!0,content:!0}),k=D(T,"META",{name:!0,content:!0}),re=D(T,"META",{name:!0,content:!0}),Y=D(T,"LINK",{rel:!0,href:!0});for(let $=0;$<C.length;$+=1)C[$].l(T);ne=K(),T.forEach(w),this.h()},h(){p(t,"name","description"),p(t,"content",n[1]),p(r,"name","author"),p(r,"content","The Pudding"),p(i,"name","news_keywords"),p(i,"content",n[3]),p(s,"property","og:title"),p(s,"content",n[0]),p(o,"property","og:site_name"),p(o,"content","The Pudding"),p(a,"property","og:url"),p(a,"content",n[2]),p(l,"property","og:description"),p(l,"content",n[1]),p(c,"property","og:type"),p(c,"content","article"),p(u,"property","og:locale"),p(u,"content","en_US"),p(h,"property","og:image"),p(h,"content",d=n[2]+"/assets/social-facebook.jpg"),p(f,"property","og:image:type"),p(f,"content","image/jpeg"),p(g,"property","og:image:width"),p(g,"content","1200"),p(m,"property","og:image:height"),p(m,"content","600"),p(v,"name","twitter:card"),p(v,"content","summary_large_image"),p(E,"name","twitter:site"),p(E,"content","https://pudding.cool"),p(y,"name","twitter:creator"),p(y,"content","@puddingviz"),p(b,"name","twitter:title"),p(b,"content",n[0]),p(_,"name","twitter:description"),p(_,"content",n[1]),p(k,"name","twitter:image:src"),p(k,"content",Z=n[2]+"/assets/social-twitter.jpg"),p(re,"name","robots"),p(re,"content","max-image-preview:large"),p(Y,"rel","canonical"),p(Y,"href",ge=n[2]+"/")},m(R,T){I(document.head,t),I(document.head,r),I(document.head,i),I(document.head,s),I(document.head,o),I(document.head,a),I(document.head,l),I(document.head,c),I(document.head,u),I(document.head,h),I(document.head,f),I(document.head,g),I(document.head,m),I(document.head,v),I(document.head,E),I(document.head,y),I(document.head,b),I(document.head,_),I(document.head,k),I(document.head,re),I(document.head,Y);for(let $=0;$<C.length;$+=1)C[$]&&C[$].m(document.head,null);I(document.head,ne)},p(R,[T]){if(T&1&&e!==(e=R[0])&&(document.title=e),T&2&&p(t,"content",R[1]),T&8&&p(i,"content",R[3]),T&1&&p(s,"content",R[0]),T&4&&p(a,"content",R[2]),T&2&&p(l,"content",R[1]),T&4&&d!==(d=R[2]+"/assets/social-facebook.jpg")&&p(h,"content",d),T&1&&p(b,"content",R[0]),T&2&&p(_,"content",R[1]),T&4&&Z!==(Z=R[2]+"/assets/social-twitter.jpg")&&p(k,"content",Z),T&4&&ge!==(ge=R[2]+"/")&&p(Y,"href",ge),T&16){ie=ye(R[4]);let $;for($=0;$<ie.length;$+=1){const Oe=jr(R,ie,$);C[$]?C[$].p(Oe,T):(C[$]=Nr(Oe),C[$].c(),C[$].m(ne.parentNode,ne))}for(;$<C.length;$+=1)C[$].d(1);C.length=ie.length}},i:ee,o:ee,d(R){w(t),w(r),w(i),w(s),w(o),w(a),w(l),w(c),w(u),w(h),w(f),w(g),w(m),w(v),w(E),w(y),w(b),w(_),w(k),w(re),w(Y),In(C,R),w(ne)}}}function xi(n,e,t){let{title:r="Title TK"}=e,{description:i="Description TK"}=e,{url:s="https://pudding.cool"}=e,{keywords:o=""}=e,{preloadFont:a=[]}=e;return n.$$set=l=>{"title"in l&&t(0,r=l.title),"description"in l&&t(1,i=l.description),"url"in l&&t(2,s=l.url),"keywords"in l&&t(3,o=l.keywords),"preloadFont"in l&&t(4,a=l.preloadFont)},[r,i,s,o,a]}class ji extends Ut{constructor(e){super(),Mt(this,e,xi,Li,Nt,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function Ni(n){return n*n*n}function Mn(n){const e=n-1;return e*e*e+1}function Ui(n,{delay:e=0,duration:t=400,easing:r=Dn}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:s=>`opacity: ${s*i}`}}function Ur(n,{delay:e=0,duration:t=400,easing:r=Mn,x:i=0,y:s=0,opacity:o=0}={}){const a=getComputedStyle(n),l=+a.opacity,c=a.transform==="none"?"":a.transform,u=l*(1-o),[h,d]=$r(i),[f,g]=$r(s);return{delay:e,duration:t,easing:r,css:(m,v)=>`
			transform: ${c} translate(${(1-m)*h}${d}, ${(1-m)*f}${g});
			opacity: ${l-u*v}`}}const Mi=[{name:"Seo Taiji & Kids (서태지와 아이들)",id:"1","debut year":"1992","debut song":"I Know (난 알아요)","debut song link":"https://www.youtube.com/watch?v=OEDHEzs5kyk","highest mv views":"Come Back Home","highest mv link":"https://youtu.be/q3xy4p2JTfU?si=ykWzTIrIAda-Ttn5",image:"NEED TO FIND","":""},{name:"H.O.T",id:"2","debut year":"1996","debut song":"Age of Violence (전사의 후예)","debut song link":"https://www.youtube.com/watch?v=7ggXa28ADLE","highest mv views":"Candy","highest mv link":"https://youtu.be/3NUaXU1d-NY?si=guXk0ojaXtw4DSKl",image:"ntf","":"REMOVE"},{name:"S.E.S.",id:"3","debut year":"1997","debut song":"('Cause) I'm Your Girl","debut song link":"https://www.youtube.com/watch?v=fBge8oUfFwU","highest mv views":"Dreams Come True","highest mv link":"https://youtu.be/8uiR4SrDGZk?si=1KPA6DJk7Y7VQR0d",image:"small","":"FIND OR REMOVE"},{name:"TVXQ! (동방신기)",id:"4","debut year":"2003","debut song":"Hug","debut song link":"https://www.youtube.com/watch?v=xQ635vE2RQI","highest mv views":"Mirotic (주문)","highest mv link":"https://youtu.be/HtJS32n6LNQ?si=Wrycm3J7W8dCvKhS",image:"DISCUSS","":""},{name:"Super Junior",id:"5","debut year":"2005","debut song":"Twins (Knock Out)","debut song link":"https://www.youtube.com/watch?v=SrazFGFRnhM","highest mv views":"Mr. Simple","highest mv link":"https://youtu.be/r6TwzSGYycM?si=5pJQL-PKNHicXXQD",image:"","":"REMOVE"},{name:"BIGBANG",id:"6","debut year":"2006","debut song":"LA-LA-LA","debut song link":"https://www.youtube.com/watch?v=rc-cHSzK5-U","highest mv views":"BANG BANG BANG","highest mv link":"https://youtu.be/2ips2mM7Zqw?si=-QTJrxsJdsaeZXyi",image:"NEED TO FIND","":""},{name:"Girls' Generation (소녀시대)",id:"7","debut year":"2007","debut song":"Into The New World (다시 만난 세계)","debut song link":"https://www.youtube.com/watch?v=0k2Zzkw_-0I&list=RD0k2Zzkw_-0I&start_radio=1","highest mv views":"Gee","highest mv link":"https://youtu.be/U7mPqycQ0tQ?si=-yR2pROXaf8CTGZI",image:"","":""},{name:"Wonder Girls",id:"8","debut year":"2007","debut song":"Irony","debut song link":"https://www.youtube.com/watch?v=uxFxoLxmcdg","highest mv views":"Nobody","highest mv link":"https://youtu.be/BA7fdSkp8ds?si=CKwWVeS6cKLQjYf1",image:"","":""},{name:"2PM",id:"9","debut year":"2008","debut song":"10 out of 10 (10점 만점에 10점)","debut song link":"https://www.youtube.com/watch?v=YEmRoYV8vMs","highest mv views":"Hands Up","highest mv link":"https://youtu.be/KgrB2KBZws4?si=IbFU-25G968a5O9C",image:"","":""},{name:"SHINee",id:"10","debut year":"2008","debut song":"Replay (누난 너무 예뻐)","debut song link":"https://www.youtube.com/watch?v=VTASffPQGhY","highest mv views":"Ring Ding Dong","highest mv link":"https://www.youtube.com/watch?v=roughtzsCDI",image:"","":""},{name:"2NE1",id:"11","debut year":"2009","debut song":"FIRE","debut song link":"https://www.youtube.com/watch?v=49AfuuRbgGo","highest mv views":"I AM THE BEST (내가 제일 잘 나가)","highest mv link":"https://youtu.be/j7_lSP8Vc3o?si=oXben2BqG_scXRi7",image:"FIND OR CROP SQUARE","":""},{name:"BEAST",id:"12","debut year":"2009","debut song":"BAD GIRL","debut song link":"https://www.youtube.com/watch?v=fA_rXpyF67s","highest mv views":"FICTION","highest mv link":"https://youtu.be/ZAzWT8mRoR0?si=JkI2xh7yrkCY6i96",image:"DISCUSS - 6 member og B2ST or 4 member HIGHLIGHT","":"REMOVE"},{name:"f(x)",id:"13","debut year":"2009","debut song":"LA chA TA","debut song link":"https://www.youtube.com/watch?v=H7MHZpSNJQc","highest mv views":"Electric Shock","highest mv link":"https://youtu.be/n8I8QGFA1oM?si=yciZ5UmZCkxwp-Ay",image:"","":"REMOVE"},{name:"miss A",id:"14","debut year":"2010","debut song":"Bad Girl, Good Girl","debut song link":"https://www.youtube.com/watch?v=8TeeJvcBdLA","highest mv views":"Only You (다른 남자 말고 너)","highest mv link":"https://youtu.be/zO9RzrhYR-I?si=e7EcbKbf3Bm0MhEI",image:"","":"REMOVE"},{name:"SISTAR",id:"15","debut year":"2010","debut song":"Push Push","debut song link":"https://www.youtube.com/watch?v=75y5iN7z-08","highest mv views":"Alone (나혼자)","highest mv link":"https://youtu.be/E0ZHXVp_wUE?feature=shared",image:"","":"REMOVE"},{name:"EXO",id:"16","debut year":"2012","debut song":"Mama","debut song link":"https://www.youtube.com/watch?v=KH6ZwnqZ7Wo","highest mv views":"Love Shot","highest mv link":"https://www.youtube.com/watch?v=pSudEWBAYRE",image:"","":""},{name:"BTS (방탄소년단)",id:"17","debut year":"2013","debut song":"No More Dream","debut song link":"https://www.youtube.com/watch?v=rBG5L7UsUxA","highest mv views":"Dynamite","highest mv link":"https://www.youtube.com/watch?v=gdZLi9oWNZg",image:"","":""},{name:"GOT7",id:"18","debut year":"2014","debut song":"Girls Girls Girls","debut song link":"https://www.youtube.com/watch?v=2sAoKmg7qPI","highest mv views":"Just right","highest mv link":"https://youtu.be/vrdk3IGcau8?feature=shared",image:"","":""},{name:"MAMAMOO",id:"19","debut year":"2014","debut song":"Mr. Ambiguous (Mr.애매모호)","debut song link":"https://www.youtube.com/watch?v=QwjWP2Tnsjk","highest mv views":"HIP","highest mv link":"https://youtu.be/KhTeiaCezwM?feature=shared",image:"","":""},{name:"Red Velvet",id:"20","debut year":"2014","debut song":"Happiness (행복)","debut song link":"https://youtu.be/JFgv8bKfxEs?si=Bg8hr6quDJP9Inug","highest mv views":"Bad Boy","highest mv link":"https://youtu.be/J_CFBjAyPWE?feature=shared",image:"","":""},{name:"WINNER",id:"21","debut year":"2014","debut song":"Empty (공허해)","debut song link":"https://youtu.be/gEqlF5N8UMs?si=9bijM1O3ZHlW2hHl","highest mv views":"REALLY REALLY","highest mv link":"https://youtu.be/4tBnF46ybZk?feature=shared",image:"","":""},{name:"GFRIEND (여자친구)",id:"22","debut year":"2015","debut song":"Glass Bead (유리구슬)","debut song link":"https://youtu.be/GU7icQFVzHo?si=BMHMgRNRXJ21JqNv","highest mv views":"MAGO","highest mv link":"https://youtu.be/LmBYPXGqtss?feature=shared",image:"","":"REMOVE"},{name:"iKON",id:"23","debut year":"2015","debut song":"MY TYPE (취향저격)","debut song link":"https://youtu.be/ZS6vfv4sszg?si=gYgMU0_fU1nY57-Q","highest mv views":"Love Scenario","highest mv link":"https://youtu.be/vecSVX1QYbQ?feature=shared",image:"","":"REMOVE"},{name:"OH MY GIRL",id:"24","debut year":"2015","debut song":"CUPID","debut song link":"https://youtu.be/fCrCUv6rQ7I?si=76PQlXLQx60PzA_8","highest mv views":"Nonstop","highest mv link":"https://www.youtube.com/watch?v=iDjQSdN_ig8",image:"","":"REMOVE"},{name:"SEVENTEEN",id:"25","debut year":"2015","debut song":"Adore U (아낀다)","debut song link":"https://youtu.be/9rUFQJrCT7M?si=C61CfBTQ_dhAj8ZN","highest mv views":"Don't Wanna Cry (울고 싶지 않아)","highest mv link":"https://youtu.be/zEkg4GBQumc?feature=shared",image:"","":""},{name:"TWICE",id:"26","debut year":"2015","debut song":"Like OOH-AHH (OOH-AHH하게)","debut song link":"https://youtu.be/0rtV5esQT6I?si=zv-CbcDtfQjYJX4k","highest mv views":"What is Love?","highest mv link":"https://www.youtube.com/watch?v=2sAoKmg7qPI",image:"","":""},{name:"NCT",id:"27","debut year":"2016","debut song":"The 7th Sense (일곱 번째 감각)","debut song link":"https://youtu.be/3UGMDJ9kZCA?si=UmuCEnMzhDtVSeI4","highest mv views":"Make A Wish (Birthday Song)","highest mv link":"https://youtu.be/tyrVtwE8Gv0?feature=shared",image:"","":""},{name:"I.O.I",id:"28","debut year":"2016","debut song":"Dream Girls","debut song link":"https://youtu.be/8Zu_yO4pNEY?si=JT0XwnUpANJ-EG9c","highest mv views":"Very Very Very (너무 너무 너무)","highest mv link":"https://youtu.be/GdxvD7r58ng?feature=shared",image:"small + low qual","":"REMOVE"},{name:"BLACKPINK",id:"29","debut year":"2016","debut song":"BOOMBAYAH","debut song link":"https://youtu.be/bwmSjveL3Lc?si=mbhaB5WSFjqzQV3W","highest mv views":"DDU-DU DDU-DU (뚜두뚜두) https://www.youtube.com/watch?v=IHNzOHi8sJs","highest mv link":"https://www.youtube.com/watch?v=IHNzOHi8sJs",image:"","":""},{name:"Wanna One",id:"30","debut year":"2017","debut song":"Energetic","debut song link":"https://youtu.be/EVaV7AwqBWg?si=a_nadrDDFLqZVa1G","highest mv views":"Energetic","highest mv link":"https://youtu.be/EVaV7AwqBWg?si=a_nadrDDFLqZVa1G",image:"small + low qual","":"REMOVE"},{name:"Stray Kids",id:"31","debut year":"2018","debut song":"District 9","debut song link":"https://youtu.be/u6unJQownW4?si=JlN0wr_QLhKewSN-","highest mv views":"God's Menu (神메뉴)","highest mv link":"https://www.youtube.com/watch?v=TQTlCHxyuu8",image:"","":""},{name:"(G)I-DLE ((여자)아이들)",id:"32","debut year":"2018","debut song":"LATATA","debut song link":"https://youtu.be/p4RIhcY7V3c?si=c_K87xUxsjn5BQGm","highest mv views":"Queencard (퀸카)","highest mv link":"https://youtu.be/7HDeem-JaSY?feature=shared",image:"","":""},{name:"IZ*ONE",id:"33","debut year":"2018","debut song":"La Vie en Rose (라비앙로즈)","debut song link":"https://youtu.be/WZwr2a_lFWY?si=EcUcpAfwJMyE57i5","highest mv views":"Fiesta","highest mv link":"https://www.youtube.com/watch?v=eDEFolvLn0A",image:"small + low qual","":"REMOVE"},{name:"ITZY",id:"34","debut year":"2019","debut song":"DALLA DALLA (달라달라)","debut song link":"https://youtu.be/pNfTK39k55U?si=b6ESkvjDTKImWhY9","highest mv views":"WANNABE","highest mv link":"https://www.youtube.com/watch?v=fE2h3lGlOsk",image:"","":""},{name:"TXT (TOMORROW X TOGETHER)",id:"35","debut year":"2019","debut song":"CROWN (어느날 머리에서 뿔이 자랐다)","debut song link":"https://youtu.be/W3iSnJ663II?si=fJMsbm94kuqfwpRs","highest mv views":"Blue Hour","highest mv link":"https://youtu.be/Vd9QkWsd5p4?feature=shared",image:"CROP TO SQUARE","":""},{name:"TREASURE",id:"36","debut year":"2020","debut song":"BOY","debut song link":"https://youtu.be/JSAfPh1A25E?si=SbasbZ41-BLJYBnL","highest mv views":"JIKJIN (직진)","highest mv link":"https://youtu.be/ZJaKdBBzUYk?feature=shared",image:"","":""},{name:"aespa",id:"37","debut year":"2020","debut song":"Black Mamba","debut song link":"https://youtu.be/ZeerrnuLi5E?si=S-gqX_sQc_hYSHz9","highest mv views":"Next Level","highest mv link":"https://youtu.be/4TWR90KJl84?feature=shared",image:"","":""},{name:"ENHYPEN",id:"38","debut year":"2020","debut song":"Given-Taken","debut song link":"https://youtu.be/nQ6wLuYvGd4?si=eUedkwc1OFPAU8iH","highest mv views":"Drunk-Dazed","highest mv link":"https://youtu.be/Fc7-Oe0tj5k?si=KQnSczgAk-4sCDFq",image:"small","":""},{name:"IVE",id:"39","debut year":"2021","debut song":"ELEVEN","debut song link":"https://youtu.be/--FmExEAsM8?si=MDcAyaT_NVInfrBf","highest mv views":"After LIKE","highest mv link":"https://www.youtube.com/watch?v=F0B7HDiY-10&list=PLw6GjJYVtN0zhT0vdt1mWeBkgNr0sNwpp&index=3",image:"","":""},{name:"Kep1er",id:"40","debut year":"2022","debut song":"WA DA DA","debut song link":"https://youtu.be/n0j5NPptyM0?si=436Z9gkZvSacjRUh","highest mv views":"WA DA DA","highest mv link":"https://youtu.be/n0j5NPptyM0?si=436Z9gkZvSacjRUh",image:"","":"REMOVE"},{name:"NMIXX",id:"41","debut year":"2022","debut song":"O.O","debut song link":"https://youtu.be/3GWscde8rM8?si=RprVx2q7st8GycEk","highest mv views":"DICE","highest mv link":"https://youtu.be/p1bjnyDqI9k?si=jDucukb0Qvs-xs9h",image:"","":""},{name:"LE SSERAFIM",id:"42","debut year":"2022","debut song":"FEARLESS","debut song link":"https://youtu.be/4vbDFu0PUew?si=2wiF8J4MbiNHfXIB","highest mv views":"ANTIFRAGILE","highest mv link":"https://youtu.be/pyf8cbqyfPs?si=pFVJTZDp_zxxe5eP",image:"","":""},{name:"NewJeans",id:"43","debut year":"2022","debut song":"Attention","debut song link":"https://youtu.be/js1CtxSY38I?si=HHYtXwITAk5O8KvJ","highest mv views":"Super Shy","highest mv link":"https://youtu.be/ArmDp-zijuc?si=dgUEWpUVN1lWOran",image:"small","":""},{name:"BOYNEXTDOOR",id:"44","debut year":"2023","debut song":"Serenade","debut song link":"https://youtu.be/Uyq9OE8lIz8?si=oxaR8pLU5zieqlpC","highest mv views":"Earth, Wind & Fire","highest mv link":"https://www.youtube.com/watch?v=u9nP3qXQA4o",image:"","":"REMOVE"},{name:"ZEROBASEONE",id:"45","debut year":"2023","debut song":"In Bloom","debut song link":"https://youtu.be/trzeUClQIIg?si=LxiBZRZ1Sv8SdG4g","highest mv views":"CRUSH (가시)","highest mv link":"https://www.youtube.com/watch?v=AZoZbtI67Yk",image:"","":""},{name:"RIIZE",id:"46","debut year":"2023","debut song":"Get A Guitar","debut song link":"https://youtu.be/iUw3LPM7OBU?si=v1PxZ1HQOecnbFri","highest mv views":"Get A Guitar","highest mv link":"https://youtu.be/iUw3LPM7OBU?si=v1PxZ1HQOecnbFri",image:"","":""},{name:"BABYMONSTER",id:"47","debut year":"2023","debut song":"Batter Up","debut song link":"https://youtu.be/olDWm2veCrM?si=hnAU6SGWrZJr9sUM","highest mv views":"Batter Up","highest mv link":"https://youtu.be/olDWm2veCrM?si=hnAU6SGWrZJr9sUM",image:"","":""},{name:"TWS (투어스)",id:"48","debut year":"2024","debut song":"plot twist (첫 만남은 계획대로 되지 않아)","debut song link":"https://youtu.be/hVAc1Vf2ITU?si=E4eRB4Xt7zqx5xE4","highest mv views":"plot twist (첫 만남은 계획대로 되지 않아)","highest mv link":"https://youtu.be/hVAc1Vf2ITU?si=E4eRB4Xt7zqx5xE4",image:"CROP TO SQUARE","":""},{name:"VCHA",id:"49","debut year":"2024","debut song":"Girls of the Year","debut song link":"https://youtu.be/rBHK8Z8cwmQ?si=azCvDC_7u-ZaancM","highest mv views":"Y.O.Universe","highest mv link":"https://youtu.be/M8EsxRh0zOc?si=WmBHbfOFxLClfNQg",image:"","":"REMOVE"},{name:"ILLIT",id:"50","debut year":"2024","debut song":"Magnetic","debut song link":"https://www.youtube.com/watch?v=Vk5-c_v4gMU","highest mv views":"Magnetic","highest mv link":"https://www.youtube.com/watch?v=Vk5-c_v4gMU",image:"","":""}],Fi={title:"Title TK",description:"Description tk."},Bi={index:[{type:"section",value:[{type:"text",value:"This is an experiment to define <span class=intro-highlight>K-pop</span> generations."}]},{type:"section",value:[{type:"text",value:"We want <span class=intro-highlight>fans</span> to have the opportunity to <span class=intro-highlight>vote</span> and determine the answers."}]},{type:"voting",value:{}}]},ht={meta:Fi,body:Bi};function Fn(n,{from:e,to:t},r={}){const i=getComputedStyle(n),s=i.transform==="none"?"":i.transform,[o,a]=i.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*o/t.width-(t.left+o),c=e.top+e.height*a/t.height-(t.top+a),{delay:u=0,duration:h=f=>Math.sqrt(f)*120,easing:d=Mn}=r;return{delay:u,duration:vr(h)?h(Math.sqrt(l*l+c*c)):h,easing:d,css:(f,g)=>{const m=g*l,v=g*c,E=f+g*e.width/t.width,y=f+g*e.height/t.height;return`transform: ${s} translate(${m}px, ${v}px) scale(${E}, ${y});`}}}function Mr(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Rt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mr(Object(t),!0).forEach(function(r){Xe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mr(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lt(n){"@babel/helpers - typeof";return lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(n)}function Xe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gi(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function zi(n,e){if(n==null)return{};var t=Gi(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Hi(n,e){return qi(n)||Ji(n,e)||_r(n,e)||Zi()}function ae(n){return Vi(n)||Wi(n)||_r(n)||Ki()}function Vi(n){if(Array.isArray(n))return sr(n)}function qi(n){if(Array.isArray(n))return n}function Wi(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ji(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function _r(n,e){if(n){if(typeof n=="string")return sr(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sr(n,e)}}function sr(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ki(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=_r(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}var Yi="finalize",Qi="consider";function et(n,e,t){n.dispatchEvent(new CustomEvent(Yi,{detail:{items:e,info:t}}))}function ke(n,e,t){n.dispatchEvent(new CustomEvent(Qi,{detail:{items:e,info:t}}))}var Gt="draggedEntered",vt="draggedLeft",zt="draggedOverIndex",br="draggedLeftDocument",Ct={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function Xi(n,e,t){n.dispatchEvent(new CustomEvent(Gt,{detail:{indexObj:e,draggedEl:t}}))}function es(n,e,t){n.dispatchEvent(new CustomEvent(vt,{detail:{draggedEl:e,type:Ct.LEFT_FOR_ANOTHER,theOtherDz:t}}))}function ts(n,e){n.dispatchEvent(new CustomEvent(vt,{detail:{draggedEl:e,type:Ct.OUTSIDE_OF_ANY}}))}function rs(n,e,t){n.dispatchEvent(new CustomEvent(zt,{detail:{indexObj:e,draggedEl:t}}))}function ns(n){window.dispatchEvent(new CustomEvent(br,{detail:{draggedEl:n}}))}var q={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Gt,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:zt,DRAGGED_LEFT:vt,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},J={POINTER:"pointer",KEYBOARD:"keyboard"},tt="isDndShadowItem",wr="data-is-dnd-shadow-item-internal",is="data-is-dnd-shadow-item-hint",ss="id:dnd-shadow-placeholder-0000",os="dnd-action-dragged-el",M="id",or=0;function Bn(){or++}function Gn(){if(or===0)throw new Error("Bug! trying to decrement when there are no dropzones");or--}var Er=typeof window>"u";function ar(n){var e,t=n.getBoundingClientRect(),r=getComputedStyle(n),i=r.transform;if(i){var s,o,a,l;if(i.startsWith("matrix3d("))e=i.slice(9,-1).split(/, /),s=+e[0],o=+e[5],a=+e[12],l=+e[13];else if(i.startsWith("matrix("))e=i.slice(7,-1).split(/, /),s=+e[0],o=+e[3],a=+e[4],l=+e[5];else return t;var c=r.transformOrigin,u=t.x-a-(1-s)*parseFloat(c),h=t.y-l-(1-o)*parseFloat(c.slice(c.indexOf(" ")+1)),d=s?t.width/s:n.offsetWidth,f=o?t.height/o:n.offsetHeight;return{x:u,y:h,width:d,height:f,top:h,right:u+d,bottom:h+f,left:u}}else return t}function zn(n){var e=ar(n);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Hn(n){var e=n.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Vn(n){return{x:(n.left+n.right)/2,y:(n.top+n.bottom)/2}}function as(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Ht(n,e){return n.y<=e.bottom&&n.y>=e.top&&n.x>=e.left&&n.x<=e.right}function dt(n){return Vn(Hn(n))}function Fr(n,e){var t=dt(n),r=zn(e);return Ht(t,r)}function ls(n,e){var t=dt(n),r=dt(e);return as(t,r)}function cs(n){var e=Hn(n);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}var ze;function Tr(){ze=new Map}Tr();function us(n){var e=Array.from(n.children).findIndex(function(t){return t.getAttribute(wr)});if(e>=0)return ze.has(n)||ze.set(n,new Map),ze.get(n).set(e,zn(n.children[e])),e}function hs(n,e){if(!Fr(n,e))return null;var t=e.children;if(t.length===0)return{index:0,isProximityBased:!0};for(var r=us(e),i=0;i<t.length;i++)if(Fr(n,t[i])){var s=ze.has(e)&&ze.get(e).get(i);return s&&!Ht(dt(n),s)?{index:r,isProximityBased:!1}:{index:i,isProximityBased:!1}}for(var o=Number.MAX_VALUE,a=void 0,l=0;l<t.length;l++){var c=ls(n,t[l]);c<o&&(o=c,a=l)}return{index:a,isProximityBased:!0}}function bt(n){return JSON.stringify(n,null,2)}function Pt(n){if(!n)throw new Error("cannot get depth of a falsy node");return qn(n,0)}function qn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.parentElement?qn(n.parentElement,e+1):e-1}function ds(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(var t in n)if(!{}.hasOwnProperty.call(e,t)||e[t]!==n[t])return!1;return!0}function fs(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var gs=200,Br=10,lr;function ms(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gs,r=arguments.length>3?arguments[3]:void 0,i,s,o=!1,a,l=Array.from(e).sort(function(u,h){return Pt(h)-Pt(u)});function c(){var u=dt(n),h=r.multiScrollIfNeeded();if(!h&&a&&Math.abs(a.x-u.x)<Br&&Math.abs(a.y-u.y)<Br){lr=window.setTimeout(c,t);return}if(cs(n)){ns(n);return}a=u;var d=!1,f=pt(l),g;try{for(f.s();!(g=f.n()).done;){var m=g.value;h&&Tr();var v=hs(n,m);if(v!==null){var E=v.index;d=!0,m!==i?(i&&es(i,n,m),Xi(m,v,n),i=m):E!==s&&(rs(m,v,n),s=E);break}}}catch(y){f.e(y)}finally{f.f()}!d&&o&&i?(ts(i,n),i=void 0,s=void 0,o=!1):o=!0,lr=window.setTimeout(c,t)}c()}function ps(){clearTimeout(lr),Tr()}var st=30;function vs(){var n;function e(){n={directionObj:void 0,stepPx:0}}e();function t(s){var o=n,a=o.directionObj,l=o.stepPx;a&&(s.scrollBy(a.x*l,a.y*l),window.requestAnimationFrame(function(){return t(s)}))}function r(s){return st-s}function i(s,o){if(!o)return!1;var a=ys(s,o);if(a===null)return e(),!1;var l=!!n.directionObj,c=!1,u=!1;return o.scrollHeight>o.clientHeight&&(a.bottom<st?(c=!0,n.directionObj={x:0,y:1},n.stepPx=r(a.bottom)):a.top<st&&(c=!0,n.directionObj={x:0,y:-1},n.stepPx=r(a.top)),!l&&c)||o.scrollWidth>o.clientWidth&&(a.right<st?(u=!0,n.directionObj={x:1,y:0},n.stepPx=r(a.right)):a.left<st&&(u=!0,n.directionObj={x:-1,y:0},n.stepPx=r(a.left)),!l&&u)?(t(o),!0):(e(),!1)}return{scrollIfNeeded:i,resetScrolling:e}}function ys(n,e){var t=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();return Ht(n,t)?{top:n.y-t.top,bottom:t.bottom-n.y,left:n.x-t.left,right:t.right-n.x}:null}function _s(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,t=ws(n),r=Array.from(t).sort(function(a,l){return Pt(l)-Pt(a)}),i=vs(),s=i.scrollIfNeeded;function o(){var a=e();if(!a||!r)return!1;for(var l=r.filter(function(h){return Ht(a,h.getBoundingClientRect())||h===document.scrollingElement}),c=0;c<l.length;c++){var u=s(a,l[c]);if(u)return!0}return!1}return{multiScrollIfNeeded:t.size>0?o:function(){return!1}}}function bs(n){if(!n)return[];for(var e=[],t=n;t;){var r=window.getComputedStyle(t),i=r.overflow;i.split(" ").some(function(s){return s.includes("auto")||s.includes("scroll")})&&e.push(t),t=t.parentElement}return e}function ws(n){var e=new Set,t=pt(n),r;try{for(t.s();!(r=t.n()).done;){var i=r.value;bs(i).forEach(function(s){return e.add(s)})}}catch(s){t.e(s)}finally{t.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement),e}function Es(n){var e=n.cloneNode(!0),t=[],r=n.tagName==="SELECT",i=r?[n]:ae(n.querySelectorAll("select")),s=pt(i),o;try{for(s.s();!(o=s.n()).done;){var a=o.value;t.push(a.value)}}catch(b){s.e(b)}finally{s.f()}if(i.length>0)for(var l=r?[e]:ae(e.querySelectorAll("select")),c=0;c<l.length;c++){var u=l[c],h=t[c],d=u.querySelector('option[value="'.concat(h,'"'));d&&d.setAttribute("selected",!0)}var f=n.tagName==="CANVAS",g=f?[n]:ae(n.querySelectorAll("canvas"));if(g.length>0)for(var m=f?[e]:ae(e.querySelectorAll("canvas")),v=0;v<m.length;v++){var E=g[v],y=m[v];y.width=E.width,y.height=E.height,y.getContext("2d").drawImage(E,0,0)}return e}var ft=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Ts=Xe({},ft.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Wn(n){if(!ft[n])throw new Error("Can't get non existing feature flag ".concat(n,"! Supported flags: ").concat(Object.keys(ft)));return Ts[n]}var ks=.2;function Se(n){return"".concat(n," ").concat(ks,"s ease")}function Os(n,e){var t=n.getBoundingClientRect(),r=Es(n);Jn(n,r),r.id=os,r.style.position="fixed";var i=t.top,s=t.left;if(r.style.top="".concat(i,"px"),r.style.left="".concat(s,"px"),e){var o=Vn(t);i-=o.y-e.y,s-=o.x-e.x,window.setTimeout(function(){r.style.top="".concat(i,"px"),r.style.left="".concat(s,"px")},0)}return r.style.margin="0",r.style.boxSizing="border-box",r.style.height="".concat(t.height,"px"),r.style.width="".concat(t.width,"px"),r.style.transition="".concat(Se("top"),", ").concat(Se("left"),", ").concat(Se("background-color"),", ").concat(Se("opacity"),", ").concat(Se("color")," "),window.setTimeout(function(){return r.style.transition+=", ".concat(Se("width"),", ").concat(Se("height"))},0),r.style.zIndex="9999",r.style.cursor="grabbing",r}function Ss(n){n.style.cursor="grab"}function As(n,e,t,r){Jn(e,n);var i=e.getBoundingClientRect(),s=n.getBoundingClientRect(),o=i.width-s.width,a=i.height-s.height;if(o||a){var l={left:(t-s.left)/s.width,top:(r-s.top)/s.height};Wn(ft.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(n.style.height="".concat(i.height,"px"),n.style.width="".concat(i.width,"px")),n.style.left="".concat(parseFloat(n.style.left)-l.left*o,"px"),n.style.top="".concat(parseFloat(n.style.top)-l.top*a,"px")}}function Jn(n,e){var t=window.getComputedStyle(n);Array.from(t).filter(function(r){return r.startsWith("background")||r.startsWith("padding")||r.startsWith("font")||r.startsWith("text")||r.startsWith("align")||r.startsWith("justify")||r.startsWith("display")||r.startsWith("flex")||r.startsWith("border")||r==="opacity"||r==="color"||r==="list-style-type"||Wn(ft.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(r==="width"||r==="height")}).forEach(function(r){return e.style.setProperty(r,t.getPropertyValue(r),t.getPropertyPriority(r))})}function Ds(n,e){n.draggable=!1,n.ondragstart=function(){return!1},e?(n.style.userSelect="",n.style.WebkitUserSelect="",n.style.cursor=""):(n.style.userSelect="none",n.style.WebkitUserSelect="none",n.style.cursor="grab")}function Kn(n){n.style.display="none",n.style.position="fixed",n.style.zIndex="-5"}function Is(n){n.style.visibility="hidden",n.setAttribute(wr,"true")}function Rs(n){n.style.visibility="",n.removeAttribute(wr)}function Ot(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};n.forEach(function(r){var i=e(r);Object.keys(i).forEach(function(s){r.style[s]=i[s]}),t(r).forEach(function(s){return r.classList.add(s)})})}function $t(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};n.forEach(function(r){var i=e(r);Object.keys(i).forEach(function(s){r.style[s]=""}),t(r).forEach(function(s){return r.classList.contains(s)&&r.classList.remove(s)})})}function Cs(n){var e=n.style.minHeight;n.style.minHeight=window.getComputedStyle(n).getPropertyValue("height");var t=n.style.minWidth;return n.style.minWidth=window.getComputedStyle(n).getPropertyValue("width"),function(){n.style.minHeight=e,n.style.minWidth=t}}var Ps="--any--",$s=100,Ls=20,Gr=3,zr={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Hr="data-is-dnd-original-dragged-item",pe,B,W,Vt,L,qt,Te,z,be,X,Ce=!1,kr=!1,Or,yt=!1,St=[],de=new Map,j=new Map,Zt=new WeakMap;function xs(n,e){de.has(e)||de.set(e,new Set),de.get(e).has(n)||(de.get(e).add(n),Bn())}function Vr(n,e){de.get(e).delete(n),Gn(),de.get(e).size===0&&de.delete(e)}function js(){var n=de.get(Vt),e=pt(n),t;try{for(e.s();!(t=e.n()).done;){var r=t.value;r.addEventListener(Gt,Zn),r.addEventListener(vt,Yn),r.addEventListener(zt,Qn)}}catch(a){e.e(a)}finally{e.f()}window.addEventListener(br,rt);var i=Math.max.apply(Math,ae(Array.from(n.keys()).map(function(a){return j.get(a).dropAnimationDurationMs}))),s=i===0?Ls:Math.max(i,$s),o=_s(n,function(){return X});ms(B,n,s*1.07,o)}function Ns(){var n=de.get(Vt),e=pt(n),t;try{for(e.s();!(t=e.n()).done;){var r=t.value;r.removeEventListener(Gt,Zn),r.removeEventListener(vt,Yn),r.removeEventListener(zt,Qn)}}catch(i){e.e(i)}finally{e.f()}window.removeEventListener(br,rt),ps()}function Wt(n){return n.findIndex(function(e){return!!e[tt]})}function Us(n){var e;return Rt(Rt({},n),{},(e={},Xe(e,tt,!0),Xe(e,M,ss),e))}function Zn(n){var e=j.get(n.currentTarget),t=e.items,r=e.dropFromOthersDisabled;if(!(r&&n.currentTarget!==L)){if(yt=!1,t=t.filter(function(u){return u[M]!==Te[M]}),L!==n.currentTarget){var i=j.get(L).items,s=i.filter(function(u){return!u[tt]});ke(L,s,{trigger:q.DRAGGED_ENTERED_ANOTHER,id:W[M],source:J.POINTER})}var o=n.detail.indexObj,a=o.index,l=o.isProximityBased,c=l&&a===n.currentTarget.children.length-1?a+1:a;z=n.currentTarget,t.splice(c,0,Te),ke(n.currentTarget,t,{trigger:q.DRAGGED_ENTERED,id:W[M],source:J.POINTER})}}function Yn(n){if(Ce){var e=j.get(n.currentTarget),t=e.items,r=e.dropFromOthersDisabled;if(!(r&&n.currentTarget!==L&&n.currentTarget!==z)){var i=ae(t),s=Wt(i);s!==-1&&i.splice(s,1);var o=z;z=void 0;var a=n.detail,l=a.type,c=a.theOtherDz;if(l===Ct.OUTSIDE_OF_ANY||l===Ct.LEFT_FOR_ANOTHER&&c!==L&&j.get(c).dropFromOthersDisabled){yt=!0,z=L;var u=o===L?i:ae(j.get(L).items);u.splice(qt,0,Te),ke(L,u,{trigger:q.DRAGGED_LEFT_ALL,id:W[M],source:J.POINTER})}ke(n.currentTarget,i,{trigger:q.DRAGGED_LEFT,id:W[M],source:J.POINTER})}}}function Qn(n){var e=j.get(n.currentTarget),t=e.items,r=e.dropFromOthersDisabled;if(!(r&&n.currentTarget!==L)){var i=ae(t);yt=!1;var s=n.detail.indexObj.index,o=Wt(i);o!==-1&&i.splice(o,1),i.splice(s,0,Te),ke(n.currentTarget,i,{trigger:q.DRAGGED_OVER_INDEX,id:W[M],source:J.POINTER})}}function Lt(n){n.preventDefault();var e=n.touches?n.touches[0]:n;X={x:e.clientX,y:e.clientY},B.style.transform="translate3d(".concat(X.x-be.x,"px, ").concat(X.y-be.y,"px, 0)")}function rt(){kr=!0,window.removeEventListener("mousemove",Lt),window.removeEventListener("touchmove",Lt),window.removeEventListener("mouseup",rt),window.removeEventListener("touchend",rt),Ns(),Ss(B),z||(z=L);var n=j.get(z),e=n.items,t=n.type;$t(de.get(t),function(s){return j.get(s).dropTargetStyle},function(s){return j.get(s).dropTargetClasses});var r=Wt(e);r===-1&&z===L&&(r=qt),e=e.map(function(s){return s[tt]?W:s});function i(){Or(),et(z,e,{trigger:yt?q.DROPPED_OUTSIDE_OF_ANY:q.DROPPED_INTO_ZONE,id:W[M],source:J.POINTER}),z!==L&&et(L,j.get(L).items,{trigger:q.DROPPED_INTO_ANOTHER,id:W[M],source:J.POINTER}),r!==-1&&Rs(z.children[r]),Bs()}Ms(r,i)}function Ms(n,e){var t=n>-1?ar(z.children[n]):ar(z),r={x:t.left-parseFloat(B.style.left),y:t.top-parseFloat(B.style.top)},i=j.get(z),s=i.dropAnimationDurationMs,o="transform ".concat(s,"ms ease");B.style.transition=B.style.transition?B.style.transition+","+o:o,B.style.transform="translate3d(".concat(r.x,"px, ").concat(r.y,"px, 0)"),window.setTimeout(e,s)}function Fs(n,e){St.push({dz:n,destroy:e}),window.requestAnimationFrame(function(){Kn(n),document.body.appendChild(n)})}function Bs(){B.remove(),pe.remove(),St.length&&(St.forEach(function(n){var e=n.dz,t=n.destroy;t(),e.remove()}),St=[]),B=void 0,pe=void 0,W=void 0,Vt=void 0,L=void 0,qt=void 0,Te=void 0,z=void 0,be=void 0,X=void 0,Ce=!1,kr=!1,Or=void 0,yt=!1}function Gs(n,e){var t=!1,r={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:zr,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1},i=new Map;function s(){window.addEventListener("mousemove",l,{passive:!1}),window.addEventListener("touchmove",l,{passive:!1,capture:!1}),window.addEventListener("mouseup",a,{passive:!1}),window.addEventListener("touchend",a,{passive:!1})}function o(){window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a)}function a(){o(),pe=void 0,be=void 0,X=void 0}function l(d){d.preventDefault();var f=d.touches?d.touches[0]:d;X={x:f.clientX,y:f.clientY},(Math.abs(X.x-be.x)>=Gr||Math.abs(X.y-be.y)>=Gr)&&(o(),u())}function c(d){if(!(d.target!==d.currentTarget&&(d.target.value!==void 0||d.target.isContentEditable))&&!d.button&&!Ce){d.stopPropagation();var f=d.touches?d.touches[0]:d;be={x:f.clientX,y:f.clientY},X=Rt({},be),pe=d.currentTarget,s()}}function u(){Ce=!0;var d=i.get(pe);qt=d,L=pe.parentElement;var f=L.closest("dialog")||L.getRootNode(),g=f.body||f,m=r.items,v=r.type,E=r.centreDraggedOnCursor,y=ae(m);W=y[d],Vt=v,Te=Us(W),B=Os(pe,E&&X),pe.setAttribute(Hr,!0);function b(){B.parentElement?window.requestAnimationFrame(b):(g.appendChild(B),B.focus(),js(),Kn(pe),g.appendChild(pe),Te[M]=W[M])}window.requestAnimationFrame(b),Ot(Array.from(de.get(r.type)).filter(function(_){return _===L||!j.get(_).dropFromOthersDisabled}),function(_){return j.get(_).dropTargetStyle},function(_){return j.get(_).dropTargetClasses}),y.splice(d,1,Te),Or=Cs(L),ke(L,y,{trigger:q.DRAG_STARTED,id:W[M],source:J.POINTER}),window.addEventListener("mousemove",Lt,{passive:!1}),window.addEventListener("touchmove",Lt,{passive:!1,capture:!1}),window.addEventListener("mouseup",rt,{passive:!1}),window.addEventListener("touchend",rt,{passive:!1})}function h(d){var f=d.items,g=f===void 0?void 0:f,m=d.flipDurationMs,v=m===void 0?0:m,E=d.type,y=E===void 0?Ps:E,b=d.dragDisabled,_=b===void 0?!1:b,k=d.morphDisabled,Z=k===void 0?!1:k,re=d.dropFromOthersDisabled,Y=re===void 0?!1:re,ge=d.dropTargetStyle,ne=ge===void 0?zr:ge,ie=d.dropTargetClasses,C=ie===void 0?[]:ie,R=d.transformDraggedElement,T=R===void 0?function(){}:R,$=d.centreDraggedOnCursor,Oe=$===void 0?!1:$;r.dropAnimationDurationMs=v,r.type&&y!==r.type&&Vr(n,r.type),r.type=y,r.items=ae(g),r.dragDisabled=_,r.morphDisabled=Z,r.transformDraggedElement=T,r.centreDraggedOnCursor=Oe,t&&Ce&&!kr&&(!ds(ne,r.dropTargetStyle)||!fs(C,r.dropTargetClasses))&&($t([n],function(){return r.dropTargetStyle},function(){return C}),Ot([n],function(){return ne},function(){return C})),r.dropTargetStyle=ne,r.dropTargetClasses=ae(C);function N(me,Pr){return j.get(me)?j.get(me)[Pr]:r[Pr]}t&&Ce&&r.dropFromOthersDisabled!==Y&&(Y?$t([n],function(me){return N(me,"dropTargetStyle")},function(me){return N(me,"dropTargetClasses")}):Ot([n],function(me){return N(me,"dropTargetStyle")},function(me){return N(me,"dropTargetClasses")})),r.dropFromOthersDisabled=Y,j.set(n,r),xs(n,y);for(var fi=Wt(r.items),xe=0;xe<n.children.length;xe++){var le=n.children[xe];if(Ds(le,_),xe===fi){r.transformDraggedElement(B,W,xe),Z||As(B,le,X.x,X.y),Is(le);continue}le.removeEventListener("mousedown",Zt.get(le)),le.removeEventListener("touchstart",Zt.get(le)),_||(le.addEventListener("mousedown",c),le.addEventListener("touchstart",c),Zt.set(le,c)),i.set(le,xe),t||(t=!0)}}return h(e),{update:function(f){h(f)},destroy:function(){function f(){Vr(n,j.get(n).type),j.delete(n)}Ce&&!n.closest("[".concat(Hr,"]"))?Fs(n,f):f()}}}var wt,cr={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Xn=(wt={},Xe(wt,cr.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Xe(wt,cr.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),wt),zs="dnd-action-aria-alert",x;function ur(){x||(x=document.createElement("div"),function(){x.id=zs,x.style.position="fixed",x.style.bottom="0",x.style.left="0",x.style.zIndex="-5",x.style.opacity="0",x.style.height="0",x.style.width="0",x.setAttribute("role","alert")}(),document.body.prepend(x),Object.entries(Xn).forEach(function(n){var e=Hi(n,2),t=e[0],r=e[1];return document.body.prepend(qs(t,r))}))}function Hs(){return Er?null:(document.readyState==="complete"?ur():window.addEventListener("DOMContentLoaded",ur),Rt({},cr))}function Vs(){Er||!x||(Object.keys(Xn).forEach(function(n){var e;return(e=document.getElementById(n))===null||e===void 0?void 0:e.remove()}),x.remove(),x=void 0)}function qs(n,e){var t=document.createElement("div");return t.id=n,t.innerHTML="<p>".concat(e,"</p>"),t.style.display="none",t.style.position="fixed",t.style.zIndex="-5",t}function He(n){if(!Er){x||ur(),x.innerHTML="";var e=document.createTextNode(n);x.appendChild(e),x.style.display="none",x.style.display="inline"}}var Ws="--any--",qr={outline:"rgba(255, 255, 102, 0.7) solid 2px"},oe=!1,hr,H,$e="",Ie,ve,Ee="",xt=new WeakSet,Wr=new WeakMap,Jr=new WeakMap,dr=new Map,F=new Map,he=new Map,jt;function Js(n,e){he.size===0&&(jt=Hs(),window.addEventListener("keydown",ei),window.addEventListener("click",ti)),he.has(e)||he.set(e,new Set),he.get(e).has(n)||(he.get(e).add(n),Bn())}function Kr(n,e){H===n&&gt(),he.get(e).delete(n),Gn(),he.get(e).size===0&&he.delete(e),he.size===0&&(window.removeEventListener("keydown",ei),window.removeEventListener("click",ti),jt=void 0,Vs())}function ei(n){if(oe)switch(n.key){case"Escape":{gt();break}}}function ti(){oe&&(xt.has(document.activeElement)||gt())}function Ks(n){if(oe){var e=n.currentTarget;if(e!==H){$e=e.getAttribute("aria-label")||"";var t=F.get(H),r=t.items,i=r.find(function(h){return h[M]===ve}),s=r.indexOf(i),o=r.splice(s,1)[0],a=F.get(e),l=a.items,c=a.autoAriaDisabled;e.getBoundingClientRect().top<H.getBoundingClientRect().top||e.getBoundingClientRect().left<H.getBoundingClientRect().left?(l.push(o),c||He("Moved item ".concat(Ee," to the end of the list ").concat($e))):(l.unshift(o),c||He("Moved item ".concat(Ee," to the beginning of the list ").concat($e)));var u=H;et(u,r,{trigger:q.DROPPED_INTO_ANOTHER,id:ve,source:J.KEYBOARD}),et(e,l,{trigger:q.DROPPED_INTO_ZONE,id:ve,source:J.KEYBOARD}),H=e}}}function ri(){dr.forEach(function(n,e){var t=n.update;return t(F.get(e))})}function gt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;F.get(H).autoAriaDisabled||He("Stopped dragging item ".concat(Ee)),xt.has(document.activeElement)&&document.activeElement.blur(),n&&ke(H,F.get(H).items,{trigger:q.DRAG_STOPPED,id:ve,source:J.KEYBOARD}),$t(he.get(hr),function(e){return F.get(e).dropTargetStyle},function(e){return F.get(e).dropTargetClasses}),Ie=null,ve=null,Ee="",hr=null,H=null,$e="",oe=!1,ri()}function Zs(n,e){var t={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:qr,dropTargetClasses:[],autoAriaDisabled:!1};function r(u,h,d){u.length<=1||u.splice(d,1,u.splice(h,1,u[d])[0])}function i(u){switch(u.key){case"Enter":case" ":{if((u.target.disabled!==void 0||u.target.href||u.target.isContentEditable)&&!xt.has(u.target))return;u.preventDefault(),u.stopPropagation(),oe?gt():s(u);break}case"ArrowDown":case"ArrowRight":{if(!oe)return;u.preventDefault(),u.stopPropagation();var h=F.get(n),d=h.items,f=Array.from(n.children),g=f.indexOf(u.currentTarget);g<f.length-1&&(t.autoAriaDisabled||He("Moved item ".concat(Ee," to position ").concat(g+2," in the list ").concat($e)),r(d,g,g+1),et(n,d,{trigger:q.DROPPED_INTO_ZONE,id:ve,source:J.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!oe)return;u.preventDefault(),u.stopPropagation();var m=F.get(n),v=m.items,E=Array.from(n.children),y=E.indexOf(u.currentTarget);y>0&&(t.autoAriaDisabled||He("Moved item ".concat(Ee," to position ").concat(y," in the list ").concat($e)),r(v,y,y-1),et(n,v,{trigger:q.DROPPED_INTO_ZONE,id:ve,source:J.KEYBOARD}));break}}}function s(u){a(u.currentTarget),H=n,hr=t.type,oe=!0;var h=Array.from(he.get(t.type)).filter(function(f){return f===H||!F.get(f).dropFromOthersDisabled});if(Ot(h,function(f){return F.get(f).dropTargetStyle},function(f){return F.get(f).dropTargetClasses}),!t.autoAriaDisabled){var d="Started dragging item ".concat(Ee,". Use the arrow keys to move it within its list ").concat($e);h.length>1&&(d+=", or tab to another list in order to move the item into it"),He(d)}ke(n,F.get(n).items,{trigger:q.DRAG_STARTED,id:ve,source:J.KEYBOARD}),ri()}function o(u){oe&&u.currentTarget!==Ie&&(u.stopPropagation(),gt(!1),s(u))}function a(u){var h=F.get(n),d=h.items,f=Array.from(n.children),g=f.indexOf(u);Ie=u,Ie.tabIndex=t.zoneItemTabIndex,ve=d[g][M],Ee=f[g].getAttribute("aria-label")||""}function l(u){var h=u.items,d=h===void 0?[]:h,f=u.type,g=f===void 0?Ws:f,m=u.dragDisabled,v=m===void 0?!1:m,E=u.zoneTabIndex,y=E===void 0?0:E,b=u.zoneItemTabIndex,_=b===void 0?0:b,k=u.dropFromOthersDisabled,Z=k===void 0?!1:k,re=u.dropTargetStyle,Y=re===void 0?qr:re,ge=u.dropTargetClasses,ne=ge===void 0?[]:ge,ie=u.autoAriaDisabled,C=ie===void 0?!1:ie;t.items=ae(d),t.dragDisabled=v,t.dropFromOthersDisabled=Z,t.zoneTabIndex=y,t.zoneItemTabIndex=_,t.dropTargetStyle=Y,t.dropTargetClasses=ne,t.autoAriaDisabled=C,t.type&&g!==t.type&&Kr(n,t.type),t.type=g,Js(n,g),C||(n.setAttribute("aria-disabled",v),n.setAttribute("role","list"),n.setAttribute("aria-describedby",v?jt.DND_ZONE_DRAG_DISABLED:jt.DND_ZONE_ACTIVE)),F.set(n,t),oe?n.tabIndex=n===H||Ie.contains(n)||t.dropFromOthersDisabled||H&&t.type!==F.get(H).type?-1:0:n.tabIndex=t.zoneTabIndex,n.addEventListener("focus",Ks);for(var R=function(Oe){var N=n.children[Oe];xt.add(N),N.tabIndex=oe?-1:t.zoneItemTabIndex,C||N.setAttribute("role","listitem"),N.removeEventListener("keydown",Wr.get(N)),N.removeEventListener("click",Jr.get(N)),v||(N.addEventListener("keydown",i),Wr.set(N,i),N.addEventListener("click",o),Jr.set(N,o)),oe&&t.items[Oe][M]===ve&&(Ie=N,Ie.tabIndex=t.zoneItemTabIndex,N.focus())},T=0;T<n.children.length;T++)R(T)}l(e);var c={update:function(h){l(h)},destroy:function(){Kr(n,t.type),F.delete(n),dr.delete(n)}};return dr.set(n,c),c}var Ys=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"];function Qs(n,e){if(Xs(n))return{update:function(){},destroy:function(){}};Zr(e);var t=Gs(n,e),r=Zs(n,e);return{update:function(s){Zr(s),t.update(s),r.update(s)},destroy:function(){t.destroy(),r.destroy()}}}function Xs(n){return!!n.closest("[".concat(is,'="true"]'))}function Zr(n){var e=n.items;n.flipDurationMs,n.type,n.dragDisabled,n.morphDisabled,n.dropFromOthersDisabled;var t=n.zoneTabIndex,r=n.zoneItemTabIndex;n.dropTargetStyle;var i=n.dropTargetClasses;n.transformDraggedElement,n.autoAriaDisabled,n.centreDraggedOnCursor;var s=zi(n,Ys);if(Object.keys(s).length>0&&console.warn("dndzone will ignore unknown options",s),!e)throw new Error("no 'items' key provided to dndzone");var o=e.find(function(a){return!{}.hasOwnProperty.call(a,M)});if(o)throw new Error("missing '".concat(M,"' property for item ").concat(bt(o)));if(i&&!Array.isArray(i))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(lt(i),", ").concat(bt(i)));if(t&&!Yr(t))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(lt(t),", ").concat(bt(t)));if(r&&!Yr(r))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(lt(r),", ").concat(bt(r)))}function Yr(n){return!isNaN(n)&&function(e){return(e|0)===e}(parseFloat(n))}const eo=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Qe(()=>Promise.resolve().then(()=>_t),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Sr extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class to extends Sr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ro extends Sr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class no extends Sr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var io=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class so{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=eo(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return io(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(f=>{throw new to(f)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new ro(c);if(!c.ok)throw new no(c);let h=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),d;return h==="application/json"?d=yield c.json():h==="application/octet-stream"?d=yield c.blob():h==="multipart/form-data"?d=yield c.formData():d=yield c.text(),{data:d,error:null}}catch(i){return{data:null,error:i}}})}}var oo=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},nt=oo();const ao=nt.fetch,Ar=nt.fetch.bind(nt),ni=nt.Headers,lo=nt.Request,co=nt.Response,_t=Object.freeze(Object.defineProperty({__proto__:null,Headers:ni,Request:lo,Response:co,default:Ar,fetch:ao},Symbol.toStringTag,{value:"Module"}));class uo extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class ho{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ar:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,h=null,d=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const E=await s.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=E:u=JSON.parse(E))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,d=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await s.text();try{c=JSON.parse(m),Array.isArray(c)&&s.status===404&&(u=[],c=null,d=200,f="OK")}catch{s.status===404&&m===""?(d=204,f="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,d=200,f="OK"),c&&this.shouldThrowOnError)throw new uo(c)}return{error:c,data:u,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}class fo extends ho{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Be extends fo{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class go{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Be({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Be({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Be({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new Be({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Be({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const mo="1.9.2",po={"X-Client-Info":`postgrest-js/${mo}`};class Dr{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},po),t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new go(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Dr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(s="HEAD",Object.entries(t).forEach(([c,u])=>{o.searchParams.append(c,`${u}`)})):(s="POST",a=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Be({method:s,url:o,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const vo="2.9.3",yo={"X-Client-Info":`realtime-js/${vo}`},_o="1.0.0",ii=1e4,bo=1e3;var Ve;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ve||(Ve={}));var Q;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Q||(Q={}));var ue;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ue||(ue={}));var fr;(function(n){n.websocket="websocket"})(fr||(fr={}));var Pe;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Pe||(Pe={}));class si{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class wo{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Yt{constructor(e,t,r={},i=ii){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qr;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Qr||(Qr={}));class ct{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ct.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=ct.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ct.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const d=u.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),g=u.filter(v=>f.indexOf(v.presence_ref)<0),m=h.filter(v=>d.indexOf(v.presence_ref)<0);g.length>0&&(a[c]=g),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var P;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(P||(P={}));const Xr=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Eo(o,n,e,i),s),{})},Eo=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?oi(s,o):gr(o)},oi=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return So(e,t)}switch(n){case P.bool:return To(e);case P.float4:case P.float8:case P.int2:case P.int4:case P.int8:case P.numeric:case P.oid:return ko(e);case P.json:case P.jsonb:return Oo(e);case P.timestamp:return Ao(e);case P.abstime:case P.date:case P.daterange:case P.int4range:case P.int8range:case P.money:case P.reltime:case P.text:case P.time:case P.timestamptz:case P.timetz:case P.tsrange:case P.tstzrange:return gr(e);default:return gr(e)}},gr=n=>n,To=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},ko=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Oo=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},So=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>oi(e,a))}return n},Ao=n=>typeof n=="string"?n.replace(" ","T"):n;var en;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(en||(en={}));var tn;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(tn||(tn={}));var rn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(rn||(rn={}));class Ir{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Q.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Yt(this,ue.join,this.params,this.timeout),this.rejoinTimer=new si(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Q.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Q.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ue.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new ct(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,d=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,f=[];for(let g=0;g<d;g++){const m=h[g],{filter:{event:v,schema:E,table:y,filter:b}}=m,_=c&&c[g];if(_&&_.event===v&&_.schema===E&&_.table===y&&_.filter===b)f.push(Object.assign(Object.assign({},m),{id:_.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,a={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=t.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Q.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ue.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Yt(this,ue.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Yt(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ue;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,m,v;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(m=f.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(d,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var g,m,v,E,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,k=(g=f.filter)===null||g===void 0?void 0:g.event;return _&&((m=t.ids)===null||m===void 0?void 0:m.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(y=(E=f==null?void 0:f.filter)===null||E===void 0?void 0:E.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((b=t==null?void 0:t.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:m,table:v,commit_timestamp:E,type:y,errors:b}=g;d=Object.assign(Object.assign({},{schema:m,table:v,commit_timestamp:E,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(g))}f.callback(d,r)})}_isClosed(){return this.state===Q.closed}_isJoined(){return this.state===Q.joined}_isJoining(){return this.state===Q.joining}_isLeaving(){return this.state===Q.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Ir.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ue.close,{},e)}_onError(e){this._on(ue.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Q.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Xr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Xr(e.columns,e.old_record)),t}}const Do=()=>{},Io=typeof WebSocket<"u";class Ro{constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=yo,this.params={},this.timeout=ii,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Do,this.conn=null,this.sendBuffer=[],this.serializer=new wo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Qe(()=>Promise.resolve().then(()=>_t),void 0,import.meta.url).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${fr.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new si(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Io){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Co(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Qe(()=>import("../chunks/browser.C_3xDvYS.js").then(e=>e.b),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ve.connecting:return Pe.Connecting;case Ve.open:return Pe.Open;case Ve.closing:return Pe.Closing;default:return Pe.Closed}}isConnected(){return this.connectionState()===Pe.Open}channel(e,t={config:{}}){const r=new Ir(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(ue.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_o}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ue.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(bo,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Co{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ve.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Rr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function G(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Po extends Rr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nn extends Rr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var $o=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const ai=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Qe(()=>Promise.resolve().then(()=>_t),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Lo=()=>$o(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qe(()=>Promise.resolve().then(()=>_t),void 0,import.meta.url)).Response:Response});var it=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Qt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),xo=(n,e)=>it(void 0,void 0,void 0,function*(){const t=yield Lo();n instanceof t?n.json().then(r=>{e(new Po(Qt(r),n.status||500))}).catch(r=>{e(new nn(Qt(r),r))}):e(new nn(Qt(n),n))}),jo=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function Jt(n,e,t,r,i,s){return it(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,jo(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>xo(l,a))})})}function mr(n,e,t,r){return it(this,void 0,void 0,function*(){return Jt(n,"GET",e,t,r)})}function _e(n,e,t,r,i){return it(this,void 0,void 0,function*(){return Jt(n,"POST",e,r,i,t)})}function No(n,e,t,r,i){return it(this,void 0,void 0,function*(){return Jt(n,"PUT",e,r,i,t)})}function li(n,e,t,r,i){return it(this,void 0,void 0,function*(){return Jt(n,"DELETE",e,r,i,t)})}var se=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Uo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mo{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=ai(i)}uploadOrUpdate(e,t,r,i){return se(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},sn),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl)):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield u.json();return u.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(G(s))return{data:null,error:s};throw s}})}upload(e,t,r){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return se(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:sn.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),d=yield h.json();return h.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(G(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return se(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield _e(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+r.url),s=i.searchParams.get("token");if(!s)throw new Rr("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}update(e,t,r){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return se(this,void 0,void 0,function*(){try{return{data:yield _e(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}copy(e,t){return se(this,void 0,void 0,function*(){try{return{data:{path:(yield _e(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return se(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield _e(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return se(this,void 0,void 0,function*(){try{const i=yield _e(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}download(e,t){return se(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield mr(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(G(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return se(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}list(e,t,r){return se(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Uo),t),{prefix:e||""});return{data:yield _e(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Fo="2.5.5",Bo={"X-Client-Info":`storage-js/${Fo}`};var je=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class Go{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Bo),t),this.fetch=ai(r)}listBuckets(){return je(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(G(e))return{data:null,error:e};throw e}})}getBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return je(this,void 0,void 0,function*(){try{return{data:yield _e(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return je(this,void 0,void 0,function*(){try{return{data:yield No(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}emptyBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield _e(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}deleteBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}}class zo extends Go{constructor(e,t={},r){super(e,t,r)}from(e){return new Mo(this.url,this.headers,e,this.fetch)}}const Ho="2.39.8";let at="";typeof Deno<"u"?at="deno":typeof document<"u"?at="web":typeof navigator<"u"&&navigator.product==="ReactNative"?at="react-native":at="node";const Vo={"X-Client-Info":`supabase-js-${at}/${Ho}`},qo={headers:Vo},Wo={schema:"public"},Jo={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ko={};var Zo=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Yo=n=>{let e;return n?e=n:typeof fetch>"u"?e=Ar:e=fetch,(...t)=>e(...t)},Qo=()=>typeof Headers>"u"?ni:Headers,Xo=(n,e,t)=>{const r=Yo(t),i=Qo();return(s,o)=>Zo(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};function ea(n){return n.replace(/\/$/,"")}function ta(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s)}}function ra(n){return Math.round(Date.now()/1e3)+n}function na(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ce=()=>typeof document<"u",Ae={tested:!1,writable:!1},ut=()=>{if(!ce())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ae.tested)return Ae.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ae.tested=!0,Ae.writable=!0}catch{Ae.tested=!0,Ae.writable=!1}return Ae.writable};function Xt(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const ci=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Qe(()=>Promise.resolve().then(()=>_t),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ia=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",De=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Et=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},er=async(n,e)=>{await n.removeItem(e)};function sa(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,o,a,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),c!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Kt{constructor(){this.promise=new Kt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Kt.promiseConstructor=Promise;function on(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(sa(r))}async function oa(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function aa(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function la(n){return("0"+n.toString(16)).substr(-2)}function Ne(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,la).join("")}async function ca(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function ua(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ue(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await ca(n);return ua(t)}class Cr extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function O(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class ha extends Cr{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function da(n){return O(n)&&n.name==="AuthApiError"}class ui extends Cr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Le extends Cr{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Me extends Le{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class tr extends Le{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Tt extends Le{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class kt extends Le{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class an extends Le{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pr extends Le{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function rr(n){return O(n)&&n.name==="AuthRetryableFetchError"}class fa extends Le{constructor(e,t,r){super(e,"AuthWeakPasswordError",t),this.reasons=r}}var ga=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Ge=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ma=[502,503,504];async function ln(n){if(!ia(n))throw new pr(Ge(n),0);if(ma.includes(n.status))throw new pr(Ge(n),n.status);let e;try{e=await n.json()}catch(t){throw new ui(Ge(t),t)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)?new fa(Ge(e),n.status,e.weak_password.reasons):new ha(Ge(e),n.status||500)}const pa=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function S(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await va(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function va(n,e,t,r,i,s){const o=pa(e,r,i,s);let a;try{a=await n(t,o)}catch(l){throw console.error(l),new pr(Ge(l),0)}if(a.ok||await ln(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await ln(l)}}function Re(n){var e;let t=null;wa(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=ra(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function cn(n){const e=Re(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function we(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function ya(n){return{data:n,error:null}}function _a(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=ga(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ba(n){return n}function wa(n){return n.access_token&&n.refresh_token&&n.expires_in}var Ea=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Ta{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=ci(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await S(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await S(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:we})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Ea(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await S(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:_a,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(O(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await S(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:we})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await S(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:ba});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);c[`${v}Page`]=m}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(O(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await S(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:we})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await S(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:we})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await S(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:we})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await S(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(O(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await S(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(O(t))return{data:null,error:t};throw t}}}const hi="0.0.0",ka="http://localhost:9999",Oa="supabase.auth.token",Sa={"X-Client-Info":`gotrue-js/${hi}`},un=10,Aa={getItem:n=>ut()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{ut()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{ut()&&globalThis.localStorage.removeItem(n)}};function hn(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Da(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fe={debug:!!(globalThis&&ut()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class di extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ia extends di{}async function Ra(n,e,t){Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Ia(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Fe.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}Da();const Ca={url:ka,storageKey:Oa,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sa,flowType:"implicit",debug:!1},ot=30*1e3,dn=3;async function fn(n,e,t){return await t()}class mt{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mt.nextInstanceID,mt.nextInstanceID+=1,this.instanceID>0&&ce()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Ca),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ta({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ci(i.fetch),this.lock=i.lock||fn,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,i.lock?this.lock=i.lock:ce()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Ra:this.lock=fn,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:ut()?this.storage=Aa:(this.memoryStorage={},this.storage=hn(this.memoryStorage)):(this.memoryStorage={},this.storage=hn(this.memoryStorage)),ce()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hi}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=ce()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return O(e)?{error:e}:{error:new ui("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,r,i;try{await this._removeSession();let s;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,g=null;if(this.flowType==="pkce"){const m=Ne();await De(this.storage,`${this.storageKey}-code-verifier`,m),f=await Ue(m),g=m===f?"plain":"s256"}s=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},xform:Re})}else if("phone"in e){const{phone:u,password:h,options:d}=e;s=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Re})}else throw new Tt("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(O(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:cn})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:cn})}else throw new Tt("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new tr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Et(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/"),{data:s,error:o}=await S(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Re});return await er(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new tr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await S(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Re}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new tr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,u=null;if(this.flowType==="pkce"){const d=Ne();await De(this.storage,`${this.storageKey}-code-verifier`,d),c=await Ue(d),u=d===c?"plain":"s256"}const{error:h}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Tt("You must provide either an email or phone number.")}catch(a){if(O(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await S(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Re});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(O(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{await this._removeSession();let s=null,o=null;if(this.flowType==="pkce"){const a=Ne();await De(this.storage,`${this.storageKey}-code-verifier`,a),s=await Ue(a),o=a===s?"plain":"s256"}return await S(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:ya})}catch(s){if(O(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Me;const{error:i}=await S(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(O(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await S(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await S(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Tt("You must provide either an email or phone number and a type")}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Et(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r)return{data:{session:e},error:null};const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:we}):await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:we})})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Me;const o=i.session;let a=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const h=Ne();await De(this.storage,`${this.storageKey}-code-verifier`,h),a=await Ue(h),l=h===a?"plain":"s256"}const{data:c,error:u}=await S(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:we});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return on(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Me;const t=Date.now()/1e3;let r=t,i=!0,s=null;const o=on(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(O(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Me;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!ce())throw new kt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new kt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new an("Not a valid PKCE flow url.");const t=Xt(window.location.href);if(e){if(!t.code)throw new an("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new kt(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!s||!a||!o||!c)throw new kt("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;l&&(d=parseInt(l));const f=d-u;f*1e3<=ot&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=d-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",g,d,u);const{data:m,error:v}=await this._getUser(s);if(v)throw v;const E={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:t.type},error:null}}catch(t){if(O(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=Xt(window.location.href);return!!(ce()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Xt(window.location.href),t=await Et(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(da(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=na(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){const s=Ne();await De(this.storage,`${this.storageKey}-code-verifier`,`${s}/PASSWORD_RECOVERY`),r=await Ue(s),i=s===r?"plain":"s256"}try{return await S(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(O(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(O(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:h,error:d}=s;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await S(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return ce()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(O(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await S(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(O(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await aa(async i=>(await oa(i*200),this._debug(t,"refreshing attempt",i),await S(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Re})),(i,s,o)=>o&&o.error&&rr(o.error)&&Date.now()+(i+1)*200-r<ot)}catch(r){if(this._debug(t,"error",r),O(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ce()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Et(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+un;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${un}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),rr(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Me;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Kt;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Me;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),O(s)){const o={session:null,error:s};return rr(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await De(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await er(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ce()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ot);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ot);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ot}ms, refresh threshold is ${dn} ticks`),i<=dn&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof di)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ce()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const s=Ne();await De(this.storage,`${this.storageKey}-code-verifier`,s);const o=await Ue(s),a=s===o?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",o,"method",a);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await S(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(O(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:l}=await S(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((i=a==null?void 0:a.totp)===null||i===void 0)&&i.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(O(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(O(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(O(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}mt.nextInstanceID=0;class Pa extends mt{constructor(e){super(e)}}var $a=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class La{constructor(e,t,r){var i,s,o,a,l,c,u,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=ea(e);this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g={db:Wo,realtime:Ko,auth:Object.assign(Object.assign({},Jo),{storageKey:f}),global:qo},m=ta(r??{},g);this.storageKey=(s=(i=m.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=m.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,(c=m.global)===null||c===void 0?void 0:c.fetch),this.fetch=Xo(t,this._getAccessToken.bind(this),(u=m.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},m.realtime)),this.rest=new Dr(`${d}/rest/v1`,{headers:this.headers,schema:(h=m.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new so(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new zo(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return $a(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,debug:a},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pa({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,debug:a,fetch:c})}_initRealtimeClient(e){return new Ro(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xa=(n,e,t)=>new La(n,e,t),ja="https://lwpcpixtrbcdhvktfvas.supabase.co",Na="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx3cGNwaXh0cmJjZGh2a3RmdmFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTY2NTk5NTYsImV4cCI6MjAzMjIzNTk1Nn0.MY2A7T7t9DjfJhRNADoLukGlOfOsXvX3TryKOxI8XDI",Ua=xa(ja,Na),Ma=async(n,e)=>{if(e.detail.info.trigger=="droppedIntoZone"){let t=e.detail.info.id,r=n;const i=await Ua.from("entries").insert([{artist_id:t,gen:r}],{returning:"minimal"}).select();if(i.error)throw console.log(i.error),new Error("insert failed");return!0}};function gn(n,e,t){const r=n.slice();return r[10]=e[t],r}function mn(n,e,t){const r=n.slice();return r[13]=e[t],r}function pn(n){let e,t,r=n[13].name+"",i,s;return{c(){e=A("div"),t=A("span"),i=Cn(r),this.h()},l(o){e=D(o,"DIV",{class:!0});var a=fe(e);t=D(a,"SPAN",{class:!0});var l=fe(t);i=Pn(l,r),l.forEach(w),a.forEach(w),this.h()},h(){p(t,"class","svelte-12yelae"),p(e,"class","custom-shadow-item svelte-12yelae")},m(o,a){V(o,e,a),I(e,t),I(t,i)},p(o,a){a&1&&r!==(r=o[13].name+"")&&$n(i,r)},i(o){o&&(s||Ln(()=>{s=Oi(e,Ui,{duration:200,easing:Ni}),s.start()}))},o:ee,d(o){o&&w(e)}}}function vn(n,e){let t,r,i,s,o=ee,a,l,c=e[13][tt]&&pn(e);return{key:n,first:null,c(){t=A("div"),r=A("div"),c&&c.c(),i=qe(),this.h()},l(u){t=D(u,"DIV",{class:!0});var h=fe(t);r=D(h,"DIV",{class:!0,style:!0});var d=fe(r);c&&c.l(d),d.forEach(w),i=We(h),h.forEach(w),this.h()},h(){p(r,"class","card svelte-12yelae"),ir(r,"background-image","url("+Pi+"/assets/image.jpg)"),p(t,"class","card-container svelte-12yelae"),this.first=t},m(u,h){V(u,t,h),I(t,r),c&&c.m(r,null),I(t,i),a||(l=[It(r,"click",nr),It(t,"click",function(){vr(nr(e[13]))&&nr(e[13]).apply(this,arguments)})],a=!0)},p(u,h){e=u,e[13][tt]?c?(c.p(e,h),h&1&&U(c,1)):(c=pn(e),c.c(),U(c,1),c.m(r,null)):c&&(c.d(1),c=null)},r(){s=t.getBoundingClientRect()},f(){Un(t),o()},a(){o(),o=Nn(t,s,Fn,{duration:At})},d(u){u&&w(t),c&&c.d(),a=!1,Rn(l)}}}function yn(n){let e,t,r=n[10].name+"",i;return{c(){e=A("div"),t=A("p"),i=Cn(r),this.h()},l(s){e=D(s,"DIV",{class:!0});var o=fe(e);t=D(o,"P",{class:!0});var a=fe(t);i=Pn(a,r),a.forEach(w),o.forEach(w),this.h()},h(){p(t,"class","svelte-12yelae"),p(e,"class","column-title svelte-12yelae")},m(s,o){V(s,e,o),I(e,t),I(t,i)},p(s,o){o&1&&r!==(r=s[10].name+"")&&$n(i,r)},d(s){s&&w(e)}}}function _n(n,e){let t,r,i=[],s=new Map,o,a,l,c,u,h=ee,d,f,g=ye(e[10].items);const m=b=>b[13].id;for(let b=0;b<g.length;b+=1){let _=mn(e,g,b),k=m(_);s.set(k,i[b]=vn(k,_))}function v(...b){return e[6](e[10],...b)}function E(...b){return e[7](e[10],...b)}let y=e[10].id>0&&yn(e);return{key:n,first:null,c(){t=A("div"),r=A("div");for(let b=0;b<i.length;b+=1)i[b].c();a=qe(),y&&y.c(),l=qe(),this.h()},l(b){t=D(b,"DIV",{class:!0});var _=fe(t);r=D(_,"DIV",{class:!0});var k=fe(r);for(let Z=0;Z<i.length;Z+=1)i[Z].l(k);k.forEach(w),a=We(_),y&&y.l(_),l=We(_),_.forEach(w),this.h()},h(){p(r,"class","column-content svelte-12yelae"),p(t,"class",c="column column-"+e[10].id+" "+(e[10].id==0?"column-artists":"column-gen")+" svelte-12yelae"),this.first=t},m(b,_){V(b,t,_),I(t,r);for(let k=0;k<i.length;k+=1)i[k]&&i[k].m(r,null);I(t,a),y&&y.m(t,null),I(t,l),d||(f=[pi(o=Qs.call(null,r,{centreDraggedOnCursor:!0,items:e[10].items,flipDurationMs:At,morphDisabled:!0,transformDraggedElement:bn,dropTargetStyle:e[3]})),It(r,"consider",v),It(r,"finalize",E)],d=!0)},p(b,_){if(e=b,_&1){g=ye(e[10].items);for(let k=0;k<i.length;k+=1)i[k].r();i=yr(i,_,m,1,e,g,s,r,jn,vn,null,mn);for(let k=0;k<i.length;k+=1)i[k].a()}o&&vr(o.update)&&_&1&&o.update.call(null,{centreDraggedOnCursor:!0,items:e[10].items,flipDurationMs:At,morphDisabled:!0,transformDraggedElement:bn,dropTargetStyle:e[3]}),e[10].id>0?y?y.p(e,_):(y=yn(e),y.c(),y.m(t,l)):y&&(y.d(1),y=null),_&1&&c!==(c="column column-"+e[10].id+" "+(e[10].id==0?"column-artists":"column-gen")+" svelte-12yelae")&&p(t,"class",c)},r(){u=t.getBoundingClientRect()},f(){Un(t),h()},a(){h(),h=Nn(t,u,Fn,{duration:At})},d(b){b&&w(t);for(let _=0;_<i.length;_+=1)i[_].d();y&&y.d(),d=!1,Rn(f)}}}function Fa(n){let e,t=[],r=new Map,i=ye(n[0]);const s=o=>o[10].id;for(let o=0;o<i.length;o+=1){let a=gn(n,i,o),l=s(a);r.set(l,t[o]=_n(l,a))}return{c(){e=A("section");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=D(o,"SECTION",{class:!0,style:!0});var a=fe(e);for(let l=0;l<t.length;l+=1)t[l].l(a);a.forEach(w),this.h()},h(){p(e,"class","board svelte-12yelae"),ir(e,"height",n[2].height+"px"),Dt(e,"experienceStarted",n[1])},m(o,a){V(o,e,a);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(o,[a]){if(a&57){i=ye(o[0]);for(let l=0;l<t.length;l+=1)t[l].r();t=yr(t,a,s,1,o,i,r,e,jn,_n,null,gn);for(let l=0;l<t.length;l+=1)t[l].a()}a&4&&ir(e,"height",o[2].height+"px"),a&2&&Dt(e,"experienceStarted",o[1])},i:ee,o:ee,d(o){o&&w(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}const At=200;async function nr(n){}function bn(n,e,t){}function Ba(n,e,t){let r;mi(n,Di,h=>t(2,r=h));let{columnItems:i}=e,{experienceStarted:s}=e,o={outline:"red solid 2px"};function a(h,d){const f=i.findIndex(g=>g.id===h);t(0,i[f].items=d.detail.items,i),t(0,i=[...i])}async function l(h,d){const f=i.findIndex(g=>g.id===h);t(0,i[f].items=d.detail.items,i),t(0,i=[...i]),await Ma(h,d)}const c=(h,d)=>a(h.id,d),u=(h,d)=>l(h.id,d);return n.$$set=h=>{"columnItems"in h&&t(0,i=h.columnItems),"experienceStarted"in h&&t(1,s=h.experienceStarted)},[i,s,r,o,a,l,c,u]}class Ga extends Ut{constructor(e){super(),Mt(this,e,Ba,Fa,Nt,{columnItems:0,experienceStarted:1})}}function wn(n,e,t){const r=n.slice();r[11]=e[t].type,r[12]=e[t].value,r[13]=e[t].component,r[16]=t;const i=r[16]==r[2];return r[14]=i,r}function En(n,e,t){const r=n.slice();return r[17]=e[t],r}function Tn(n){let e,t,r,i,s=n[4].indexOf(n[2])==-1,o;function a(u){n[8](u)}let l={duration:"0",$$slots:{default:[qa]},$$scope:{ctx:n}};n[2]!==void 0&&(l.current=n[2]),t=new Ii({props:l}),n[7](t),xn.push(()=>Si(t,"current",a));let c=s&&An(n);return{c(){e=A("article"),Je(t.$$.fragment),i=qe(),c&&c.c(),this.h()},l(u){e=D(u,"ARTICLE",{class:!0});var h=fe(e);Ke(t.$$.fragment,h),i=We(h),c&&c.l(h),h.forEach(w),this.h()},h(){p(e,"class","svelte-m8gftx")},m(u,h){V(u,e,h),Ze(t,e,null),I(e,i),c&&c.m(e,null),o=!0},p(u,h){const d={};h&1048581&&(d.$$scope={dirty:h,ctx:u}),!r&&h&4&&(r=!0,d.current=u[2],yi(()=>r=!1)),t.$set(d),h&4&&(s=u[4].indexOf(u[2])==-1),s?c?(c.p(u,h),h&4&&U(c,1)):(c=An(u),c.c(),U(c,1),c.m(e,null)):c&&(Ft(),te(c,1,1,()=>{c=null}),Bt())},i(u){o||(U(t.$$.fragment,u),U(c),o=!0)},o(u){te(t.$$.fragment,u),te(c),o=!1},d(u){u&&w(e),n[7](null),Ye(t),c&&c.d()}}}function za(n){let e,t;return e=new Ga({props:{experienceStarted:n[0],columnItems:n[5]}}),{c(){Je(e.$$.fragment)},l(r){Ke(e.$$.fragment,r)},m(r,i){Ze(e,r,i),t=!0},p(r,i){const s={};i&1&&(s.experienceStarted=r[0]),e.$set(s)},i(r){t||(U(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Ye(e,r)}}}function Ha(n){let e,t=ye(n[12]),r=[];for(let i=0;i<t.length;i+=1)r[i]=On(En(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=K()},l(i){for(let s=0;s<r.length;s+=1)r[s].l(i);e=K()},m(i,s){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(i,s);V(i,e,s)},p(i,s){if(s&4){t=ye(i[12]);let o;for(o=0;o<t.length;o+=1){const a=En(i,t,o);r[o]?r[o].p(a,s):(r[o]=On(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},i:ee,o:ee,d(i){i&&w(e),In(r,i)}}}function kn(n){let e,t,r=n[17].value+"",i,s;return{c(){e=A("p"),t=new _i(!1),this.h()},l(o){e=D(o,"P",{class:!0});var a=fe(e);t=bi(a,!1),a.forEach(w),this.h()},h(){t.a=null,p(e,"class","text svelte-m8gftx"),Dt(e,"isActive",n[14])},m(o,a){V(o,e,a),t.m(r,e),s=!0},p(o,a){(!s||a&4)&&Dt(e,"isActive",o[14])},i(o){s||(o&&Ln(()=>{s&&(i||(i=xr(e,Ur,{y:20,duration:500},!0)),i.run(1))}),s=!0)},o(o){o&&(i||(i=xr(e,Ur,{y:20,duration:500},!1)),i.run(0)),s=!1},d(o){o&&w(e),o&&i&&i.end()}}}function On(n){let e,t=n[14]&&kn(n);return{c(){t&&t.c(),e=K()},l(r){t&&t.l(r),e=K()},m(r,i){t&&t.m(r,i),V(r,e,i)},p(r,i){r[14]?t?(t.p(r,i),i&4&&U(t,1)):(t=kn(r),t.c(),U(t,1),t.m(e.parentNode,e)):t&&(Ft(),te(t,1,1,()=>{t=null}),Bt())},d(r){r&&w(e),t&&t.d(r)}}}function Va(n){let e,t,r,i;const s=[Ha,za],o=[];function a(l,c){return l[11]==="section"?0:l[11]=="voting"?1:-1}return~(e=a(n))&&(t=o[e]=s[e](n)),{c(){t&&t.c(),r=K()},l(l){t&&t.l(l),r=K()},m(l,c){~e&&o[e].m(l,c),V(l,r,c),i=!0},p(l,c){t&&t.p(l,c)},i(l){i||(U(t),i=!0)},o(l){te(t),i=!1},d(l){l&&w(r),~e&&o[e].d(l)}}}function Sn(n,e){let t,r,i,s;return r=new Ci({props:{index:e[16],$$slots:{default:[Va]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=K(),Je(r.$$.fragment),i=qe(),this.h()},l(o){t=K(),Ke(r.$$.fragment,o),i=We(o),this.h()},h(){this.first=t},m(o,a){V(o,t,a),Ze(r,o,a),V(o,i,a),s=!0},p(o,a){e=o;const l={};a&1048581&&(l.$$scope={dirty:a,ctx:e}),r.$set(l)},i(o){s||(U(r.$$.fragment,o),s=!0)},o(o){te(r.$$.fragment,o),s=!1},d(o){o&&(w(t),w(i)),Ye(r,o)}}}function qa(n){let e=[],t=new Map,r,i,s=ye(ht.body.index||[]);const o=a=>a[16];for(let a=0;a<s.length;a+=1){let l=wn(n,s,a),c=o(l);t.set(c,e[a]=Sn(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=K()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);r=K()},m(a,l){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,l);V(a,r,l),i=!0},p(a,l){l&37&&(s=ye(ht.body.index||[]),Ft(),e=yr(e,l,o,1,a,s,t,r.parentNode,Ai,Sn,r,wn),Bt())},i(a){if(!i){for(let l=0;l<s.length;l+=1)U(e[l]);i=!0}},o(a){for(let l=0;l<e.length;l+=1)te(e[l]);i=!1},d(a){a&&w(r);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function An(n){let e,t;return e=new Ri({props:{debug:!1,full:!0,directions:n[2]===0?["right"]:["left","right"],size:n[2]===0?"100%":["33%","67%"],enableKeyboard:!0,marginTop:0,showArrows:!0}}),e.$on("tap",n[6]),{c(){Je(e.$$.fragment)},l(r){Ke(e.$$.fragment,r)},m(r,i){Ze(e,r,i),t=!0},p(r,i){const s={};i&4&&(s.directions=r[2]===0?["right"]:["left","right"]),i&4&&(s.size=r[2]===0?"100%":["33%","67%"]),e.$set(s)},i(r){t||(U(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Ye(e,r)}}}function Wa(n){let e,t,r=n[3]&&Tn(n);return{c(){r&&r.c(),e=K()},l(i){r&&r.l(i),e=K()},m(i,s){r&&r.m(i,s),V(i,e,s),t=!0},p(i,[s]){i[3]?r?(r.p(i,s),s&8&&U(r,1)):(r=Tn(i),r.c(),U(r,1),r.m(e.parentNode,e)):r&&(Ft(),te(r,1,1,()=>{r=null}),Bt())},i(i){t||(U(r),t=!0)},o(i){te(r),t=!1},d(i){i&&w(e),r&&r.d(i)}}}function Ja(n,e,t){let r,i=0,s=[2],o=[{id:0,name:"artists",items:Mi},{id:1,name:"1st",items:[]},{id:2,name:"2nd",items:[]},{id:3,name:"3rd",items:[]},{id:4,name:"4th",items:[]},{id:5,name:"5th",items:[]},{id:6,name:"I don't know",items:[]}],a=!1,l=!1;const c=({detail:d})=>{d==="right"?r.next():r.prev(),window.scrollTo(0,0)};vi(async()=>{t(3,l=!0),console.log(ht)});function u(d){xn[d?"unshift":"push"](()=>{r=d,t(1,r)})}function h(d){i=d,t(2,i)}return n.$$.update=()=>{n.$$.dirty&1&&console.log(a)},[a,r,i,l,s,o,c,u,h]}class Ka extends Ut{constructor(e){super(),Mt(this,e,Ja,Wa,Nt,{})}}function Za(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.17.0"),console.log("build: 2024-06-14-08:56"),console.log("--- --- --- --- --- ---")}function Ya(n){let e,t,r,i;return e=new ji({props:{title:n[1],description:n[2],url:n[3],preloadFont:n[0],keywords:n[4]}}),r=new Ka({}),{c(){Je(e.$$.fragment),t=qe(),Je(r.$$.fragment)},l(s){Ke(e.$$.fragment,s),t=We(s),Ke(r.$$.fragment,s)},m(s,o){Ze(e,s,o),V(s,t,o),Ze(r,s,o),i=!0},p:ee,i(s){i||(U(e.$$.fragment,s),U(r.$$.fragment,s),i=!0)},o(s){te(e.$$.fragment,s),te(r.$$.fragment,s),i=!1},d(s){s&&w(t),Ye(e,s),Ye(r,s)}}}function Qa(n,e,t){let{data:r}=e;Za();const i=[],{title:s,description:o,url:a,keywords:l}=ht;return Lr("copy",ht),Lr("data",r.data),n.$$set=c=>{"data"in c&&t(5,r=c.data)},[i,s,o,a,l,r]}class sl extends Ut{constructor(e){super(),Mt(this,e,Qa,Ya,Nt,{data:5})}}export{sl as component};
