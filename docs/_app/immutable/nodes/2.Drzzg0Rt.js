function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../chunks/browser.7UWsncp0.js","../chunks/misc.BHNFGAyF.js","../chunks/scheduler.CrLq1Kib.js","../chunks/index.BEMEOOzR.js","../chunks/index.ng7JIv97.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{s as Q,e as O,j as D,O as Vs,c as A,a as I,d as p,l as U,P as Ks,Y as ye,p as v,i as $,f as S,n as ne,W as fe,o as et,t as x,b as G,Z as Et,g as me,_ as xt,C as wr,Q as Te,A as tt,$ as kr,R as Oe,S as Ae,T as je,a0 as Tt,r as Qe,a1 as re,q as z,a2 as Sr,z as $t,a3 as Er,h as se,a4 as ie,a5 as ze,k as X,a6 as Be,a7 as ut,a8 as Gt,a9 as _e,aa as de,y as Ys,ab as Tr,U as ge,ac as Ht,ad as Xs,V as Or}from"../chunks/scheduler.CrLq1Kib.js";import{S as Z,i as ee,a as E,t as j,b as W,d as J,m as V,e as K,g as oe,c as ae,f as Qs,h as Ar,j as Zs,k as Wt}from"../chunks/index.BEMEOOzR.js";import{e as H,w as jr,c as Ke,i as lt,t as ct,a as er,d as Ir,u as $r,l as Pr,s as Ue,o as Cr,M as Rr}from"../chunks/misc.BHNFGAyF.js";import{b as pe}from"../chunks/paths.lajeP5yQ.js";import{w as We}from"../chunks/index.ng7JIv97.js";import{_ as Me}from"../chunks/preload-helper.BQ24v_F8.js";function xe(n,e){const t={},s={},r={$$scope:1};let i=n.length;for(;i--;){const o=n[i],a=e[i];if(a){for(const l in o)l in a||(s[l]=1);for(const l in a)r[l]||(t[l]=a[l],r[l]=1);n[i]=a}else for(const l in o)r[l]=1}for(const o in s)o in t||(t[o]=void 0);return t}function dt(n){return typeof n=="object"&&n!==null?n:{}}function Jt(n,e,t){const s=n.slice();return s[5]=e[t],s}function Vt(n,e,t){const s=n.slice();s[8]=e[t].hed,s[2]=e[t].url,s[9]=e[t].image;const r=s[2].startsWith("http")?s[2]:`https://pudding.cool/${s[2]}`;return s[10]=r,s}function Kt(n){let e,t,s,r,i,o,a=n[8]+"",l,c,u;return{c(){e=O("div"),t=O("a"),s=O("img"),i=D(),o=O("span"),l=x(a),u=D(),this.h()},l(d){e=A(d,"DIV",{class:!0});var h=I(e);t=A(h,"A",{href:!0,class:!0});var f=I(t);s=A(f,"IMG",{src:!0,alt:!0}),i=U(f),o=A(f,"SPAN",{class:!0});var _=I(o);l=G(_,a),_.forEach(p),f.forEach(p),u=U(h),h.forEach(p),this.h()},h(){Et(s.src,r="https://pudding.cool/common/assets/thumbnails/640/"+n[9]+".jpg")||v(s,"src",r),v(s,"alt","thumbnail"),v(o,"class","svelte-13ez18p"),v(t,"href",c=n[10]),v(t,"class","svelte-13ez18p"),v(e,"class","story svelte-13ez18p")},m(d,h){$(d,e,h),S(e,t),S(t,s),S(t,i),S(t,o),S(o,l),S(e,u)},p(d,h){h&1&&!Et(s.src,r="https://pudding.cool/common/assets/thumbnails/640/"+d[9]+".jpg")&&v(s,"src",r),h&1&&a!==(a=d[8]+"")&&me(l,a),h&1&&c!==(c=d[10])&&v(t,"href",c)},d(d){d&&p(e)}}}function Yt(n){let e,t,s,r=n[5].name.toUpperCase()+"",i,o;return{c(){e=O("li"),t=O("a"),s=O("span"),i=x(r),o=D(),this.h()},l(a){e=A(a,"LI",{class:!0});var l=I(e);t=A(l,"A",{href:!0,target:!0,class:!0});var c=I(t);s=A(c,"SPAN",{class:!0});var u=I(s);i=G(u,r),u.forEach(p),c.forEach(p),o=U(l),l.forEach(p),this.h()},h(){v(s,"class","svelte-13ez18p"),v(t,"href",n[5].url),v(t,"target","_self"),v(t,"class","svelte-13ez18p"),v(e,"class","svelte-13ez18p")},m(a,l){$(a,e,l),S(e,t),S(t,s),S(s,i),S(e,o)},p:ne,d(a){a&&p(e)}}}function Lr(n){let e,t,s,r,i,o,a,l,c=`<a href="https://pudding.cool" target="_self" class="svelte-13ez18p">The Pudding</a>
			is a digital publication that explains ideas debated in culture with visual
			essays.`,u,d,h,f=H(n[0]),_=[];for(let g=0;g<f.length;g+=1)_[g]=Kt(Vt(n,f,g));let m=H(n[1]),y=[];for(let g=0;g<m.length;g+=1)y[g]=Yt(Jt(n,m,g));return{c(){e=O("footer"),t=O("section");for(let g=0;g<_.length;g+=1)_[g].c();s=D(),r=O("section"),i=O("div"),o=new Vs(!1),a=D(),l=O("p"),l.innerHTML=c,u=D(),d=O("section"),h=O("ul");for(let g=0;g<y.length;g+=1)y[g].c();this.h()},l(g){e=A(g,"FOOTER",{class:!0});var k=I(e);t=A(k,"SECTION",{class:!0});var w=I(t);for(let C=0;C<_.length;C+=1)_[C].l(w);w.forEach(p),s=U(k),r=A(k,"SECTION",{class:!0});var T=I(r);i=A(T,"DIV",{class:!0});var b=I(i);o=Ks(b,!1),b.forEach(p),a=U(T),l=A(T,"P",{"data-svelte-h":!0}),ye(l)!=="svelte-qqs5dy"&&(l.innerHTML=c),T.forEach(p),u=U(k),d=A(k,"SECTION",{class:!0});var P=I(d);h=A(P,"UL",{class:!0});var B=I(h);for(let C=0;C<y.length;C+=1)y[C].l(B);B.forEach(p),P.forEach(p),k.forEach(p),this.h()},h(){v(t,"class","stories svelte-13ez18p"),o.a=null,v(i,"class","wordmark svelte-13ez18p"),v(r,"class","about svelte-13ez18p"),v(h,"class","svelte-13ez18p"),v(d,"class","links svelte-13ez18p"),v(e,"class","svelte-13ez18p")},m(g,k){$(g,e,k),S(e,t);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(t,null);S(e,s),S(e,r),S(r,i),o.m(jr,i),S(r,a),S(r,l),S(e,u),S(e,d),S(d,h);for(let w=0;w<y.length;w+=1)y[w]&&y[w].m(h,null)},p(g,[k]){if(k&1){f=H(g[0]);let w;for(w=0;w<f.length;w+=1){const T=Vt(g,f,w);_[w]?_[w].p(T,k):(_[w]=Kt(T),_[w].c(),_[w].m(t,null))}for(;w<_.length;w+=1)_[w].d(1);_.length=f.length}if(k&2){m=H(g[1]);let w;for(w=0;w<m.length;w+=1){const T=Jt(g,m,w);y[w]?y[w].p(T,k):(y[w]=Yt(T),y[w].c(),y[w].m(h,null))}for(;w<y.length;w+=1)y[w].d(1);y.length=m.length}},i:ne,o:ne,d(g){g&&p(e),fe(_,g),fe(y,g)}}}function Nr(n,e,t){let s,r=[];const o=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`,a=[{name:"about",url:"https://pudding.cool/about"},{name:"facebook",url:"https://facebook.com/pudding.viz/"},{name:"twitter",url:"https://twitter.com/puddingviz/"},{name:"instagram",url:"https://www.instagram.com/the.pudding"},{name:"patreon",url:"https://patreon.com/thepudding/"},{name:"privacy",url:"https://pudding.cool/privacy/"},{name:"newsletter",url:"https://thepuddingmail.substack.com"},{name:"rss",url:"https://pudding.cool/feed/index.xml"}];return et(async()=>{s=window.location.href;const c=await(await fetch(o)).json();t(0,r=c.filter(u=>!s.includes(u.url)).slice(0,4))}),[r,a,o]}class Dr extends Z{constructor(e){super(),ee(this,e,Nr,Lr,Q,{})}}function tr(n){const e=n-1;return e*e*e+1}function Ur(n,{delay:e=0,duration:t=400,easing:s=wr}={}){const r=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:s,css:i=>`opacity: ${i*r}`}}function Xt(n,{delay:e=0,duration:t=400,easing:s=tr,x:r=0,y:i=0,opacity:o=0}={}){const a=getComputedStyle(n),l=+a.opacity,c=a.transform==="none"?"":a.transform,u=l*(1-o),[d,h]=xt(r),[f,_]=xt(i);return{delay:e,duration:t,easing:s,css:(m,y)=>`
			transform: ${c} translate(${(1-m)*d}${h}, ${(1-m)*f}${_});
			opacity: ${l-u*y}`}}function Qt(n,{delay:e=0,duration:t=400,easing:s=tr,axis:r="y"}={}){const i=getComputedStyle(n),o=+i.opacity,a=r==="y"?"height":"width",l=parseFloat(i[a]),c=r==="y"?["top","bottom"]:["left","right"],u=c.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),d=parseFloat(i[`padding${u[0]}`]),h=parseFloat(i[`padding${u[1]}`]),f=parseFloat(i[`margin${u[0]}`]),_=parseFloat(i[`margin${u[1]}`]),m=parseFloat(i[`border${u[0]}Width`]),y=parseFloat(i[`border${u[1]}Width`]);return{delay:e,duration:t,easing:s,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*o};${a}: ${g*l}px;padding-${c[0]}: ${g*d}px;padding-${c[1]}: ${g*h}px;margin-${c[0]}: ${g*f}px;margin-${c[1]}: ${g*_}px;border-${c[0]}-width: ${g*m}px;border-${c[1]}-width: ${g*y}px;`}}const Fr={title:"Title TK",description:"Description tk."},zr={index:[{type:"section",value:[{type:"text",value:"This is an experiment to define <span class=intro-highlight>K-pop</span> generations."}]},{type:"section",value:[{type:"text",value:"We want <span class=intro-highlight>fans</span> to have the opportunity to <span class=intro-highlight>vote</span> and determine the answers."}]},{type:"voting",value:{}}]},ht={meta:Fr,body:zr};function Br(n){let e,t,s,r,i;const o=n[26].default,a=Te(o,n,n[25],null);return{c(){e=O("section"),t=O("div"),a&&a.c(),this.h()},l(l){e=A(l,"SECTION",{"aria-label":!0,class:!0});var c=I(e);t=A(c,"DIV",{class:!0,style:!0});var u=I(t);a&&a.l(u),u.forEach(p),c.forEach(p),this.h()},h(){v(t,"class","slides svelte-1ceqw5z"),v(t,"style",n[5]),v(e,"aria-label","carousel"),v(e,"class",s="slider "+n[0]+" svelte-1ceqw5z"),tt(()=>n[29].call(e))},m(l,c){$(l,e,c),S(e,t),a&&a.m(t,null),n[27](t),n[28](e),r=kr(e,n[29].bind(e)),i=!0},p(l,c){a&&a.p&&(!i||c[0]&33554432)&&Oe(a,o,l,l[25],i?je(o,l[25],c,null):Ae(l[25]),null),(!i||c[0]&32)&&v(t,"style",l[5]),(!i||c[0]&1&&s!==(s="slider "+l[0]+" svelte-1ceqw5z"))&&v(e,"class",s)},i(l){i||(E(a,l),i=!0)},o(l){j(a,l),i=!1},d(l){l&&p(e),a&&a.d(l),n[27](null),n[28](null),r()}}}function Mr(n,e,t){let s,r,i,o,a,l,c,u,d,h,f,{$$slots:_={},$$scope:m}=e,{direction:y="horizontal"}=e,{duration:g="500ms"}=e,{timing:k="ease"}=e,{count:w=0}=e,{current:T=0}=e;const b=()=>mt(1),P=()=>mt(-1),B=q=>mt(q,!0);let C=0,R=0,F,Y,He=!1,rt,it,Ut,Ft=We(),zt=We(),Bt=We(),Mt=We(),qt=We();const mt=(q,br)=>{if(!He)return!1;const yr=br?q:R+q;t(14,R=Math.max(0,Math.min(C-1,yr))),t(6,T=R)},gr=q=>{He=q[0].isIntersecting};et(()=>{t(13,C=it.children.length),t(7,w=C),qt.set(w),Ut=new IntersectionObserver(gr,{root:null,rootMargin:"-1px"}),Ut.observe(rt),t(2,Y),t(1,F)});function mr(q){Qe[q?"unshift":"push"](()=>{it=q,t(4,it)})}function pr(q){Qe[q?"unshift":"push"](()=>{rt=q,t(3,rt)})}function vr(){F=this.clientWidth,Y=this.clientHeight,t(1,F),t(2,Y)}return n.$$set=q=>{"direction"in q&&t(0,y=q.direction),"duration"in q&&t(8,g=q.duration),"timing"in q&&t(9,k=q.timing),"count"in q&&t(7,w=q.count),"current"in q&&t(6,T=q.current),"$$scope"in q&&t(25,m=q.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8195&&t(24,s=y==="horizontal"?`${C*F}px`:"100%"),n.$$.dirty[0]&8197&&t(23,r=y==="vertical"?`${C*Y}px`:"100%"),n.$$.dirty[0]&16387&&t(22,i=y==="horizontal"?`${R*F*-1}px`:0),n.$$.dirty[0]&16389&&t(21,o=y==="vertical"?`${R*Y*-1}px`:0),n.$$.dirty[0]&16777216&&t(20,a=`width: ${s};`),n.$$.dirty[0]&8388608&&t(19,l=`height: ${r};`),n.$$.dirty[0]&6291456&&t(18,c=`transform: translate3d(${i}, ${o}, 0);`),n.$$.dirty[0]&256&&t(17,u=`transition-duration: ${g};`),n.$$.dirty[0]&512&&t(16,d=`transition-timing-function: ${k};`),n.$$.dirty[0]&2031616&&t(5,h=`${a} ${l} ${c} ${u} ${d}`),n.$$.dirty[0]&1&&Ft.set(y),n.$$.dirty[0]&2&&zt.set(F),n.$$.dirty[0]&4&&Bt.set(Y),n.$$.dirty[0]&64&&Mt.set(T),n.$$.dirty[0]&32768&&Tt("Slider",f)},t(15,f={dir:Ft,cur:Mt,w:zt,h:Bt,count:qt}),[y,F,Y,rt,it,h,T,w,g,k,b,P,B,C,R,f,d,u,c,l,a,o,i,r,s,m,_,mr,pr,vr]}class qr extends Z{constructor(e){super(),ee(this,e,Mr,Br,Q,{direction:0,duration:8,timing:9,count:7,current:6,next:10,prev:11,jump:12},null,[-1,-1])}get next(){return this.$$.ctx[10]}get prev(){return this.$$.ctx[11]}get jump(){return this.$$.ctx[12]}}function xr(n,e){const t=["a","button","input","textarea","select","details","[tabindex]:not([tabindex='-1'])"],s=o=>{i.forEach(a=>{o&&o.disable?a.setAttribute("tabindex",-1):a.removeAttribute("tabindex")})},r=t.join(", "),i=[...n.querySelectorAll(r)];return s(e),{update(o){s(o)},destroy(){i.forEach(o=>o.removeAttribute("tabindex"))}}}function Gr(n){let e,t,s,r,i,o,a,l;const c=n[17].default,u=Te(c,n,n[16],null);return{c(){e=O("div"),u&&u.c(),this.h()},l(d){e=A(d,"DIV",{id:!0,class:!0,role:!0,"aria-label":!0,"aria-current":!0});var h=I(e);u&&u.l(h),h.forEach(p),this.h()},h(){v(e,"id",t="slide-"+n[0]),v(e,"class",s="slide "+n[1]+" svelte-1h814z3"),v(e,"role","group"),v(e,"aria-label",r="slide "+(n[0]+1)+" of "+n[6]),v(e,"aria-current",n[2]),re(e,"visible",n[2]),z(e,"width",n[5]),z(e,"height",n[4])},m(d,h){$(d,e,h),u&&u.m(e,null),o=!0,a||(l=Sr(i=xr.call(null,e,{disable:n[3]})),a=!0)},p(d,[h]){u&&u.p&&(!o||h&65536)&&Oe(u,c,d,d[16],o?je(c,d[16],h,null):Ae(d[16]),null),(!o||h&1&&t!==(t="slide-"+d[0]))&&v(e,"id",t),(!o||h&2&&s!==(s="slide "+d[1]+" svelte-1h814z3"))&&v(e,"class",s),(!o||h&65&&r!==(r="slide "+(d[0]+1)+" of "+d[6]))&&v(e,"aria-label",r),(!o||h&4)&&v(e,"aria-current",d[2]),i&&$t(i.update)&&h&8&&i.update.call(null,{disable:d[3]}),(!o||h&6)&&re(e,"visible",d[2]),h&32&&z(e,"width",d[5]),h&16&&z(e,"height",d[4])},i(d){o||(E(u,d),o=!0)},o(d){j(u,d),o=!1},d(d){d&&p(e),u&&u.d(d),a=!1,l()}}}function Hr(n,e,t){let s,r,i,o,a,l,c,u,d,{$$slots:h={},$$scope:f}=e;const{dir:_,cur:m,w:y,h:g,count:k}=Er("Slider");se(n,_,b=>t(14,c=b)),se(n,m,b=>t(12,a=b)),se(n,y,b=>t(15,u=b)),se(n,g,b=>t(13,l=b)),se(n,k,b=>t(6,d=b));let{index:w}=e,{cls:T=""}=e;return n.$$set=b=>{"index"in b&&t(0,w=b.index),"cls"in b&&t(1,T=b.cls),"$$scope"in b&&t(16,f=b.$$scope)},n.$$.update=()=>{n.$$.dirty&49152&&t(5,s=c==="horizontal"?`${u}px`:"100%"),n.$$.dirty&24576&&t(4,r=c==="vertical"?`${l}px`:"100%"),n.$$.dirty&4097&&t(2,i=w===a),n.$$.dirty&4&&t(3,o=!i)},[w,T,i,o,r,s,d,_,m,y,g,k,a,l,c,u,f,h]}class Wr extends Z{constructor(e){super(),ee(this,e,Hr,Gr,Q,{index:0,cls:1})}}/**
 * @license lucide-svelte v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},Zt=Jr;function es(n,e,t){const s=n.slice();return s[10]=e[t][0],s[11]=e[t][1],s}function pt(n){let e,t=[n[11]],s={};for(let r=0;r<t.length;r+=1)s=ie(s,t[r]);return{c(){e=ze(n[10]),this.h()},l(r){e=Be(r,n[10],{}),I(e).forEach(p),this.h()},h(){ut(e,s)},m(r,i){$(r,e,i)},p(r,i){ut(e,s=xe(t,[i&32&&r[11]]))},d(r){r&&p(e)}}}function ts(n){let e=n[10],t,s=n[10]&&pt(n);return{c(){s&&s.c(),t=X()},l(r){s&&s.l(r),t=X()},m(r,i){s&&s.m(r,i),$(r,t,i)},p(r,i){r[10]?e?Q(e,r[10])?(s.d(1),s=pt(r),e=r[10],s.c(),s.m(t.parentNode,t)):s.p(r,i):(s=pt(r),e=r[10],s.c(),s.m(t.parentNode,t)):e&&(s.d(1),s=null,e=r[10])},d(r){r&&p(t),s&&s.d(r)}}}function Vr(n){let e,t,s,r,i,o=H(n[5]),a=[];for(let h=0;h<o.length;h+=1)a[h]=ts(es(n,o,h));const l=n[9].default,c=Te(l,n,n[8],null);let u=[Zt,n[6],{width:n[2]},{height:n[2]},{stroke:n[1]},{"stroke-width":s=n[4]?Number(n[3])*24/Number(n[2]):n[3]},{class:r=`lucide-icon lucide lucide-${n[0]} ${n[7].class??""}`}],d={};for(let h=0;h<u.length;h+=1)d=ie(d,u[h]);return{c(){e=ze("svg");for(let h=0;h<a.length;h+=1)a[h].c();t=X(),c&&c.c(),this.h()},l(h){e=Be(h,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var f=I(e);for(let _=0;_<a.length;_+=1)a[_].l(f);t=X(),c&&c.l(f),f.forEach(p),this.h()},h(){ut(e,d)},m(h,f){$(h,e,f);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(e,null);S(e,t),c&&c.m(e,null),i=!0},p(h,[f]){if(f&32){o=H(h[5]);let _;for(_=0;_<o.length;_+=1){const m=es(h,o,_);a[_]?a[_].p(m,f):(a[_]=ts(m),a[_].c(),a[_].m(e,t))}for(;_<a.length;_+=1)a[_].d(1);a.length=o.length}c&&c.p&&(!i||f&256)&&Oe(c,l,h,h[8],i?je(l,h[8],f,null):Ae(h[8]),null),ut(e,d=xe(u,[Zt,f&64&&h[6],(!i||f&4)&&{width:h[2]},(!i||f&4)&&{height:h[2]},(!i||f&2)&&{stroke:h[1]},(!i||f&28&&s!==(s=h[4]?Number(h[3])*24/Number(h[2]):h[3]))&&{"stroke-width":s},(!i||f&129&&r!==(r=`lucide-icon lucide lucide-${h[0]} ${h[7].class??""}`))&&{class:r}]))},i(h){i||(E(c,h),i=!0)},o(h){j(c,h),i=!1},d(h){h&&p(e),fe(a,h),c&&c.d(h)}}}function Kr(n,e,t){const s=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let r=Gt(e,s),{$$slots:i={},$$scope:o}=e,{name:a}=e,{color:l="currentColor"}=e,{size:c=24}=e,{strokeWidth:u=2}=e,{absoluteStrokeWidth:d=!1}=e,{iconNode:h}=e;return n.$$set=f=>{t(7,e=ie(ie({},e),_e(f))),t(6,r=Gt(e,s)),"name"in f&&t(0,a=f.name),"color"in f&&t(1,l=f.color),"size"in f&&t(2,c=f.size),"strokeWidth"in f&&t(3,u=f.strokeWidth),"absoluteStrokeWidth"in f&&t(4,d=f.absoluteStrokeWidth),"iconNode"in f&&t(5,h=f.iconNode),"$$scope"in f&&t(8,o=f.$$scope)},e=_e(e),[a,l,c,u,d,h,r,e,o,i]}class ft extends Z{constructor(e){super(),ee(this,e,Kr,Vr,Q,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function Yr(n){let e;const t=n[2].default,s=Te(t,n,n[3],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&8)&&Oe(s,t,r,r[3],e?je(t,r[3],i,null):Ae(r[3]),null)},i(r){e||(E(s,r),e=!0)},o(r){j(s,r),e=!1},d(r){s&&s.d(r)}}}function Xr(n){let e,t;const s=[{name:"chevron-left"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[Yr]},$$scope:{ctx:n}};for(let i=0;i<s.length;i+=1)r=ie(r,s[i]);return e=new ft({props:r}),{c(){W(e.$$.fragment)},l(i){J(e.$$.fragment,i)},m(i,o){V(e,i,o),t=!0},p(i,[o]){const a=o&3?xe(s,[s[0],o&2&&dt(i[1]),o&1&&{iconNode:i[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){K(e,i)}}}function Qr(n,e,t){let{$$slots:s={},$$scope:r}=e;const i=[["path",{d:"m15 18-6-6 6-6"}]];return n.$$set=o=>{t(1,e=ie(ie({},e),_e(o))),"$$scope"in o&&t(3,r=o.$$scope)},e=_e(e),[i,e,s,r]}class Zr extends Z{constructor(e){super(),ee(this,e,Qr,Xr,Q,{})}}const ei=Zr;function ti(n){let e;const t=n[2].default,s=Te(t,n,n[3],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&8)&&Oe(s,t,r,r[3],e?je(t,r[3],i,null):Ae(r[3]),null)},i(r){e||(E(s,r),e=!0)},o(r){j(s,r),e=!1},d(r){s&&s.d(r)}}}function si(n){let e,t;const s=[{name:"chevron-right"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[ti]},$$scope:{ctx:n}};for(let i=0;i<s.length;i+=1)r=ie(r,s[i]);return e=new ft({props:r}),{c(){W(e.$$.fragment)},l(i){J(e.$$.fragment,i)},m(i,o){V(e,i,o),t=!0},p(i,[o]){const a=o&3?xe(s,[s[0],o&2&&dt(i[1]),o&1&&{iconNode:i[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){K(e,i)}}}function ri(n,e,t){let{$$slots:s={},$$scope:r}=e;const i=[["path",{d:"m9 18 6-6-6-6"}]];return n.$$set=o=>{t(1,e=ie(ie({},e),_e(o))),"$$scope"in o&&t(3,r=o.$$scope)},e=_e(e),[i,e,s,r]}class ii extends Z{constructor(e){super(),ee(this,e,ri,si,Q,{})}}const sr=ii;function ss(n,e,t){const s=n.slice();return s[18]=e[t],s}function rs(n){let e,t,s,r;const i=[oi,ni],o=[];function a(l,c){return l[18]==="left"?0:l[18]==="right"?1:-1}return~(t=a(n))&&(s=o[t]=i[t](n)),{c(){e=O("span"),s&&s.c(),this.h()},l(l){e=A(l,"SPAN",{class:!0,style:!0});var c=I(e);s&&s.l(c),c.forEach(p),this.h()},h(){v(e,"class","arrows svelte-1sf6xr9"),z(e,"font-size",n[4])},m(l,c){$(l,e,c),~t&&o[t].m(e,null),r=!0},p(l,c){let u=t;t=a(l),t===u?~t&&o[t].p(l,c):(s&&(oe(),j(o[u],1,1,()=>{o[u]=null}),ae()),~t?(s=o[t],s?s.p(l,c):(s=o[t]=i[t](l),s.c()),E(s,1),s.m(e,null)):s=null),(!r||c&16)&&z(e,"font-size",l[4])},i(l){r||(E(s),r=!0)},o(l){j(s),r=!1},d(l){l&&p(e),~t&&o[t].d()}}}function ni(n){let e,t="Next",s,r,i;return r=new sr({props:{color:n[5],strokeWidth:n[6]}}),{c(){e=O("span"),e.textContent=t,s=D(),W(r.$$.fragment),this.h()},l(o){e=A(o,"SPAN",{class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-gbjbtx"&&(e.textContent=t),s=U(o),J(r.$$.fragment,o),this.h()},h(){v(e,"class","next svelte-1sf6xr9")},m(o,a){$(o,e,a),$(o,s,a),V(r,o,a),i=!0},p(o,a){const l={};a&32&&(l.color=o[5]),a&64&&(l.strokeWidth=o[6]),r.$set(l)},i(o){i||(E(r.$$.fragment,o),i=!0)},o(o){j(r.$$.fragment,o),i=!1},d(o){o&&(p(e),p(s)),K(r,o)}}}function oi(n){let e,t;return e=new ei({props:{color:n[5],strokeWidth:n[6]}}),{c(){W(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,r){V(e,s,r),t=!0},p(s,r){const i={};r&32&&(i.color=s[5]),r&64&&(i.strokeWidth=s[6]),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){K(e,s)}}}function is(n){let e,t=n[9].includes(n[18]),s,r,i,o,a,l,c,u=t&&rs(n);return{c(){e=O("button"),u&&u.c(),s=D(),this.h()},l(d){e=A(d,"BUTTON",{style:!0,"aria-label":!0,class:!0});var h=I(e);u&&u.l(h),s=U(h),h.forEach(p),this.h()},h(){z(e,"width",n[12](n[18])),z(e,"height",n[11](n[18])),v(e,"aria-label",r=n[18]),v(e,"class",i=n[18]+" "+n[7]+" svelte-1sf6xr9"),e.disabled=o=n[2].includes(n[18]),re(e,"full",n[1])},m(d,h){$(d,e,h),u&&u.m(e,null),S(e,s),a=!0,l||(c=de(e,"click",function(){$t(n[13]("tap",n[18]))&&n[13]("tap",n[18]).apply(this,arguments)}),l=!0)},p(d,h){n=d,h&520&&(t=n[9].includes(n[18])),t?u?(u.p(n,h),h&520&&E(u,1)):(u=rs(n),u.c(),E(u,1),u.m(e,s)):u&&(oe(),j(u,1,1,()=>{u=null}),ae()),(!a||h&4104)&&z(e,"width",n[12](n[18])),(!a||h&2056)&&z(e,"height",n[11](n[18])),(!a||h&8&&r!==(r=n[18]))&&v(e,"aria-label",r),(!a||h&136&&i!==(i=n[18]+" "+n[7]+" svelte-1sf6xr9"))&&v(e,"class",i),(!a||h&12&&o!==(o=n[2].includes(n[18])))&&(e.disabled=o),(!a||h&138)&&re(e,"full",n[1])},i(d){a||(E(u),a=!0)},o(d){j(u),a=!1},d(d){d&&p(e),u&&u.d(),l=!1,c()}}}function ai(n){let e,t,s,r;tt(n[17]);let i=H(n[3]),o=[];for(let l=0;l<i.length;l+=1)o[l]=is(ss(n,i,l));const a=l=>j(o[l],1,1,()=>{o[l]=null});return{c(){e=O("section");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=A(l,"SECTION",{style:!0,class:!0});var c=I(e);for(let u=0;u<o.length;u+=1)o[u].l(c);c.forEach(p),this.h()},h(){z(e,"height",n[8]+"px"),v(e,"class","svelte-1sf6xr9"),re(e,"debug",n[0])},m(l,c){$(l,e,c);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);t=!0,s||(r=[de(window,"keydown",function(){$t(n[10])&&n[10].apply(this,arguments)}),de(window,"resize",n[17])],s=!0)},p(l,[c]){if(n=l,c&15102){i=H(n[3]);let u;for(u=0;u<i.length;u+=1){const d=ss(n,i,u);o[u]?(o[u].p(d,c),E(o[u],1)):(o[u]=is(d),o[u].c(),E(o[u],1),o[u].m(e,null))}for(oe(),u=i.length;u<o.length;u+=1)a(u);ae()}(!t||c&256)&&z(e,"height",n[8]+"px"),(!t||c&1)&&re(e,"debug",n[0])},i(l){if(!t){for(let c=0;c<i.length;c+=1)E(o[c]);t=!0}},o(l){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)j(o[c]);t=!1},d(l){l&&p(e),fe(o,l),s=!1,Ys(r)}}}function li(n,e,t){let s,r,i,o,{debug:a=!1}=e,{enableKeyboard:l=!1}=e,{full:c=!1}=e,{showArrows:u=!1}=e,{disable:d=[]}=e,{directions:h=["left","right"]}=e,{size:f="64px"}=e,{arrowSize:_="48px"}=e,{arrowStroke:m="rgba(120, 120, 120, 1)"}=e,{arrowStrokeWidth:y="3"}=e,{arrowPosition:g="center"}=e;const k=Tr();let w;function T(){t(8,w=window.innerHeight)}return n.$$set=b=>{"debug"in b&&t(0,a=b.debug),"enableKeyboard"in b&&t(14,l=b.enableKeyboard),"full"in b&&t(1,c=b.full),"showArrows"in b&&t(15,u=b.showArrows),"disable"in b&&t(2,d=b.disable),"directions"in b&&t(3,h=b.directions),"size"in b&&t(16,f=b.size),"arrowSize"in b&&t(4,_=b.arrowSize),"arrowStroke"in b&&t(5,m=b.arrowStroke),"arrowStrokeWidth"in b&&t(6,y=b.arrowStrokeWidth),"arrowPosition"in b&&t(7,g=b.arrowPosition)},n.$$.update=()=>{n.$$.dirty&65546&&t(12,s=b=>Array.isArray(f)?f[h.indexOf(b)]:c?"100%":f),n.$$.dirty&65538&&t(11,r=b=>["up","down"].includes(b)?f:c?"100%":f),n.$$.dirty&16392&&t(10,i=b=>{const P=b.key.replace("Arrow","").toLowerCase(),B=h.includes(P);l&&B&&(b.preventDefault(),k("tap",P))}),n.$$.dirty&32776&&t(9,o=h.filter(b=>typeof u=="boolean"?u:u.includes(b)))},[a,c,d,h,_,m,y,g,w,o,i,r,s,k,l,u,f,T]}class ci extends Z{constructor(e){super(),ee(this,e,li,ai,Q,{debug:0,enableKeyboard:14,full:1,showArrows:15,disable:2,directions:3,size:16,arrowSize:4,arrowStroke:5,arrowStrokeWidth:6,arrowPosition:7})}}function ui(n){let e,t=n[1]+1+"",s,r,i;return{c(){e=O("p"),s=x(t),r=x(" of "),i=x(n[0]),this.h()},l(o){e=A(o,"P",{class:!0});var a=I(e);s=G(a,t),r=G(a," of "),i=G(a,n[0]),a.forEach(p),this.h()},h(){v(e,"class","count svelte-rrphdy")},m(o,a){$(o,e,a),S(e,s),S(e,r),S(e,i)},p(o,[a]){a&2&&t!==(t=o[1]+1+"")&&me(s,t),a&1&&me(i,o[0])},i:ne,o:ne,d(o){o&&p(e)}}}function hi(n,e,t){let s;se(n,Ke,i=>t(1,s=i));let{maxArtistIndex:r}=e;return n.$$set=i=>{"maxArtistIndex"in i&&t(0,r=i.maxArtistIndex)},[r,s]}class di extends Z{constructor(e){super(),ee(this,e,hi,ui,Q,{maxArtistIndex:0})}}function fi(n){let e;const t=n[2].default,s=Te(t,n,n[3],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&8)&&Oe(s,t,r,r[3],e?je(t,r[3],i,null):Ae(r[3]),null)},i(r){e||(E(s,r),e=!0)},o(r){j(s,r),e=!1},d(r){s&&s.d(r)}}}function _i(n){let e,t;const s=[{name:"chevron-down"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[fi]},$$scope:{ctx:n}};for(let i=0;i<s.length;i+=1)r=ie(r,s[i]);return e=new ft({props:r}),{c(){W(e.$$.fragment)},l(i){J(e.$$.fragment,i)},m(i,o){V(e,i,o),t=!0},p(i,[o]){const a=o&3?xe(s,[s[0],o&2&&dt(i[1]),o&1&&{iconNode:i[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){K(e,i)}}}function gi(n,e,t){let{$$slots:s={},$$scope:r}=e;const i=[["path",{d:"m6 9 6 6 6-6"}]];return n.$$set=o=>{t(1,e=ie(ie({},e),_e(o))),"$$scope"in o&&t(3,r=o.$$scope)},e=_e(e),[i,e,s,r]}class mi extends Z{constructor(e){super(),ee(this,e,gi,_i,Q,{})}}const pi=mi;function vi(n){let e;const t=n[2].default,s=Te(t,n,n[3],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&8)&&Oe(s,t,r,r[3],e?je(t,r[3],i,null):Ae(r[3]),null)},i(r){e||(E(s,r),e=!0)},o(r){j(s,r),e=!1},d(r){s&&s.d(r)}}}function bi(n){let e,t;const s=[{name:"chevron-up"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[vi]},$$scope:{ctx:n}};for(let i=0;i<s.length;i+=1)r=ie(r,s[i]);return e=new ft({props:r}),{c(){W(e.$$.fragment)},l(i){J(e.$$.fragment,i)},m(i,o){V(e,i,o),t=!0},p(i,[o]){const a=o&3?xe(s,[s[0],o&2&&dt(i[1]),o&1&&{iconNode:i[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){K(e,i)}}}function yi(n,e,t){let{$$slots:s={},$$scope:r}=e;const i=[["path",{d:"m18 15-6-6-6 6"}]];return n.$$set=o=>{t(1,e=ie(ie({},e),_e(o))),"$$scope"in o&&t(3,r=o.$$scope)},e=_e(e),[i,e,s,r]}class wi extends Z{constructor(e){super(),ee(this,e,yi,bi,Q,{})}}const ki=wi;function Si(n){let e,t;return{c(){e=ze("svg"),t=ze("path"),this.h()},l(s){e=Be(s,"svg",{xmlns:!0,version:!0,viewBox:!0,class:!0});var r=I(e);t=Be(r,"path",{d:!0}),I(t).forEach(p),r.forEach(p),this.h()},h(){v(t,"d","m600 223.2c-207.6 0-376.8 169.2-376.8 376.8s169.2 376.8 376.8 376.8 376.8-169.2 376.8-376.8-169.2-376.8-376.8-376.8zm159.6 408-219.6 130.8c-16.801 9.6016-39.602 4.8008-49.199-13.199-3.6016-6-4.8008-12-4.8008-18v-261.6c0-20.398 15.602-36 36-36 6 0 13.199 1.1992 18 4.8008l219.6 130.8c16.801 9.6016 22.801 32.398 12 49.199-2.4023 6-7.2031 9.6016-12 13.199z"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"version","1.1"),v(e,"viewBox","223.2 223.2 753.6 753.6"),v(e,"class","svelte-1idfvi7")},m(s,r){$(s,e,r),S(e,t)},d(s){s&&p(e)}}}function Ei(n){let e,t;return{c(){e=ze("svg"),t=ze("path"),this.h()},l(s){e=Be(s,"svg",{xmlns:!0,version:!0,viewBox:!0,class:!0});var r=I(e);t=Be(r,"path",{d:!0}),I(t).forEach(p),r.forEach(p),this.h()},h(){v(t,"d","m600 30c-314.39 0-570 255.61-570 570s255.61 570 570 570 570-255.61 570-570-255.61-570-570-570zm-96 788.39c0 30-25.219 55.219-55.219 55.219s-55.219-25.219-55.219-55.219l0.046875-436.78c0-30 25.219-55.219 55.219-55.219s55.219 25.219 55.219 55.219zm302.39 0c0 30-25.219 55.219-55.219 55.219s-55.219-25.219-55.219-55.219l0.046875-436.78c0-30 25.219-55.219 55.219-55.219s55.219 25.219 55.219 55.219z"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"version","1.1"),v(e,"viewBox","30 30 1140 1140"),v(e,"class","svelte-1idfvi7")},m(s,r){$(s,e,r),S(e,t)},d(s){s&&p(e)}}}function Ti(n){let e,t,s=n[0].song+"",r,i,o;function a(u,d){return u[1]?Ei:Si}let l=a(n),c=l(n);return{c(){e=O("span"),c.c(),t=D(),r=x(s),this.h()},l(u){e=A(u,"SPAN",{class:!0});var d=I(e);c.l(d),t=U(d),r=G(d,s),d.forEach(p),this.h()},h(){v(e,"class","artist__player svelte-1idfvi7")},m(u,d){$(u,e,d),c.m(e,null),S(e,t),S(e,r),i||(o=de(e,"click",n[2]),i=!0)},p(u,[d]){l!==(l=a(u))&&(c.d(1),c=l(u),c&&(c.c(),c.m(e,t))),d&1&&s!==(s=u[0].song+"")&&me(r,s)},i:ne,o:ne,d(u){u&&p(e),c.d(),i=!1,o()}}}function Oi(n,e,t){let{artist:s}=e,r,i=!1,o;function a(){i?l():(t(1,i=!0),r||(r=new Audio(`${pe}/assets/audio/${s.id}.mp3`),r.play()))}function l(){t(1,i=!1),r&&(r.pause(),r=null)}return n.$$set=c=>{"artist"in c&&t(0,s=c.artist)},n.$$.update=()=>{n.$$.dirty&11&&(o&&o.id!==s.id&&i&&l(),t(3,o=s))},[s,i,a,o]}class Ai extends Z{constructor(e){super(),ee(this,e,Oi,Ti,Q,{artist:0})}}function ns(n){let e,t,s=`url(${pe}/assets/toploaders/${n[3]}.png)`;return{c(){e=O("div"),this.h()},l(r){e=A(r,"DIV",{class:!0}),I(e).forEach(p),this.h()},h(){v(e,"class","toploader svelte-1s1k6wy"),z(e,"--toploader-url",s)},m(r,i){$(r,e,i)},p(r,i){i&8&&s!==(s=`url(${pe}/assets/toploaders/${r[3]}.png)`)&&z(e,"--toploader-url",s)},i(r){r&&(t||tt(()=>{t=Qs(e,Ur,{duration:500}),t.start()}))},o:ne,d(r){r&&p(e)}}}function ji(n){let e,t,s=n[0].name+"",r,i,o,a,l=n[0]["debut year"]+"",c,u,d=n[0].company+"",h,f,_,m,y,g,k,w=`url(${pe}/assets/images/${n[0].id}.jpg)`,T;_=new Ai({props:{artist:n[0],currentArtistIndex:n[1]}});let b=n[2]&&ns(n);return{c(){e=O("div"),t=O("h2"),r=x(s),i=D(),o=O("p"),a=x("Debuted in "),c=x(l),u=x(" under "),h=x(d),f=x(` and their highest streaming
		song is
		`),W(_.$$.fragment),m=D(),y=O("div"),b&&b.c(),g=D(),k=O("div"),this.h()},l(P){e=A(P,"DIV",{class:!0});var B=I(e);t=A(B,"H2",{class:!0});var C=I(t);r=G(C,s),C.forEach(p),i=U(B),o=A(B,"P",{class:!0});var R=I(o);a=G(R,"Debuted in "),c=G(R,l),u=G(R," under "),h=G(R,d),f=G(R,` and their highest streaming
		song is
		`),J(_.$$.fragment,R),R.forEach(p),m=U(B),y=A(B,"DIV",{class:!0});var F=I(y);b&&b.l(F),g=U(F),k=A(F,"DIV",{class:!0}),I(k).forEach(p),F.forEach(p),B.forEach(p),this.h()},h(){v(t,"class","artist__title svelte-1s1k6wy"),v(o,"class","artist__description svelte-1s1k6wy"),v(k,"class","image svelte-1s1k6wy"),z(k,"--image",w),v(y,"class","artist__art svelte-1s1k6wy"),v(e,"class","artist svelte-1s1k6wy")},m(P,B){$(P,e,B),S(e,t),S(t,r),S(e,i),S(e,o),S(o,a),S(o,c),S(o,u),S(o,h),S(o,f),V(_,o,null),S(e,m),S(e,y),b&&b.m(y,null),S(y,g),S(y,k),T=!0},p(P,[B]){(!T||B&1)&&s!==(s=P[0].name+"")&&me(r,s),(!T||B&1)&&l!==(l=P[0]["debut year"]+"")&&me(c,l),(!T||B&1)&&d!==(d=P[0].company+"")&&me(h,d);const C={};B&1&&(C.artist=P[0]),B&2&&(C.currentArtistIndex=P[1]),_.$set(C),P[2]?b?(b.p(P,B),B&4&&E(b,1)):(b=ns(P),b.c(),E(b,1),b.m(y,g)):b&&(b.d(1),b=null),B&1&&w!==(w=`url(${pe}/assets/images/${P[0].id}.jpg)`)&&z(k,"--image",w)},i(P){T||(E(_.$$.fragment,P),E(b),T=!0)},o(P){j(_.$$.fragment,P),T=!1},d(P){P&&p(e),K(_),b&&b.d()}}}function Ii(n,e,t){let s,r;se(n,lt,a=>t(2,s=a)),se(n,ct,a=>t(3,r=a));let{artist:i}=e,{currentArtistIndex:o}=e;return n.$$set=a=>{"artist"in a&&t(0,i=a.artist),"currentArtistIndex"in a&&t(1,o=a.currentArtistIndex)},[i,o,s,r]}class $i extends Z{constructor(e){super(),ee(this,e,Ii,ji,Q,{artist:0,currentArtistIndex:1})}}const Pi=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Me(()=>Promise.resolve().then(()=>st),void 0,import.meta.url).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Pt extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Ci extends Pt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ri extends Pt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Li extends Pt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ni=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(d){o(d)}}function l(u){try{c(s.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};class Di{constructor(e,{headers:t={},customFetch:s}={}){this.url=e,this.headers=t,this.fetch=Pi(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Ni(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let a={},l;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:l}).catch(f=>{throw new Ci(f)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new Ri(c);if(!c.ok)throw new Li(c);let d=((s=c.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),h;return d==="application/json"?h=yield c.json():d==="application/octet-stream"?h=yield c.blob():d==="multipart/form-data"?h=yield c.formData():h=yield c.text(),{data:h,error:null}}catch(r){return{data:null,error:r}}})}}var Ui=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qe=Ui();const Fi=qe.fetch,Ct=qe.fetch.bind(qe),rr=qe.Headers,zi=qe.Request,Bi=qe.Response,st=Object.freeze(Object.defineProperty({__proto__:null,Headers:rr,Request:zi,Response:Bi,default:Ct,fetch:Fi},Symbol.toStringTag,{value:"Module"}));class Mi extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class qi{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ct:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await i.text();try{c=JSON.parse(m),Array.isArray(c)&&i.status===404&&(u=[],c=null,h=200,f="OK")}catch{i.status===404&&m===""?(h=204,f="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw new Mi(c)}return{error:c,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}}class xi extends qi{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Ne extends xi{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=t.map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class Gi{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Ne({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ne({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ne({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new Ne({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Ne({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Hi="1.9.2",Wi={"X-Client-Info":`postgrest-js/${Hi}`};class Rt{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Wi),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Gi(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Rt(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,count:r}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let a;s?(i="HEAD",Object.entries(t).forEach(([c,u])=>{o.searchParams.append(c,`${u}`)})):(i="POST",a=t);const l=Object.assign({},this.headers);return r&&(l.Prefer=`count=${r}`),new Ne({method:i,url:o,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Ji="2.9.3",Vi={"X-Client-Info":`realtime-js/${Ji}`},Ki="1.0.0",ir=1e4,Yi=1e3;var Fe;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Fe||(Fe={}));var le;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(le||(le={}));var he;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(he||(he={}));var Ot;(function(n){n.websocket="websocket"})(Ot||(Ot={}));var Ee;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ee||(Ee={}));class nr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Xi{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+r));o=o+r;const l=s.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class vt{constructor(e,t,s={},r=ir){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var os;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(os||(os={}));class Ye{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ye.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=Ye.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Ye.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),_=u.filter(y=>f.indexOf(y.presence_ref)<0),m=d.filter(y=>h.indexOf(y.presence_ref)<0);_.length>0&&(a[c]=_),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}s(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var M;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(M||(M={}));const as=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=Qi(o,n,e,r),i),{})},Qi=(n,e,t,s)=>{const r=e.find(a=>a.name===n),i=r==null?void 0:r.type,o=t[n];return i&&!s.includes(i)?or(i,o):At(o)},or=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return sn(e,t)}switch(n){case M.bool:return Zi(e);case M.float4:case M.float8:case M.int2:case M.int4:case M.int8:case M.numeric:case M.oid:return en(e);case M.json:case M.jsonb:return tn(e);case M.timestamp:return rn(e);case M.abstime:case M.date:case M.daterange:case M.int4range:case M.int8range:case M.money:case M.reltime:case M.text:case M.time:case M.timestamptz:case M.timetz:case M.tsrange:case M.tstzrange:return At(e);default:return At(e)}},At=n=>n,Zi=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},en=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},tn=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},sn=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>or(e,a))}return n},rn=n=>typeof n=="string"?n.replace(" ","T"):n;var ls;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ls||(ls={}));var cs;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(cs||(cs={}));var us;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(us||(us={}));class Lt{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new vt(this,he.join,this.params,this.timeout),this.rejoinTimer=new nr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(he.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Ye(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:i,presence:o,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(c=>c.filter))!==null&&r!==void 0?r:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,h=(u=d==null?void 0:d.length)!==null&&u!==void 0?u:0,f=[];for(let _=0;_<h;_++){const m=d[_],{filter:{event:y,schema:g,table:k,filter:w}}=m,T=c&&c[_];if(T&&T.event===y&&T.schema===g&&T.table===k&&T.filter===w)f.push(Object.assign(Object.assign({},m),{id:T.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,a={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=t.timeout)!==null&&r!==void 0?r:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=le.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(he.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const r=new vt(this,he.leave,{},e);r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new vt(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=he;if(s&&[a,l,c,u].indexOf(o)>=0&&s!==this._joinRef())return;let h=this._onMessage(o,t,s);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var _,m,y;return((_=f.filter)===null||_===void 0?void 0:_.event)==="*"||((y=(m=f.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,s)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var _,m,y,g,k,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const T=f.id,b=(_=f.filter)===null||_===void 0?void 0:_.event;return T&&((m=t.ids)===null||m===void 0?void 0:m.includes(T))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const T=(k=(g=f==null?void 0:f.filter)===null||g===void 0?void 0:g.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return T==="*"||T===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const _=h.data,{schema:m,table:y,commit_timestamp:g,type:k,errors:w}=_;h=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:g,eventType:k,new:{},old:{},errors:w}),this._getPayloadRecords(_))}f.callback(h,s)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Lt.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(he.close,{},e)}_onError(e){this._on(he.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=as(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=as(e.columns,e.old_record)),t}}const nn=()=>{},on=typeof WebSocket<"u";class an{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Vi,this.params={},this.timeout=ir,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=nn,this.conn=null,this.sendBuffer=[],this.serializer=new Xi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Me(()=>Promise.resolve().then(()=>st),void 0,import.meta.url).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Ot.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nr(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(on){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new ln(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Me(()=>import("../chunks/browser.7UWsncp0.js").then(e=>e.b),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Fe.connecting:return Ee.Connecting;case Fe.open:return Ee.Open;case Fe.closing:return Ee.Closing;default:return Ee.Closed}}isConnected(){return this.connectionState()===Ee.Open}channel(e,t={config:{}}){const s=new Lt(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(he.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ki}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||r===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${r} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(s)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(he.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Yi,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class ln{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Fe.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class Nt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function te(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class cn extends Nt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class hs extends Nt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var un=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(d){o(d)}}function l(u){try{c(s.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const ar=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Me(()=>Promise.resolve().then(()=>st),void 0,import.meta.url).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},hn=()=>un(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Me(()=>Promise.resolve().then(()=>st),void 0,import.meta.url)).Response:Response});var Ge=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(d){o(d)}}function l(u){try{c(s.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const bt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),dn=(n,e)=>Ge(void 0,void 0,void 0,function*(){const t=yield hn();n instanceof t?n.json().then(s=>{e(new cn(bt(s),n.status||500))}).catch(s=>{e(new hs(bt(s),s))}):e(new hs(bt(n),n))}),fn=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};function _t(n,e,t,s,r,i){return Ge(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,fn(e,s,r,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>dn(l,a))})})}function jt(n,e,t,s){return Ge(this,void 0,void 0,function*(){return _t(n,"GET",e,t,s)})}function ve(n,e,t,s,r){return Ge(this,void 0,void 0,function*(){return _t(n,"POST",e,s,r,t)})}function _n(n,e,t,s,r){return Ge(this,void 0,void 0,function*(){return _t(n,"PUT",e,s,r,t)})}function lr(n,e,t,s,r){return Ge(this,void 0,void 0,function*(){return _t(n,"DELETE",e,s,r,t)})}var ce=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(d){o(d)}}function l(u){try{c(s.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const gn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ds={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class mn{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=ar(r)}uploadOrUpdate(e,t,s,r){return ce(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ds),r),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl)):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield u.json();return u.ok?{data:{path:l,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if(te(i))return{data:null,error:i};throw i}})}upload(e,t,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return ce(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:ds.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(te(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return ce(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=yield ve(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),r=new URL(this.url+s.url),i=r.searchParams.get("token");if(!i)throw new Nt("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:i},error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}})}update(e,t,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return ce(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}})}copy(e,t){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield ve(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return ce(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ve(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return ce(this,void 0,void 0,function*(){try{const r=yield ve(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}})}download(e,t){return ce(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield jt(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(te(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${c}`)}}}remove(e){return ce(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}})}list(e,t,s){return ce(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},gn),t),{prefix:e||""});return{data:yield ve(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const pn="2.5.5",vn={"X-Client-Info":`storage-js/${pn}`};var $e=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(d){o(d)}}function l(u){try{c(s.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};class bn{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},vn),t),this.fetch=ar(s)}listBuckets(){return $e(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(te(e))return{data:null,error:e};throw e}})}getBucket(e){return $e(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return $e(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return $e(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}})}emptyBucket(e){return $e(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}})}deleteBucket(e){return $e(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}})}}class yn extends bn{constructor(e,t={},s){super(e,t,s)}from(e){return new mn(this.url,this.headers,e,this.fetch)}}const wn="2.39.8";let Ve="";typeof Deno<"u"?Ve="deno":typeof document<"u"?Ve="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ve="react-native":Ve="node";const kn={"X-Client-Info":`supabase-js-${Ve}/${wn}`},Sn={headers:kn},En={schema:"public"},Tn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},On={};var An=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(d){o(d)}}function l(u){try{c(s.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};const jn=n=>{let e;return n?e=n:typeof fetch>"u"?e=Ct:e=fetch,(...t)=>e(...t)},In=()=>typeof Headers>"u"?rr:Headers,$n=(n,e,t)=>{const s=jn(t),r=In();return(i,o)=>An(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(i,Object.assign(Object.assign({},o),{headers:c}))})};function Pn(n){return n.replace(/\/$/,"")}function Cn(n,e){const{db:t,auth:s,realtime:r,global:i}=n,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),i)}}function Rn(n){return Math.round(Date.now()/1e3)+n}function Ln(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ue=()=>typeof document<"u",we={tested:!1,writable:!1},Xe=()=>{if(!ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(we.tested)return we.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),we.tested=!0,we.writable=!0}catch{we.tested=!0,we.writable=!1}return we.writable};function yt(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const cr=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Me(()=>Promise.resolve().then(()=>st),void 0,import.meta.url).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Nn=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ke=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},nt=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},wt=async(n,e)=>{await n.removeItem(e)};function Dn(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,r,i,o,a,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),s=o<<2|a>>4,r=(a&15)<<4|l>>2,i=(l&3)<<6|c,t=t+String.fromCharCode(s),l!=64&&r!=0&&(t=t+String.fromCharCode(r)),c!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class gt{constructor(){this.promise=new gt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}gt.promiseConstructor=Promise;function fs(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(Dn(s))}async function Un(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Fn(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function zn(n){return("0"+n.toString(16)).substr(-2)}function Pe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,zn).join("")}async function Bn(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function Mn(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ce(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Bn(n);return Mn(t)}class Dt extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function L(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class qn extends Dt{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function xn(n){return L(n)&&n.name==="AuthApiError"}class ur extends Dt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ie extends Dt{constructor(e,t,s){super(e),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Re extends Ie{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class kt extends Ie{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class ot extends Ie{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class at extends Ie{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _s extends Ie{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class It extends Ie{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function St(n){return L(n)&&n.name==="AuthRetryableFetchError"}class Gn extends Ie{constructor(e,t,s){super(e,"AuthWeakPasswordError",t),this.reasons=s}}var Hn=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const De=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Wn=[502,503,504];async function gs(n){if(!Nn(n))throw new It(De(n),0);if(Wn.includes(n.status))throw new It(De(n),n.status);let e;try{e=await n.json()}catch(t){throw new ur(De(t),t)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)?new Gn(De(e),n.status,e.weak_password.reasons):new qn(De(e),n.status||500)}const Jn=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function N(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Vn(n,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function Vn(n,e,t,s,r,i){const o=Jn(e,s,r,i);let a;try{a=await n(t,o)}catch(l){throw console.error(l),new It(De(l),0)}if(a.ok||await gs(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await gs(l)}}function Se(n){var e;let t=null;Qn(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Rn(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function ms(n){const e=Se(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function be(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Kn(n){return{data:n,error:null}}function Yn(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,o=Hn(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Xn(n){return n}function Qn(n){return n.access_token&&n.refresh_token&&n.expires_in}var Zn=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class eo{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=cr(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await N(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await N(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:be})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Zn(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await N(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Yn,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(L(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await N(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:be})}catch(t){if(L(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await N(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Xn});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(_=>{const m=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(_.split(";")[1].split("=")[1]);c[`${y}Page`]=m}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(L(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await N(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:be})}catch(t){if(L(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await N(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:be})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await N(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:be})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await N(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(L(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await N(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(L(t))return{data:null,error:t};throw t}}}const hr="0.0.0",to="http://localhost:9999",so="supabase.auth.token",ro={"X-Client-Info":`gotrue-js/${hr}`},ps=10,io={getItem:n=>Xe()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Xe()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Xe()&&globalThis.localStorage.removeItem(n)}};function vs(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function no(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Le={debug:!!(globalThis&&Xe()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class oo extends dr{}async function ao(n,e,t){Le.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Le.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Le.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{Le.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw Le.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new oo(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Le.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}no();const lo={url:to,storageKey:so,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ro,flowType:"implicit",debug:!1},Je=30*1e3,bs=3;async function ys(n,e,t){return await t()}class Ze{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ze.nextInstanceID,Ze.nextInstanceID+=1,this.instanceID>0&&ue()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},lo),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new eo({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=cr(r.fetch),this.lock=r.lock||ys,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,r.lock?this.lock=r.lock:ue()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ao:this.lock=ys,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Xe()?this.storage=io:(this.memoryStorage={},this.storage=vs(this.memoryStorage)):(this.memoryStorage={},this.storage=vs(this.memoryStorage)),ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hr}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=ue()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return L(e)?{error:e}:{error:new ur("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,s,r;try{await this._removeSession();let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,_=null;if(this.flowType==="pkce"){const m=Pe();await ke(this.storage,`${this.storageKey}-code-verifier`,m),f=await Ce(m),_=m===f?"plain":"s256"}i=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:_},xform:Se})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(r=h==null?void 0:h.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Se})}else throw new ot("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(L(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ms})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ms})}else throw new ot("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new kt}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(L(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await nt(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/"),{data:i,error:o}=await N(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Se});return await wt(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new kt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:r,access_token:i,nonce:o}=e,a=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Se}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new kt}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(L(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,u=null;if(this.flowType==="pkce"){const h=Pe();await ke(this.storage,`${this.storageKey}-code-verifier`,h),c=await Ce(h),u=h===c?"plain":"s256"}const{error:d}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new ot("You must provide either an email or phone number.")}catch(a){if(L(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await N(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Se});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(L(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{await this._removeSession();let i=null,o=null;if(this.flowType==="pkce"){const a=Pe();await ke(this.storage,`${this.storageKey}-code-verifier`,a),i=await Ce(a),o=a===i?"plain":"s256"}return await N(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Kn})}catch(i){if(L(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Re;const{error:r}=await N(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(L(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await N(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await N(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ot("You must provide either an email or phone number and a type")}catch(t){if(L(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await nt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s)return{data:{session:e},error:null};const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:be}):await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)throw o;return await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0,xform:be})})}catch(t){if(L(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new Re;const o=r.session;let a=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const d=Pe();await ke(this.storage,`${this.storageKey}-code-verifier`,d),a=await Ce(d),l=d===a?"plain":"s256"}const{data:c,error:u}=await N(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:be});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return fs(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Re;const t=Date.now()/1e3;let s=t,r=!0,i=null;const o=fs(e.access_token);if(o.exp&&(s=o.exp,r=s<=t),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(L(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Re;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(L(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!ue())throw new at("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new at("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new _s("Not a valid PKCE flow url.");const t=yt(window.location.href);if(e){if(!t.code)throw new _s("No code detected.");const{data:k,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:k.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new at(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new at("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=Je&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const _=h-d;u-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,h,u):u-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",_,h,u);const{data:m,error:y}=await this._getUser(i);if(y)throw y;const g={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(t){if(L(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=yt(window.location.href);return!!(ue()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=yt(window.location.href),t=await nt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(xn(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await wt(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=Ln(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;if(this.flowType==="pkce"){const i=Pe();await ke(this.storage,`${this.storageKey}-code-verifier`,`${i}/PASSWORD_RECOVERY`),s=await Ce(i),r=i===s?"plain":"s256"}try{return await N(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(L(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(L(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await N(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return ue()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(L(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)throw o;return await N(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(L(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Fn(async r=>(await Un(r*200),this._debug(t,"refreshing attempt",r),await N(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Se})),(r,i,o)=>o&&o.error&&St(o.error)&&Date.now()+(r+1)*200-s<Je)}catch(s){if(this._debug(t,"error",s),L(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),ue()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await nt(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<r+ps;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${ps}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),St(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Re;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new gt;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Re;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),L(i)){const o={session:null,error:i};return St(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await ke(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await wt(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ue()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Je);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Je);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Je}ms, refresh threshold is ${bs} ticks`),r<=bs&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dr)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ue()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const i=Pe();await ke(this.storage,`${this.storageKey}-code-verifier`,i);const o=await Ce(i),a=i===o?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",o,"method",a);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);r.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await N(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(L(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:l}=await N(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(!((r=a==null?void 0:a.totp)===null||r===void 0)&&r.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(L(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(L(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(L(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}Ze.nextInstanceID=0;class co extends Ze{constructor(e){super(e)}}var uo=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(d){o(d)}}function l(u){try{c(s.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(n,e||[])).next())})};class ho{constructor(e,t,s){var r,i,o,a,l,c,u,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=Pn(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,_={db:En,realtime:On,auth:Object.assign(Object.assign({},Tn),{storageKey:f}),global:Sn},m=Cn(s??{},_);this.storageKey=(i=(r=m.auth)===null||r===void 0?void 0:r.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=m.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,(c=m.global)===null||c===void 0?void 0:c.fetch),this.fetch=$n(t,this._getAccessToken.bind(this),(u=m.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},m.realtime)),this.rest=new Rt(`${h}/rest/v1`,{headers:this.headers,schema:(d=m.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Di(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new yn(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return uo(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:o,debug:a},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new co({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:o,debug:a,fetch:c})}_initRealtimeClient(e){return new an(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fo=(n,e,t)=>new ho(n,e,t),_o="https://lwpcpixtrbcdhvktfvas.supabase.co",go="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx3cGNwaXh0cmJjZGh2a3RmdmFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTY2NTk5NTYsImV4cCI6MjAzMjIzNTk1Nn0.MY2A7T7t9DjfJhRNADoLukGlOfOsXvX3TryKOxI8XDI",fr=fo(_o,go);async function mo(){try{const{data:n,error:e}=await fr.from("entries").select("*");return e?(console.error("Error fetching data:",e),null):n}catch(n){return console.error("Unexpected error:",n),null}}async function po(n){try{const{data:e,error:t}=await fr.from("entries").insert(n);return t?(console.error("Error inserting data:",t),null):e}catch(e){return console.error("Unexpected error:",e),null}}function ws(n,e,t){const s=n.slice();return s[12]=e[t],s[14]=t,s}function ks(n,e){let t,s=e[12].name+"",r,i=`url(${pe}/assets/toploaders/${e[12].name}.png)`,o,a;function l(){return e[7](e[12])}return{key:n,first:null,c(){t=O("button"),r=x(s),this.h()},l(c){t=A(c,"BUTTON",{key:!0,class:!0});var u=I(t);r=G(u,s),u.forEach(p),this.h()},h(){v(t,"key",e[12]),v(t,"class","svelte-6qai0m"),re(t,"active",e[0]==e[12].name),z(t,"--toploader-url",i),z(t,"--color-accent",e[5][e[14]]),this.first=t},m(c,u){$(c,t,u),S(t,r),o||(a=de(t,"click",l),o=!0)},p(c,u){e=c,u&9&&re(t,"active",e[0]==e[12].name)},d(c){c&&p(t),o=!1,a()}}}function vo(n){let e,t,s="Which generation?",r,i,o,a=[],l=new Map,c,u,d=n[2].name+"",h,f,_,m=H(n[3]);const y=g=>g[12];for(let g=0;g<m.length;g+=1){let k=ws(n,m,g),w=y(k);l.set(w,a[g]=ks(w,k))}return{c(){e=O("div"),t=O("p"),t.textContent=s,r=D(),i=O("div"),o=O("div");for(let g=0;g<a.length;g+=1)a[g].c();c=D(),u=O("button"),h=x(d),this.h()},l(g){e=A(g,"DIV",{class:!0});var k=I(e);t=A(k,"P",{class:!0,"data-svelte-h":!0}),ye(t)!=="svelte-1iwlhps"&&(t.textContent=s),r=U(k),i=A(k,"DIV",{class:!0});var w=I(i);o=A(w,"DIV",{class:!0});var T=I(o);for(let P=0;P<a.length;P+=1)a[P].l(T);T.forEach(p),c=U(w),u=A(w,"BUTTON",{class:!0});var b=I(u);h=G(b,d),b.forEach(p),w.forEach(p),k.forEach(p),this.h()},h(){v(t,"class","which svelte-6qai0m"),v(o,"class","voter__controls__gens svelte-6qai0m"),v(u,"class","idk svelte-6qai0m"),v(i,"class","voter__controls svelte-6qai0m"),v(e,"class","voter svelte-6qai0m"),re(e,"inactive",n[1])},m(g,k){$(g,e,k),S(e,t),S(e,r),S(e,i),S(i,o);for(let w=0;w<a.length;w+=1)a[w]&&a[w].m(o,null);S(i,c),S(i,u),S(u,h),f||(_=de(u,"click",n[8]),f=!0)},p(g,[k]){k&57&&(m=H(g[3]),a=er(a,k,y,1,g,m,l,o,Ir,ks,null,ws)),k&2&&re(e,"inactive",g[1])},i:ne,o:ne,d(g){g&&p(e);for(let k=0;k<a.length;k+=1)a[k].d();f=!1,_()}}}function bo(n,e,t){let s,r,i,o;se(n,Ke,m=>t(9,s=m)),se(n,ct,m=>t(0,r=m)),se(n,lt,m=>t(1,i=m)),se(n,$r,m=>t(10,o=m));let{artist:a}=e,l=[{id:0,name:"I don't know"},{id:1,name:"1st"},{id:2,name:"2nd"},{id:3,name:"3rd"},{id:4,name:"4th"},{id:5,name:"5th"}],[c,...u]=l;const d=m=>{Pr.set("currentArtistIndex",s+1);let y={created_at:new Date,artist_id:a.id,gen:m.id,user_id:o};po(y);let g;clearInterval(g),m.id?(ge(lt,i=!0,i),ge(ct,r=m.name,r),g=setTimeout(()=>{ge(lt,i=!1,i),ge(ct,r=void 0,r),ge(Ke,++s,s)},1e3)):ge(Ke,++s,s)},h=["#92BAFF","#84F881","#E05F89","#565656","#ECCA48"],f=m=>d(m),_=()=>d(c);return n.$$set=m=>{"artist"in m&&t(6,a=m.artist)},[r,i,c,u,d,h,a,f,_]}class yo extends Z{constructor(e){super(),ee(this,e,bo,vo,Q,{artist:6})}}function Ss(n,e,t){const s=n.slice();return s[7]=e[t],s}function Es(n){let e,t,s,r,i,o=n[7]+"",a,l,c;return{c(){e=O("div"),t=O("input"),s=D(),r=O("label"),i=O("div"),a=x(o),this.h()},l(u){e=A(u,"DIV",{class:!0});var d=I(e);t=A(d,"INPUT",{type:!0,id:!0,name:!0,"aria-labelledby":!0,class:!0}),s=U(d),r=A(d,"LABEL",{for:!0,id:!0,class:!0});var h=I(r);i=A(h,"DIV",{class:!0});var f=I(i);a=G(f,o),f.forEach(p),h.forEach(p),d.forEach(p),this.h()},h(){v(t,"type","checkbox"),v(t,"id",n[7]),v(t,"name","factor"),t.value=n[7],v(t,"aria-labelledby",`label-${n[7]}`),v(t,"class","svelte-1uf4ot7"),v(i,"class","factor-label svelte-1uf4ot7"),v(r,"for",n[7]),v(r,"id",`label-${n[7]}`),v(r,"class","checkbox-label svelte-1uf4ot7"),v(e,"class","round svelte-1uf4ot7")},m(u,d){$(u,e,d),S(e,t),S(e,s),S(e,r),S(r,i),S(i,a),l||(c=de(t,"change",n[4]),l=!0)},p:ne,d(u){u&&p(e),l=!1,c()}}}function wo(n){let e,t,s="What factors did you consider to fit each group into a generation?",r,i,o="Select all that apply",a,l,c,u,d,h,f,_,m,y=H(n[3]),g=[];for(let k=0;k<y.length;k+=1)g[k]=Es(Ss(n,y,k));return h=new sr({props:{color:n[0],strokeWidth:n[1]}}),{c(){e=O("div"),t=O("h2"),t.textContent=s,r=D(),i=O("p"),i.textContent=o,a=D(),l=O("form");for(let k=0;k<g.length;k+=1)g[k].c();c=D(),u=O("button"),d=x("Next "),W(h.$$.fragment),this.h()},l(k){e=A(k,"DIV",{id:!0,class:!0});var w=I(e);t=A(w,"H2",{"data-svelte-h":!0}),ye(t)!=="svelte-1iku5w5"&&(t.textContent=s),r=U(w),i=A(w,"P",{class:!0,"data-svelte-h":!0}),ye(i)!=="svelte-8antvg"&&(i.textContent=o),a=U(w),l=A(w,"FORM",{class:!0});var T=I(l);for(let P=0;P<g.length;P+=1)g[P].l(T);c=U(T),u=A(T,"BUTTON",{class:!0});var b=I(u);d=G(b,"Next "),J(h.$$.fragment,b),b.forEach(p),T.forEach(p),w.forEach(p),this.h()},h(){v(i,"class","svelte-1uf4ot7"),v(u,"class","next svelte-1uf4ot7"),v(l,"class","svelte-1uf4ot7"),v(e,"id","survey"),v(e,"class","svelte-1uf4ot7")},m(k,w){$(k,e,w),S(e,t),S(e,r),S(e,i),S(e,a),S(e,l);for(let T=0;T<g.length;T+=1)g[T]&&g[T].m(l,null);S(l,c),S(l,u),S(u,d),V(h,u,null),f=!0,_||(m=de(u,"click",n[6]),_=!0)},p(k,[w]){if(w&24){y=H(k[3]);let b;for(b=0;b<y.length;b+=1){const P=Ss(k,y,b);g[b]?g[b].p(P,w):(g[b]=Es(P),g[b].c(),g[b].m(l,c))}for(;b<g.length;b+=1)g[b].d(1);g.length=y.length}const T={};w&1&&(T.color=k[0]),w&2&&(T.strokeWidth=k[1]),h.$set(T)},i(k){f||(E(h.$$.fragment,k),f=!0)},o(k){j(h.$$.fragment,k),f=!1},d(k){k&&p(e),fe(g,k),K(h),_=!1,m()}}}function ko(n,e,t){let s;se(n,Ue,u=>t(2,s=u));let{arrowStroke:r="rgba(120, 120, 120, 1)"}=e,{arrowStrokeWidth:i="3"}=e,{selectedFactors:o=[]}=e,a=["Debut year","Peak active periods","Association with other groups","Length of contracts","Member age ranges","Member racial diversity","Member positions (or lack thereof)","Fashion trends","Music genre trends","Promotion models","Fan interaction models","Influence on industry","Target audience","Makeup of fanbase","Other"];function l(u){const d=u.target.value;u.target.checked?t(5,o=[...o,d]):t(5,o=o.filter(h=>h!==d))}const c=()=>ge(Ue,s="results",s);return n.$$set=u=>{"arrowStroke"in u&&t(0,r=u.arrowStroke),"arrowStrokeWidth"in u&&t(1,i=u.arrowStrokeWidth),"selectedFactors"in u&&t(5,o=u.selectedFactors)},[r,i,s,a,l,o,c]}class So extends Z{constructor(e){super(),ee(this,e,ko,wo,Q,{arrowStroke:0,arrowStrokeWidth:1,selectedFactors:5})}}function Eo(n,e){var t=parseInt(n.substring(1,3),16),s=parseInt(n.substring(3,5),16),r=parseInt(n.substring(5,7),16);t=parseInt(t*(100+e)/100),s=parseInt(s*(100+e)/100),r=parseInt(r*(100+e)/100),t=t<255?t:255,s=s<255?s:255,r=r<255?r:255,t=Math.round(t),s=Math.round(s),r=Math.round(r);var i=t.toString(16).length==1?"0"+t.toString(16):t.toString(16),o=s.toString(16).length==1?"0"+s.toString(16):s.toString(16),a=r.toString(16).length==1?"0"+r.toString(16):r.toString(16);return"#"+i+o+a}function Ts(n,e,t){const s=n.slice();return s[12]=e[t],s}function Os(n,e,t){var l,c;const s=n.slice();s[15]=e[t],s[21]=t;const r=s[4][s[12].id];s[16]=r;const i=Number((l=s[16])==null?void 0:l[s[15]])||0;s[17]=i;const o=s[8][s[21]];s[18]=o;const a=((c=s[16])==null?void 0:c.highestGen)==s[15];return s[19]=a,s}function To(n){let e,t,s;return t=new pi({props:{color:"#000",strokeWidth:n[1]}}),{c(){e=x(`Show survey results
			`),W(t.$$.fragment)},l(r){e=G(r,`Show survey results
			`),J(t.$$.fragment,r)},m(r,i){$(r,e,i),V(t,r,i),s=!0},p(r,i){const o={};i&2&&(o.strokeWidth=r[1]),t.$set(o)},i(r){s||(E(t.$$.fragment,r),s=!0)},o(r){j(t.$$.fragment,r),s=!1},d(r){r&&p(e),K(t,r)}}}function Oo(n){let e,t,s;return t=new ki({props:{color:"#000",strokeWidth:n[1]}}),{c(){e=x(`Hide survey results
			`),W(t.$$.fragment)},l(r){e=G(r,`Hide survey results
			`),J(t.$$.fragment,r)},m(r,i){$(r,e,i),V(t,r,i),s=!0},p(r,i){const o={};i&2&&(o.strokeWidth=r[1]),t.$set(o)},i(r){s||(E(t.$$.fragment,r),s=!0)},o(r){j(t.$$.fragment,r),s=!1},d(r){r&&p(e),K(t,r)}}}function As(n){let e,t,s,r,i=H(n[0]),o=[];for(let a=0;a<i.length;a+=1)o[a]=Ps(Ts(n,i,a));return{c(){e=O("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=A(a,"DIV",{class:!0});var l=I(e);for(let c=0;c<o.length;c+=1)o[c].l(l);l.forEach(p),this.h()},h(){v(e,"class","viz svelte-1nuj7ai")},m(a,l){$(a,e,l);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);r=!0},p(a,l){if(l&465){i=H(a[0]);let c;for(c=0;c<i.length;c+=1){const u=Ts(a,i,c);o[c]?o[c].p(u,l):(o[c]=Ps(u),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},i(a){r||(a&&tt(()=>{r&&(s&&s.end(1),t=Qs(e,Qt,{}),t.start())}),r=!0)},o(a){t&&t.invalidate(),a&&(s=Ar(e,Qt,{})),r=!1},d(a){a&&p(e),fe(o,a),a&&s&&s.end()}}}function js(n){let e,t=n[7][n[21]]+"",s,r=n[19]&&Is(n);return{c(){e=O("span"),s=x(t),r&&r.c(),this.h()},l(i){e=A(i,"SPAN",{class:!0});var o=I(e);s=G(o,t),r&&r.l(o),o.forEach(p),this.h()},h(){v(e,"class","svelte-1nuj7ai"),re(e,"isLargest",n[19])},m(i,o){$(i,e,o),S(e,s),r&&r.m(e,null)},p(i,o){i[19]?r?r.p(i,o):(r=Is(i),r.c(),r.m(e,null)):r&&(r.d(1),r=null),o&81&&re(e,"isLargest",i[19])},d(i){i&&p(e),r&&r.d()}}}function Is(n){let e,t,s=n[17].toFixed(0)+"",r,i,o=n[15]&&Ao();return{c(){e=x(""),o&&o.c(),t=x(" ("),r=x(s),i=x("%)")},l(a){e=G(a,""),o&&o.l(a),t=G(a," ("),r=G(a,s),i=G(a,"%)")},m(a,l){$(a,e,l),o&&o.m(a,l),$(a,t,l),$(a,r,l),$(a,i,l)},p(a,l){l&17&&s!==(s=a[17].toFixed(0)+"")&&me(r,s)},d(a){a&&(p(e),p(t),p(r),p(i)),o&&o.d(a)}}}function Ao(n){let e;return{c(){e=x("gen")},l(t){e=G(t,"gen")},m(t,s){$(t,e,s)},d(t){t&&p(e)}}}function $s(n){let e,t,s,r=`${n[17]}%`,i=n[17]>10&&js(n);return{c(){e=O("div"),i&&i.c(),t=D(),this.h()},l(o){e=A(o,"DIV",{class:!0,"data-percentage":!0});var a=I(e);i&&i.l(a),t=U(a),a.forEach(p),this.h()},h(){v(e,"class","cell gen-"+n[15]+" svelte-1nuj7ai"),v(e,"data-percentage",s=n[17]+"%"),z(e,"--width",r),z(e,"--color",Eo(n[18],-40)),z(e,"--bg",n[18])},m(o,a){$(o,e,a),i&&i.m(e,null),S(e,t)},p(o,a){o[17]>10?i?i.p(o,a):(i=js(o),i.c(),i.m(e,t)):i&&(i.d(1),i=null),a&17&&s!==(s=o[17]+"%")&&v(e,"data-percentage",s),a&17&&r!==(r=`${o[17]}%`)&&z(e,"--width",r)},d(o){o&&p(e),i&&i.d()}}}function Ps(n){let e,t,s=n[12].name+"",r,i,o,a,l=H(n[6]),c=[];for(let u=0;u<l.length;u+=1)c[u]=$s(Os(n,l,u));return{c(){e=O("div"),t=O("div"),r=x(s),i=D(),o=O("div");for(let u=0;u<c.length;u+=1)c[u].c();a=D(),this.h()},l(u){e=A(u,"DIV",{class:!0});var d=I(e);t=A(d,"DIV",{class:!0});var h=I(t);r=G(h,s),h.forEach(p),i=U(d),o=A(d,"DIV",{class:!0});var f=I(o);for(let _=0;_<c.length;_+=1)c[_].l(f);f.forEach(p),a=U(d),d.forEach(p),this.h()},h(){v(t,"class","artist"),v(o,"class","plot svelte-1nuj7ai"),v(e,"class","row svelte-1nuj7ai")},m(u,d){$(u,e,d),S(e,t),S(t,r),S(e,i),S(e,o);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(o,null);S(e,a)},p(u,d){if(d&1&&s!==(s=u[12].name+"")&&me(r,s),d&465){l=H(u[6]);let h;for(h=0;h<l.length;h+=1){const f=Os(u,l,h);c[h]?c[h].p(f,d):(c[h]=$s(f),c[h].c(),c[h].m(o,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=l.length}},d(u){u&&p(e),fe(c,u)}}}function jo(n){let e,t,s="Thank you for submitting the survey",r,i,o=`We're looking for K-pop fans to interview for part 2. Drop your email if
		you're interested in keeping in touch.`,a,l,c,u,d,h="Submit",f,_,m,y,g,k,w,T;const b=[Oo,To],P=[];function B(R,F){return R[3]?0:1}m=B(n),y=P[m]=b[m](n);let C=n[3]&&As(n);return{c(){e=O("div"),t=O("h2"),t.textContent=s,r=D(),i=O("p"),i.textContent=o,a=D(),l=O("form"),c=O("input"),u=D(),d=O("button"),d.textContent=h,f=D(),_=O("button"),y.c(),g=D(),C&&C.c(),this.h()},l(R){e=A(R,"DIV",{id:!0,class:!0});var F=I(e);t=A(F,"H2",{"data-svelte-h":!0}),ye(t)!=="svelte-1nnanpj"&&(t.textContent=s),r=U(F),i=A(F,"P",{class:!0,"data-svelte-h":!0}),ye(i)!=="svelte-1qlw2l5"&&(i.textContent=o),a=U(F),l=A(F,"FORM",{class:!0});var Y=I(l);c=A(Y,"INPUT",{type:!0,placeholder:!0,class:!0}),u=U(Y),d=A(Y,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ye(d)!=="svelte-ttjbab"&&(d.textContent=h),Y.forEach(p),f=U(F),_=A(F,"BUTTON",{class:!0});var He=I(_);y.l(He),He.forEach(p),g=U(F),C&&C.l(F),F.forEach(p),this.h()},h(){v(i,"class","svelte-1nuj7ai"),v(c,"type","email"),v(c,"placeholder","Email"),c.required=!0,v(c,"class","email-input svelte-1nuj7ai"),v(d,"type","submit"),v(d,"class","submit-button svelte-1nuj7ai"),v(l,"class","email-signup svelte-1nuj7ai"),v(_,"class","reveal svelte-1nuj7ai"),v(e,"id","results"),v(e,"class","svelte-1nuj7ai")},m(R,F){$(R,e,F),S(e,t),S(e,r),S(e,i),S(e,a),S(e,l),S(l,c),Ht(c,n[2]),S(l,u),S(l,d),S(e,f),S(e,_),P[m].m(_,null),S(e,g),C&&C.m(e,null),k=!0,w||(T=[de(c,"input",n[10]),de(l,"submit",n[5]),de(_,"click",n[11])],w=!0)},p(R,[F]){F&4&&c.value!==R[2]&&Ht(c,R[2]);let Y=m;m=B(R),m===Y?P[m].p(R,F):(oe(),j(P[Y],1,1,()=>{P[Y]=null}),ae(),y=P[m],y?y.p(R,F):(y=P[m]=b[m](R),y.c()),E(y,1),y.m(_,null)),R[3]?C?(C.p(R,F),F&8&&E(C,1)):(C=As(R),C.c(),E(C,1),C.m(e,null)):C&&(oe(),j(C,1,1,()=>{C=null}),ae())},i(R){k||(E(y),E(C),k=!0)},o(R){j(y),j(C),k=!1},d(R){R&&p(e),P[m].d(),C&&C.d(),w=!1,Ys(T)}}}function Cs(n,e){return n.reduce(function(t,s){return(t[s[e]]=t[s[e]]||[]).push(s),t},{})}function Io(n,e,t){let{artists:s}=e,{arrowStroke:r="rgba(120, 120, 120, 1)"}=e,{arrowStrokeWidth:i="3"}=e,o="";const a=m=>{m.preventDefault(),alert(`Email submitted: ${o}`)};let l=!1,c={};et(async()=>{let m=await mo(),y=Cs(m,"artist_id");Object.entries(y).map(([g,k])=>{let w=Cs(k,"gen"),T=k.length,b={},P,B=0;Object.entries(w).forEach(([C,R])=>{let Y=(R.length/T*100).toFixed(2);b[C]=Y,Y>B&&(P=C,B=Y)}),t(4,c[g]={...b,highestGen:P},c)})});let u=[1,2,3,4,5,0],d=["1st","2nd","3rd","4th","5th","IDK"],h=["#e0afff","#f0d9ff","#e2dd9c","#688f8a","#a1c588","#dddddd"];function f(){o=this.value,t(2,o)}const _=()=>t(3,l=!l);return n.$$set=m=>{"artists"in m&&t(0,s=m.artists),"arrowStroke"in m&&t(9,r=m.arrowStroke),"arrowStrokeWidth"in m&&t(1,i=m.arrowStrokeWidth)},[s,i,o,l,c,a,u,d,h,r,f,_]}class $o extends Z{constructor(e){super(),ee(this,e,Io,jo,Q,{artists:0,arrowStroke:9,arrowStrokeWidth:1})}}function Po(n){let e,t;return e=new $o({props:{artists:n[1]}}),{c(){W(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,r){V(e,s,r),t=!0},p(s,r){const i={};r&2&&(i.artists=s[1]),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){K(e,s)}}}function Co(n){let e,t,s;function r(o){n[6](o)}let i={};return n[3]!==void 0&&(i.selectedFactors=n[3]),e=new So({props:i}),Qe.push(()=>Zs(e,"selectedFactors",r)),{c(){W(e.$$.fragment)},l(o){J(e.$$.fragment,o)},m(o,a){V(e,o,a),s=!0},p(o,a){const l={};!t&&a&8&&(t=!0,l.selectedFactors=o[3],Xs(()=>t=!1)),e.$set(l)},i(o){s||(E(e.$$.fragment,o),s=!0)},o(o){j(e.$$.fragment,o),s=!1},d(o){K(e,o)}}}function Ro(n){let e,t,s,r,i,o;return e=new di({props:{maxArtistIndex:n[1].length}}),s=new $i({props:{artist:n[4]}}),i=new yo({props:{artist:n[4]}}),{c(){W(e.$$.fragment),t=D(),W(s.$$.fragment),r=D(),W(i.$$.fragment)},l(a){J(e.$$.fragment,a),t=U(a),J(s.$$.fragment,a),r=U(a),J(i.$$.fragment,a)},m(a,l){V(e,a,l),$(a,t,l),V(s,a,l),$(a,r,l),V(i,a,l),o=!0},p(a,l){const c={};l&2&&(c.maxArtistIndex=a[1].length),e.$set(c);const u={};l&16&&(u.artist=a[4]),s.$set(u);const d={};l&16&&(d.artist=a[4]),i.$set(d)},i(a){o||(E(e.$$.fragment,a),E(s.$$.fragment,a),E(i.$$.fragment,a),o=!0)},o(a){j(e.$$.fragment,a),j(s.$$.fragment,a),j(i.$$.fragment,a),o=!1},d(a){a&&(p(t),p(r)),K(e,a),K(s,a),K(i,a)}}}function Lo(n){let e,t,s,r;const i=[Ro,Co,Po],o=[];function a(l,c){return l[2]=="voting"?0:l[2]=="survey"?1:l[2]=="results"?2:-1}return~(t=a(n))&&(s=o[t]=i[t](n)),{c(){e=O("section"),s&&s.c(),this.h()},l(l){e=A(l,"SECTION",{class:!0});var c=I(e);s&&s.l(c),c.forEach(p),this.h()},h(){v(e,"class","board svelte-d12z7e"),re(e,"experienceStarted",n[0]),z(e,"--justify-content",n[2]=="voting"?"space-between":"center")},m(l,c){$(l,e,c),~t&&o[t].m(e,null),r=!0},p(l,[c]){let u=t;t=a(l),t===u?~t&&o[t].p(l,c):(s&&(oe(),j(o[u],1,1,()=>{o[u]=null}),ae()),~t?(s=o[t],s?s.p(l,c):(s=o[t]=i[t](l),s.c()),E(s,1),s.m(e,null)):s=null),(!r||c&1)&&re(e,"experienceStarted",l[0]),c&4&&z(e,"--justify-content",l[2]=="voting"?"space-between":"center")},i(l){r||(E(s),r=!0)},o(l){j(s),r=!1},d(l){l&&p(e),~t&&o[t].d()}}}function No(n,e,t){let s,r,i;se(n,Ue,u=>t(2,r=u)),se(n,Ke,u=>t(5,i=u));let{experienceStarted:o}=e,{artists:a}=e,l=[];ge(Ue,r="voting",r);function c(u){l=u,t(3,l)}return n.$$set=u=>{"experienceStarted"in u&&t(0,o=u.experienceStarted),"artists"in u&&t(1,a=u.artists)},n.$$.update=()=>{n.$$.dirty&34&&t(4,s=a==null?void 0:a[i]),n.$$.dirty&38&&i>a.length-1&&r=="voting"&&ge(Ue,r="survey",r)},[o,a,r,l,s,i,c]}class Do extends Z{constructor(e){super(),ee(this,e,No,Lo,Q,{experienceStarted:0,artists:1})}}function Rs(n,e,t){const s=n.slice();return s[2]=e[t].src,s[3]=e[t].index,s[4]=e[t].position,s}function Ls(n){let e,t;return{c(){e=O("img"),this.h()},l(s){e=A(s,"IMG",{src:!0,"data-index":!0,alt:!0,style:!0,class:!0}),this.h()},h(){Et(e.src,t=""+(pe+n[2]))||v(e,"src",t),v(e,"data-index",n[3]),v(e,"alt",""),z(e,"--top",n[4].top||"auto"),z(e,"--right",n[4].right||"auto"),z(e,"--bottom",n[4].bottom||"auto"),z(e,"--left",n[4].left||"auto"),z(e,"--translateX",n[4].left==="50%"?"-50%":"0"),v(e,"class","svelte-rf0zu8")},m(s,r){$(s,e,r)},p:ne,d(s){s&&p(e)}}}function Uo(n){let e,t=H(n[0]),s=[];for(let r=0;r<t.length;r+=1)s[r]=Ls(Rs(n,t,r));return{c(){e=O("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=A(r,"DIV",{id:!0,class:!0});var i=I(e);for(let o=0;o<s.length;o+=1)s[o].l(i);i.forEach(p),this.h()},h(){v(e,"id","intro-gallery"),v(e,"class","svelte-rf0zu8")},m(r,i){$(r,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(r,[i]){if(i&1){t=H(r[0]);let o;for(o=0;o<t.length;o+=1){const a=Rs(r,t,o);s[o]?s[o].p(a,i):(s[o]=Ls(a),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},i:ne,o:ne,d(r){r&&p(e),fe(s,r)}}}function Fo(n){const e=[{src:"/assets/images/20.jpg",index:1,position:{top:"60px",left:"50%"}},{src:"/assets/images/4.jpg",index:2,position:{top:"270px",right:"10%"}},{src:"/assets/images/5.jpg",index:3,position:{bottom:"250px",right:"10%"}},{src:"/assets/images/19.jpg",index:4,position:{bottom:"120px",left:"50%"}},{src:"/assets/images/2.jpg",index:5,position:{bottom:"270px",left:"10%"}},{src:"/assets/images/30.jpg",index:6,position:{top:"250px",left:"10%"}}];return setTimeout(()=>{},100),[e]}class zo extends Z{constructor(e){super(),ee(this,e,Fo,Uo,Q,{})}}function Ns(n,e,t){const s=n.slice();s[11]=e[t].type,s[12]=e[t].value,s[13]=e[t].component,s[16]=t;const r=s[16]==s[2];return s[14]=r,s}function Ds(n,e,t){const s=n.slice();return s[17]=e[t],s}function Us(n,e,t){const s=n.slice();return s[20]=e[t],s}function Fs(n){let e,t;return{c(){e=O("link"),this.h()},l(s){e=A(s,"LINK",{rel:!0,as:!0,href:!0}),this.h()},h(){v(e,"rel","preload"),v(e,"as","image"),v(e,"href",t=n[20])},m(s,r){$(s,e,r)},p(s,r){r&16&&t!==(t=s[20])&&v(e,"href",t)},d(s){s&&p(e)}}}function zs(n){let e,t,s,r,i=n[6].indexOf(n[2])==-1,o;function a(u){n[9](u)}let l={duration:"0",$$slots:{default:[xo]},$$scope:{ctx:n}};n[2]!==void 0&&(l.current=n[2]),t=new qr({props:l}),n[8](t),Qe.push(()=>Zs(t,"current",a));let c=i&&Hs(n);return{c(){e=O("article"),W(t.$$.fragment),r=D(),c&&c.c(),this.h()},l(u){e=A(u,"ARTICLE",{class:!0});var d=I(e);J(t.$$.fragment,d),r=U(d),c&&c.l(d),d.forEach(p),this.h()},h(){v(e,"class","svelte-1a994vx"),z(e,"--height",n[5]=="results"?"100%":"100svh")},m(u,d){$(u,e,d),V(t,e,null),S(e,r),c&&c.m(e,null),o=!0},p(u,d){const h={};d&8388613&&(h.$$scope={dirty:d,ctx:u}),!s&&d&4&&(s=!0,h.current=u[2],Xs(()=>s=!1)),t.$set(h),d&4&&(i=u[6].indexOf(u[2])==-1),i?c?(c.p(u,d),d&4&&E(c,1)):(c=Hs(u),c.c(),E(c,1),c.m(e,null)):c&&(oe(),j(c,1,1,()=>{c=null}),ae()),d&32&&z(e,"--height",u[5]=="results"?"100%":"100svh")},i(u){o||(E(t.$$.fragment,u),E(c),o=!0)},o(u){j(t.$$.fragment,u),j(c),o=!1},d(u){u&&p(e),n[8](null),K(t),c&&c.d()}}}function Bo(n){let e,t,s=n[14]&&Bs(n);return{c(){s&&s.c(),e=X()},l(r){s&&s.l(r),e=X()},m(r,i){s&&s.m(r,i),$(r,e,i),t=!0},p(r,i){r[14]?s?(s.p(r,i),i&4&&E(s,1)):(s=Bs(r),s.c(),E(s,1),s.m(e.parentNode,e)):s&&(oe(),j(s,1,1,()=>{s=null}),ae())},i(r){t||(E(s),t=!0)},o(r){j(s),t=!1},d(r){r&&p(e),s&&s.d(r)}}}function Mo(n){let e,t,s,r=H(n[12]),i=[];for(let a=0;a<r.length;a+=1)i[a]=qs(Ds(n,r,a));let o=n[16]==1&&n[14]&&xs();return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=D(),o&&o.c(),t=X()},l(a){for(let l=0;l<i.length;l+=1)i[l].l(a);e=U(a),o&&o.l(a),t=X()},m(a,l){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(a,l);$(a,e,l),o&&o.m(a,l),$(a,t,l),s=!0},p(a,l){if(l&4){r=H(a[12]);let c;for(c=0;c<r.length;c+=1){const u=Ds(a,r,c);i[c]?i[c].p(u,l):(i[c]=qs(u),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=r.length}a[16]==1&&a[14]?o?l&4&&E(o,1):(o=xs(),o.c(),E(o,1),o.m(t.parentNode,t)):o&&(oe(),j(o,1,1,()=>{o=null}),ae())},i(a){s||(E(o),s=!0)},o(a){j(o),s=!1},d(a){a&&(p(e),p(t)),fe(i,a),o&&o.d(a)}}}function Bs(n){let e,t;return e=new Do({props:{experienceStarted:Ho,artists:n[0].reverse()}}),{c(){W(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,r){V(e,s,r),t=!0},p(s,r){const i={};r&1&&(i.artists=s[0].reverse()),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){K(e,s)}}}function Ms(n){let e,t,s=n[17].value+"",r,i;return{c(){e=O("p"),t=new Vs(!1),this.h()},l(o){e=A(o,"P",{class:!0});var a=I(e);t=Ks(a,!1),a.forEach(p),this.h()},h(){t.a=null,v(e,"class","text svelte-1a994vx"),re(e,"isActive",n[14])},m(o,a){$(o,e,a),t.m(s,e),i=!0},p(o,a){(!i||a&4)&&re(e,"isActive",o[14])},i(o){i||(o&&tt(()=>{i&&(r||(r=Wt(e,Xt,{y:20,duration:500},!0)),r.run(1))}),i=!0)},o(o){o&&(r||(r=Wt(e,Xt,{y:20,duration:500},!1)),r.run(0)),i=!1},d(o){o&&p(e),o&&r&&r.end()}}}function qs(n){let e,t=n[14]&&Ms(n);return{c(){t&&t.c(),e=X()},l(s){t&&t.l(s),e=X()},m(s,r){t&&t.m(s,r),$(s,e,r)},p(s,r){s[14]?t?(t.p(s,r),r&4&&E(t,1)):(t=Ms(s),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(oe(),j(t,1,1,()=>{t=null}),ae())},d(s){s&&p(e),t&&t.d(s)}}}function xs(n){let e,t;return e=new zo({}),{c(){W(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,r){V(e,s,r),t=!0},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){K(e,s)}}}function qo(n){let e,t,s,r;const i=[Mo,Bo],o=[];function a(l,c){return l[11]==="section"?0:l[11]=="voting"?1:-1}return~(e=a(n))&&(t=o[e]=i[e](n)),{c(){t&&t.c(),s=D()},l(l){t&&t.l(l),s=U(l)},m(l,c){~e&&o[e].m(l,c),$(l,s,c),r=!0},p(l,c){t&&t.p(l,c)},i(l){r||(E(t),r=!0)},o(l){j(t),r=!1},d(l){l&&p(s),~e&&o[e].d(l)}}}function Gs(n,e){let t,s,r;return s=new Wr({props:{index:e[16],cls:e[11]=="voting"?"":"vertical-center",$$slots:{default:[qo]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=X(),W(s.$$.fragment),this.h()},l(i){t=X(),J(s.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){$(i,t,o),V(s,i,o),r=!0},p(i,o){e=i;const a={};o&8388613&&(a.$$scope={dirty:o,ctx:e}),s.$set(a)},i(i){r||(E(s.$$.fragment,i),r=!0)},o(i){j(s.$$.fragment,i),r=!1},d(i){i&&p(t),K(s,i)}}}function xo(n){let e=[],t=new Map,s,r,i=H(ht.body.index||[]);const o=a=>a[16];for(let a=0;a<i.length;a+=1){let l=Ns(n,i,a),c=o(l);t.set(c,e[a]=Gs(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();s=X()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);s=X()},m(a,l){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,l);$(a,s,l),r=!0},p(a,l){l&5&&(i=H(ht.body.index||[]),oe(),e=er(e,l,o,1,a,i,t,s.parentNode,Cr,Gs,s,Ns),ae())},i(a){if(!r){for(let l=0;l<i.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)j(e[l]);r=!1},d(a){a&&p(s);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Hs(n){let e,t;return e=new ci({props:{debug:!1,full:!0,directions:n[2]===0?["right"]:["left","right"],size:n[2]===0?"100%":["33%","67%"],enableKeyboard:!0,marginTop:0,showArrows:!0}}),e.$on("tap",n[7]),{c(){W(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,r){V(e,s,r),t=!0},p(s,r){const i={};r&4&&(i.directions=s[2]===0?["right"]:["left","right"]),r&4&&(i.size=s[2]===0?"100%":["33%","67%"]),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){K(e,s)}}}function Ws(n){let e,t;return e=new Dr({}),{c(){W(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,r){V(e,s,r),t=!0},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){K(e,s)}}}function Go(n){let e,t,s,r,i,o=H(n[4]),a=[];for(let u=0;u<o.length;u+=1)a[u]=Fs(Us(n,o,u));let l=n[3]&&zs(n),c=n[5]=="results"&&Ws();return{c(){for(let u=0;u<a.length;u+=1)a[u].c();e=X(),t=D(),l&&l.c(),s=D(),c&&c.c(),r=X()},l(u){const d=Or("svelte-norw4s",document.head);for(let h=0;h<a.length;h+=1)a[h].l(d);e=X(),d.forEach(p),t=U(u),l&&l.l(u),s=U(u),c&&c.l(u),r=X()},m(u,d){for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(document.head,null);S(document.head,e),$(u,t,d),l&&l.m(u,d),$(u,s,d),c&&c.m(u,d),$(u,r,d),i=!0},p(u,[d]){if(d&16){o=H(u[4]);let h;for(h=0;h<o.length;h+=1){const f=Us(u,o,h);a[h]?a[h].p(f,d):(a[h]=Fs(f),a[h].c(),a[h].m(e.parentNode,e))}for(;h<a.length;h+=1)a[h].d(1);a.length=o.length}u[3]?l?(l.p(u,d),d&8&&E(l,1)):(l=zs(u),l.c(),E(l,1),l.m(s.parentNode,s)):l&&(oe(),j(l,1,1,()=>{l=null}),ae()),u[5]=="results"?c?d&32&&E(c,1):(c=Ws(),c.c(),E(c,1),c.m(r.parentNode,r)):c&&(oe(),j(c,1,1,()=>{c=null}),ae())},i(u){i||(E(l),E(c),i=!0)},o(u){j(l),j(c),i=!1},d(u){u&&(p(t),p(s),p(r)),fe(a,u),p(e),l&&l.d(u),c&&c.d(u)}}}let Ho=!1;function Wo(n,e,t){let s;se(n,Ue,f=>t(5,s=f));let{artists:r}=e,i,o=0,a=[2],l=!1;const c=({detail:f})=>{f==="right"?i.next():i.prev(),window.scrollTo(0,0)};et(async()=>{t(3,l=!0)});let u=[1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36].map(f=>`${pe}/assets/images/${f}.jpg`);u=[...u,...["1st","2nd","3rd","4th","5th"].map(f=>`${pe}/assets/toploaders/${f}.png`)];function d(f){Qe[f?"unshift":"push"](()=>{i=f,t(1,i)})}function h(f){o=f,t(2,o)}return n.$$set=f=>{"artists"in f&&t(0,r=f.artists)},[r,i,o,l,u,s,a,c,d,h]}class Jo extends Z{constructor(e){super(),ee(this,e,Wo,Go,Q,{artists:0})}}function Vo(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.17.0"),console.log("build: 2024-09-23-18:05"),console.log("--- --- --- --- --- ---")}const _r=[{name:"Seo Taiji & Kids ( )",id:"1","debut year":"1992",company:"",song:"Come Back Home",media_url:""},{name:"TVXQ! ()",id:"2","debut year":"2003",company:"SM",song:"Mirotic ()",media_url:""},{name:"BIGBANG",id:"3","debut year":"2006",company:"YG",song:"BANG BANG BANG",media_url:""},{name:"Girls' Generation ()",id:"4","debut year":"2007",company:"SM",song:"Gee",media_url:""},{name:"Wonder Girls",id:"5","debut year":"2007",company:"JYP",song:"Tell Me",media_url:""},{name:"2PM",id:"6","debut year":"2008",company:"JYP",song:"My House ()",media_url:""},{name:"SHINee",id:"7","debut year":"2008",company:"SM",song:"Replay (  )",media_url:""},{name:"2NE1",id:"8","debut year":"2009",company:"YG",song:"I AM THE BEST (   )",media_url:""},{name:"f(x)",id:"9","debut year":"2009",company:"SM",song:"4 Walls",media_url:""},{name:"EXO",id:"11","debut year":"2012",company:"SM",song:"Love Shot",media_url:""},{name:"BTS ()",id:"12","debut year":"2013",company:"Big Hit (now HYBE)",song:"Dynamite",media_url:""},{name:"GOT7",id:"13","debut year":"2014",company:"JYP",song:"You Calling My Name (   )",media_url:""},{name:"Red Velvet",id:"14","debut year":"2014",company:"SM",song:"Psycho",media_url:""},{name:"WINNER",id:"15","debut year":"2014",company:"YG",song:"REALLY REALLY",media_url:""},{name:"SEVENTEEN",id:"16","debut year":"2015",company:"Pledis (now HYBE)",song:"Super ()",media_url:""},{name:"TWICE",id:"17","debut year":"2015",company:"JYP",song:"FANCY",media_url:""},{name:"NCT",id:"18","debut year":"2016",company:"SM",song:"Love Talk (English ver by WayV)",media_url:""},{name:"BLACKPINK",id:"19","debut year":"2016",company:"YG",song:"How You Like That",media_url:""},{name:"Stray Kids",id:"20","debut year":"2018",company:"JYP",song:"God's Menu ()",media_url:""},{name:"(G)I-DLE (())",id:"21","debut year":"2018",company:"Cube",song:"Queencard ()",media_url:""},{name:"ITZY",id:"22","debut year":"2019",company:"JYP",song:"WANNABE",media_url:""},{name:"TXT (TOMORROW X TOGETHER)",id:"23","debut year":"2019",company:"Big Hit (now HYBE)",song:"0X1=LOVESONG (I Know I Love You) feat. Seori",media_url:""},{name:"TREASURE",id:"24","debut year":"2020",company:"YG",song:"DARARI",media_url:""},{name:"aespa",id:"25","debut year":"2020",company:"SM",song:"Next Level",media_url:""},{name:"ENHYPEN",id:"26","debut year":"2020",company:"Belift Lab (HYBE)",song:"FEVER",media_url:""},{name:"IVE",id:"27","debut year":"2021",company:"Starship",song:"LOVE DIVE",media_url:""},{name:"NMIXX",id:"28","debut year":"2022",company:"JYP",song:"O.O",media_url:""},{name:"LE SSERAFIM",id:"29","debut year":"2022",company:"Source Music (now HYBE)",song:"ANTIFRAGILE",media_url:""},{name:"NewJeans",id:"30","debut year":"2022",company:"ADOR (HYBE)",song:"OMG",media_url:""},{name:"ZEROBASEONE",id:"31","debut year":"2023",company:"WakeOne (Boys Planet)",song:"In Bloom",media_url:""},{name:"RIIZE",id:"32","debut year":"2023",company:"SM",song:"Get A Guitar",media_url:""},{name:"BABYMONSTER",id:"33","debut year":"2023",company:"YG",song:"SHEESH",media_url:""},{name:"TWS ()",id:"34","debut year":"2024",company:"Pledis (now HYBE)",song:"plot twist (    )",media_url:""},{name:"ILLIT",id:"35","debut year":"2024",company:"Belift Lab (HYBE)",song:"Magnetic",media_url:""},{name:"KATSEYE",id:"36","debut year":"2024",company:"HYBE x Geffen",song:"Touch",media_url:""}];function Js(n){let e,t;return e=new Jo({props:{artists:_r}}),{c(){W(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,r){V(e,s,r),t=!0},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){K(e,s)}}}function Ko(n){let e,t,s,r;e=new Rr({props:{title:n[2],description:n[3],url:n[4],preloadFont:n[1],keywords:n[5]}});let i=n[0]&&Js();return{c(){W(e.$$.fragment),t=D(),i&&i.c(),s=X()},l(o){J(e.$$.fragment,o),t=U(o),i&&i.l(o),s=X()},m(o,a){V(e,o,a),$(o,t,a),i&&i.m(o,a),$(o,s,a),r=!0},p(o,[a]){o[0]?i?a&1&&E(i,1):(i=Js(),i.c(),E(i,1),i.m(s.parentNode,s)):i&&(oe(),j(i,1,1,()=>{i=null}),ae())},i(o){r||(E(e.$$.fragment,o),E(i),r=!0)},o(o){j(e.$$.fragment,o),j(i),r=!1},d(o){o&&(p(t),p(s)),K(e,o),i&&i.d(o)}}}function Yo(n,e,t){let{data:s}=e,r=!1;Vo();const i=[],{title:o,description:a,url:l,keywords:c}=ht;return Tt("copy",ht),Tt("data",s.data),et(()=>{_r.forEach(u=>{u.artistId=u.id}),t(0,r=!0)}),n.$$set=u=>{"data"in u&&t(6,s=u.data)},[r,i,o,a,l,c,s]}class ra extends Z{constructor(e){super(),ee(this,e,Yo,Ko,Q,{data:6})}}export{ra as component};
