function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../chunks/browser.BxLFFwS7.js","../chunks/index.D4ZkoDCf.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{n as ie,a8 as ei,d as O,a9 as ti,aa as ri,s as xt,e as C,k as bt,Q as ni,c as P,p as v,f as R,T as ii,i as Je,F as gr,a as et,R as gn,S as it,r as mn,t as pn,j as Et,b as vn,l as Tt,g as yn,o as si,a2 as Rr}from"../chunks/scheduler.ByiTiKyc.js";import{S as $t,i as jt,t as Ne,g as ai,a as st,c as oi,b as Xt,d as Qt,m as er,e as tr}from"../chunks/index.Z7VoGhys.js";import{e as Ge,u as _n,f as wn}from"../chunks/each.CKdbOW8G.js";import"../chunks/transform.W7TN51b0.js";import"../chunks/index.D4ZkoDCf.js";import{_ as qe}from"../chunks/preload-helper.BQ24v_F8.js";const bn=typeof window<"u";let li=bn?()=>window.performance.now():()=>Date.now(),mr=bn?n=>requestAnimationFrame(n):ie;const Ue=new Set;function En(n){Ue.forEach(e=>{e.c(n)||(Ue.delete(e),e.f())}),Ue.size!==0&&mr(En)}function ci(n){let e;return Ue.size===0&&mr(En),{promise:new Promise(t=>{Ue.add(e={c:n,f:t})}),abort(){Ue.delete(e)}}}const Ot=new Map;let St=0;function ui(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function di(n,e){const t={stylesheet:ti(e),rules:{}};return Ot.set(n,t),t}function hi(n,e,t,r,i,s,a,o=0){const l=16.666/r;let u=`{
`;for(let p=0;p<=1;p+=l){const y=e+(t-e)*s(p);u+=p*100+`%{${a(y,1-y)}}
`}const c=u+`100% {${a(t,1-t)}}
}`,d=`__svelte_${ui(c)}_${o}`,h=ei(n),{stylesheet:f,rules:g}=Ot.get(h)||di(h,n);g[d]||(g[d]=!0,f.insertRule(`@keyframes ${d} ${c}`,f.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${d} ${r}ms linear ${i}ms 1 both`,St+=1,d}function fi(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=t.length-r.length;i&&(n.style.animation=r.join(", "),St-=i,St||gi())}function gi(){mr(()=>{St||(Ot.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&O(e)}),Ot.clear())})}function Tn(n,e,t,r){if(!e)return ie;const i=n.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return ie;const{delay:s=0,duration:a=300,easing:o=ri,start:l=li()+s,end:u=l+a,tick:c=ie,css:d}=t(n,{from:e,to:i},r);let h=!0,f=!1,g;function m(){d&&(g=hi(n,0,1,a,s,o,d)),s||(f=!0)}function p(){d&&fi(n,g),h=!1}return ci(y=>{if(!f&&y>=l&&(f=!0),f&&y>=u&&(c(1,0),p()),!h)return!1;if(f){const _=y-l,S=0+1*o(_/a);c(S,1-S)}return!0}),m(),c(0,1),p}function On(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:r}=e,i=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=r,mi(n,i)}}function mi(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const r=getComputedStyle(n),i=r.transform==="none"?"":r.transform;n.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function Cr(n,e,t){const r=n.slice();return r[5]=e[t],r}function Pr(n){let e,t;return{c(){e=C("link"),this.h()},l(r){e=P(r,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){v(e,"rel","preload"),v(e,"href",t=n[5]),v(e,"as","font"),v(e,"type","font/woff2"),v(e,"crossorigin","")},m(r,i){Je(r,e,i)},p(r,i){i&16&&t!==(t=r[5])&&v(e,"href",t)},d(r){r&&O(e)}}}function pi(n){let e,t,r,i,s,a,o,l,u,c,d,h,f,g,m,p,y,_,S,E,b,I,k,G,V,Q;document.title=e=n[0];let ee=Ge(n[4]),x=[];for(let A=0;A<ee.length;A+=1)x[A]=Pr(Cr(n,ee,A));return{c(){t=C("meta"),r=C("meta"),i=C("meta"),s=C("meta"),a=C("meta"),o=C("meta"),l=C("meta"),u=C("meta"),c=C("meta"),d=C("meta"),f=C("meta"),g=C("meta"),m=C("meta"),p=C("meta"),y=C("meta"),_=C("meta"),S=C("meta"),E=C("meta"),b=C("meta"),k=C("meta"),G=C("link");for(let A=0;A<x.length;A+=1)x[A].c();Q=bt(),this.h()},l(A){const w=ni("svelte-1htu80s",document.head);t=P(w,"META",{name:!0,content:!0}),r=P(w,"META",{name:!0,content:!0}),i=P(w,"META",{name:!0,content:!0}),s=P(w,"META",{property:!0,content:!0}),a=P(w,"META",{property:!0,content:!0}),o=P(w,"META",{property:!0,content:!0}),l=P(w,"META",{property:!0,content:!0}),u=P(w,"META",{property:!0,content:!0}),c=P(w,"META",{property:!0,content:!0}),d=P(w,"META",{property:!0,content:!0}),f=P(w,"META",{property:!0,content:!0}),g=P(w,"META",{property:!0,content:!0}),m=P(w,"META",{property:!0,content:!0}),p=P(w,"META",{name:!0,content:!0}),y=P(w,"META",{name:!0,content:!0}),_=P(w,"META",{name:!0,content:!0}),S=P(w,"META",{name:!0,content:!0}),E=P(w,"META",{name:!0,content:!0}),b=P(w,"META",{name:!0,content:!0}),k=P(w,"META",{name:!0,content:!0}),G=P(w,"LINK",{rel:!0,href:!0});for(let j=0;j<x.length;j+=1)x[j].l(w);Q=bt(),w.forEach(O),this.h()},h(){v(t,"name","description"),v(t,"content",n[1]),v(r,"name","author"),v(r,"content","The Pudding"),v(i,"name","news_keywords"),v(i,"content",n[3]),v(s,"property","og:title"),v(s,"content",n[0]),v(a,"property","og:site_name"),v(a,"content","The Pudding"),v(o,"property","og:url"),v(o,"content",n[2]),v(l,"property","og:description"),v(l,"content",n[1]),v(u,"property","og:type"),v(u,"content","article"),v(c,"property","og:locale"),v(c,"content","en_US"),v(d,"property","og:image"),v(d,"content",h=n[2]+"/assets/social-facebook.jpg"),v(f,"property","og:image:type"),v(f,"content","image/jpeg"),v(g,"property","og:image:width"),v(g,"content","1200"),v(m,"property","og:image:height"),v(m,"content","600"),v(p,"name","twitter:card"),v(p,"content","summary_large_image"),v(y,"name","twitter:site"),v(y,"content","https://pudding.cool"),v(_,"name","twitter:creator"),v(_,"content","@puddingviz"),v(S,"name","twitter:title"),v(S,"content",n[0]),v(E,"name","twitter:description"),v(E,"content",n[1]),v(b,"name","twitter:image:src"),v(b,"content",I=n[2]+"/assets/social-twitter.jpg"),v(k,"name","robots"),v(k,"content","max-image-preview:large"),v(G,"rel","canonical"),v(G,"href",V=n[2]+"/")},m(A,w){R(document.head,t),R(document.head,r),R(document.head,i),R(document.head,s),R(document.head,a),R(document.head,o),R(document.head,l),R(document.head,u),R(document.head,c),R(document.head,d),R(document.head,f),R(document.head,g),R(document.head,m),R(document.head,p),R(document.head,y),R(document.head,_),R(document.head,S),R(document.head,E),R(document.head,b),R(document.head,k),R(document.head,G);for(let j=0;j<x.length;j+=1)x[j]&&x[j].m(document.head,null);R(document.head,Q)},p(A,[w]){if(w&1&&e!==(e=A[0])&&(document.title=e),w&2&&v(t,"content",A[1]),w&8&&v(i,"content",A[3]),w&1&&v(s,"content",A[0]),w&4&&v(o,"content",A[2]),w&2&&v(l,"content",A[1]),w&4&&h!==(h=A[2]+"/assets/social-facebook.jpg")&&v(d,"content",h),w&1&&v(S,"content",A[0]),w&2&&v(E,"content",A[1]),w&4&&I!==(I=A[2]+"/assets/social-twitter.jpg")&&v(b,"content",I),w&4&&V!==(V=A[2]+"/")&&v(G,"href",V),w&16){ee=Ge(A[4]);let j;for(j=0;j<ee.length;j+=1){const _e=Cr(A,ee,j);x[j]?x[j].p(_e,w):(x[j]=Pr(_e),x[j].c(),x[j].m(Q.parentNode,Q))}for(;j<x.length;j+=1)x[j].d(1);x.length=ee.length}},i:ie,o:ie,d(A){O(t),O(r),O(i),O(s),O(a),O(o),O(l),O(u),O(c),O(d),O(f),O(g),O(m),O(p),O(y),O(_),O(S),O(E),O(b),O(k),O(G),ii(x,A),O(Q)}}}function vi(n,e,t){let{title:r="Title TK"}=e,{description:i="Description TK"}=e,{url:s="https://pudding.cool"}=e,{keywords:a=""}=e,{preloadFont:o=[]}=e;return n.$$set=l=>{"title"in l&&t(0,r=l.title),"description"in l&&t(1,i=l.description),"url"in l&&t(2,s=l.url),"keywords"in l&&t(3,a=l.keywords),"preloadFont"in l&&t(4,o=l.preloadFont)},[r,i,s,a,o]}class yi extends $t{constructor(e){super(),jt(this,e,vi,pi,xt,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}const _i=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qe(()=>Promise.resolve().then(()=>ut),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class pr extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class wi extends pr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bi extends pr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ei extends pr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ti=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class Oi{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=_i(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Ti(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=t;let o={},l;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=a):typeof a=="string"?(o["Content-Type"]="text/plain",l=a):typeof FormData<"u"&&a instanceof FormData?l=a:(o["Content-Type"]="application/json",l=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:l}).catch(f=>{throw new wi(f)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new bi(u);if(!u.ok)throw new Ei(u);let d=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return d==="application/json"?h=yield u.json():d==="application/octet-stream"?h=yield u.blob():d==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var Si=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},He=Si();const Di=He.fetch,vr=He.fetch.bind(He),Sn=He.Headers,ki=He.Request,Ai=He.Response,ut=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sn,Request:ki,Response:Ai,default:vr,fetch:Di},Symbol.toStringTag,{value:"Module"}));class Ii extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Ri{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=vr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let u=null,c=null,d=null,h=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=y:c=JSON.parse(y))}const m=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),p=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");m&&p&&p.length>1&&(d=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,h=406,f="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const m=await s.text();try{u=JSON.parse(m),Array.isArray(u)&&s.status===404&&(c=[],u=null,h=200,f="OK")}catch{s.status===404&&m===""?(h=204,f="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,f="OK"),u&&this.shouldThrowOnError)throw new Ii(u)}return{error:u,data:c,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}class Ci extends Ri{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class je extends Ci{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class Pi{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new je({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new je({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new je({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new je({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new je({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const xi="1.9.2",$i={"X-Client-Info":`postgrest-js/${xi}`};class yr{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},$i),t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new Pi(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new yr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let s;const a=new URL(`${this.url}/rpc/${e}`);let o;r?(s="HEAD",Object.entries(t).forEach(([u,c])=>{a.searchParams.append(u,`${c}`)})):(s="POST",o=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new je({method:s,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}const ji="2.9.3",Li={"X-Client-Info":`realtime-js/${ji}`},Ni="1.0.0",Dn=1e4,Ui=1e3;var Me;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Me||(Me={}));var Z;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Z||(Z={}));var oe;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(oe||(oe={}));var rr;(function(n){n.websocket="websocket"})(rr||(rr={}));var Se;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Se||(Se={}));class kn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Mi{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+i));a=a+i;const l=r.decode(e.slice(a,a+s));a=a+s;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Ht{constructor(e,t,r={},i=Dn){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xr;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(xr||(xr={}));class tt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tt.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=tt.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=tt.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(s,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=s[u];if(d){const h=c.map(p=>p.presence_ref),f=d.map(p=>p.presence_ref),g=c.filter(p=>f.indexOf(p.presence_ref)<0),m=d.filter(p=>h.indexOf(p.presence_ref)<0);g.length>0&&(o[u]=g),m.length>0&&(l[u]=m)}else o[u]=c}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const d=e[o].map(f=>f.presence_ref),h=c.filter(f=>d.indexOf(f.presence_ref)<0);e[o].unshift(...h)}r(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[o]=u,i(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})($||($={}));const $r=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,a)=>(s[a]=Fi(a,n,e,i),s),{})},Fi=(n,e,t,r)=>{const i=e.find(o=>o.name===n),s=i==null?void 0:i.type,a=t[n];return s&&!r.includes(s)?An(s,a):nr(a)},An=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return qi(e,t)}switch(n){case $.bool:return Bi(e);case $.float4:case $.float8:case $.int2:case $.int4:case $.int8:case $.numeric:case $.oid:return zi(e);case $.json:case $.jsonb:return Gi(e);case $.timestamp:return Hi(e);case $.abstime:case $.date:case $.daterange:case $.int4range:case $.int8range:case $.money:case $.reltime:case $.text:case $.time:case $.timestamptz:case $.timetz:case $.tsrange:case $.tstzrange:return nr(e);default:return nr(e)}},nr=n=>n,Bi=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},zi=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Gi=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},qi=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const a=n.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>An(e,o))}return n},Hi=n=>typeof n=="string"?n.replace(" ","T"):n;var jr;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(jr||(jr={}));var Lr;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(Lr||(Lr={}));var Nr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Nr||(Nr={}));class _r{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ht(this,oe.join,this.params,this.timeout),this.rejoinTimer=new kn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Z.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(oe.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new tt(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const o={},l={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,h=(c=d==null?void 0:d.length)!==null&&c!==void 0?c:0,f=[];for(let g=0;g<h;g++){const m=d[g],{filter:{event:p,schema:y,table:_,filter:S}}=m,E=u&&u[g];if(E&&E.event===p&&E.schema===y&&E.table===_&&E.filter===S)f.push(Object.assign(Object.assign({},m),{id:E.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,o={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=t.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Z.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(oe.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Ht(this,oe.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ht(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=oe;if(r&&[o,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,m,p;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(m=f.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===a}).map(f=>f.callback(h,r)):(s=this.bindings[a])===null||s===void 0||s.filter(f=>{var g,m,p,y,_,S;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const E=f.id,b=(g=f.filter)===null||g===void 0?void 0:g.event;return E&&((m=t.ids)===null||m===void 0?void 0:m.includes(E))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const E=(_=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return E==="*"||E===((S=t==null?void 0:t.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:m,table:p,commit_timestamp:y,type:_,errors:S}=g;h=Object.assign(Object.assign({},{schema:m,table:p,commit_timestamp:y,eventType:_,new:{},old:{},errors:S}),this._getPayloadRecords(g))}f.callback(h,r)})}_isClosed(){return this.state===Z.closed}_isJoined(){return this.state===Z.joined}_isJoining(){return this.state===Z.joining}_isLeaving(){return this.state===Z.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&_r.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(oe.close,{},e)}_onError(e){this._on(oe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Z.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=$r(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=$r(e.columns,e.old_record)),t}}const Wi=()=>{},Ki=typeof WebSocket<"u";class Vi{constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Li,this.params={},this.timeout=Dn,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Wi,this.conn=null,this.sendBuffer=[],this.serializer=new Mi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>qe(()=>Promise.resolve().then(()=>ut),void 0,import.meta.url).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${rr.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,a)=>a(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new kn(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Ki){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Ji(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),qe(()=>import("../chunks/browser.BxLFFwS7.js").then(e=>e.b),__vite__mapDeps([0,1]),import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Me.connecting:return Se.Connecting;case Me.open:return Se.Open;case Me.closing:return Se.Closing;default:return Se.Closed}}isConnected(){return this.connectionState()===Se.Open}channel(e,t={config:{}}){const r=new _r(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(oe.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ni}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:a}=t;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(oe.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ui,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Ji{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Me.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class wr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function q(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Yi extends wr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ur extends wr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Zi=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const In=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qe(()=>Promise.resolve().then(()=>ut),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Xi=()=>Zi(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qe(()=>Promise.resolve().then(()=>ut),void 0,import.meta.url)).Response:Response});var Ye=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const Wt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Qi=(n,e)=>Ye(void 0,void 0,void 0,function*(){const t=yield Xi();n instanceof t?n.json().then(r=>{e(new Yi(Wt(r),n.status||500))}).catch(r=>{e(new Ur(Wt(r),r))}):e(new Ur(Wt(n),n))}),es=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function Lt(n,e,t,r,i,s){return Ye(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,es(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Qi(l,o))})})}function ir(n,e,t,r){return Ye(this,void 0,void 0,function*(){return Lt(n,"GET",e,t,r)})}function fe(n,e,t,r,i){return Ye(this,void 0,void 0,function*(){return Lt(n,"POST",e,r,i,t)})}function ts(n,e,t,r,i){return Ye(this,void 0,void 0,function*(){return Lt(n,"PUT",e,r,i,t)})}function Rn(n,e,t,r,i){return Ye(this,void 0,void 0,function*(){return Lt(n,"DELETE",e,r,i,t)})}var te=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const rs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ns{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=In(i)}uploadOrUpdate(e,t,r,i){return te(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Mr),i),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl)):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),d=yield c.json();return c.ok?{data:{path:l,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(s){if(q(s))return{data:null,error:s};throw s}})}upload(e,t,r){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return te(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:Mr.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(q(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return te(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield fe(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+r.url),s=i.searchParams.get("token");if(!s)throw new wr("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}update(e,t,r){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return te(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}})}copy(e,t){return te(this,void 0,void 0,function*(){try{return{data:{path:(yield fe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return te(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield fe(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(q(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return te(this,void 0,void 0,function*(){try{const i=yield fe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(q(i))return{data:null,error:i};throw i}})}download(e,t){return te(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield ir(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(q(o))return{data:null,error:o};throw o}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return te(this,void 0,void 0,function*(){try{return{data:yield Rn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}list(e,t,r){return te(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},rs),t),{prefix:e||""});return{data:yield fe(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(q(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const is="2.5.5",ss={"X-Client-Info":`storage-js/${is}`};var Re=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class as{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},ss),t),this.fetch=In(r)}listBuckets(){return Re(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(q(e))return{data:null,error:e};throw e}})}getBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Re(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Re(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield Rn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}}class os extends as{constructor(e,t={},r){super(e,t,r)}from(e){return new ns(this.url,this.headers,e,this.fetch)}}const ls="2.39.8";let Qe="";typeof Deno<"u"?Qe="deno":typeof document<"u"?Qe="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qe="react-native":Qe="node";const cs={"X-Client-Info":`supabase-js-${Qe}/${ls}`},us={headers:cs},ds={schema:"public"},hs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fs={};var gs=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const ms=n=>{let e;return n?e=n:typeof fetch>"u"?e=vr:e=fetch,(...t)=>e(...t)},ps=()=>typeof Headers>"u"?Sn:Headers,vs=(n,e,t)=>{const r=ms(t),i=ps();return(s,a)=>gs(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:n;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:u}))})};function ys(n){return n.replace(/\/$/,"")}function _s(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:a,auth:o,realtime:l,global:u}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s)}}function ws(n){return Math.round(Date.now()/1e3)+n}function bs(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ae=()=>typeof document<"u",we={tested:!1,writable:!1},rt=()=>{if(!ae())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(we.tested)return we.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),we.tested=!0,we.writable=!0}catch{we.tested=!0,we.writable=!1}return we.writable};function Kt(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const Cn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qe(()=>Promise.resolve().then(()=>ut),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Es=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",be=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},gt=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Vt=async(n,e)=>{await n.removeItem(e)};function Ts(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,a,o,l,u,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)a=e.indexOf(n.charAt(c++)),o=e.indexOf(n.charAt(c++)),l=e.indexOf(n.charAt(c++)),u=e.indexOf(n.charAt(c++)),r=a<<2|o>>4,i=(o&15)<<4|l>>2,s=(l&3)<<6|u,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),u!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Nt{constructor(){this.promise=new Nt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Nt.promiseConstructor=Promise;function Fr(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(Ts(r))}async function Os(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Ss(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function Ds(n){return("0"+n.toString(16)).substr(-2)}function Ce(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Ds).join("")}async function ks(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function As(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pe(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await ks(n);return As(t)}class br extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function T(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Is extends br{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Rs(n){return T(n)&&n.name==="AuthApiError"}class Pn extends br{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ae extends br{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class xe extends Ae{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Jt extends Ae{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class mt extends Ae{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class pt extends Ae{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Br extends Ae{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sr extends Ae{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function Yt(n){return T(n)&&n.name==="AuthRetryableFetchError"}class Cs extends Ae{constructor(e,t,r){super(e,"AuthWeakPasswordError",t),this.reasons=r}}var Ps=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Le=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),xs=[502,503,504];async function zr(n){if(!Es(n))throw new sr(Le(n),0);if(xs.includes(n.status))throw new sr(Le(n),n.status);let e;try{e=await n.json()}catch(t){throw new Pn(Le(t),t)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)?new Cs(Le(e),n.status,e.weak_password.reasons):new Is(Le(e),n.status||500)}const $s=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function D(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await js(n,e,t+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function js(n,e,t,r,i,s){const a=$s(e,r,i,s);let o;try{o=await n(t,a)}catch(l){throw console.error(l),new sr(Le(l),0)}if(o.ok||await zr(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await zr(l)}}function Te(n){var e;let t=null;Ms(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=ws(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Gr(n){const e=Te(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ge(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Ls(n){return{data:n,error:null}}function Ns(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,a=Ps(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Us(n){return n}function Ms(n){return n.access_token&&n.refresh_token&&n.expires_in}var Fs=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Bs{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Cn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await D(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await D(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ge})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Fs(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await D(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ns,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(T(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await D(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ge})}catch(t){if(T(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await D(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Us});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);u[`${p}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(T(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await D(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ge})}catch(t){if(T(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await D(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ge})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await D(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ge})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await D(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(T(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await D(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}}}const xn="0.0.0",zs="http://localhost:9999",Gs="supabase.auth.token",qs={"X-Client-Info":`gotrue-js/${xn}`},qr=10,Hs={getItem:n=>rt()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{rt()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{rt()&&globalThis.localStorage.removeItem(n)}};function Hr(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Ws(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $e={debug:!!(globalThis&&rt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $n extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ks extends $n{}async function Vs(n,e,t){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),$e.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw $e.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Ks(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if($e.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}Ws();const Js={url:zs,storageKey:Gs,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qs,flowType:"implicit",debug:!1},Ze=30*1e3,Wr=3;async function Kr(n,e,t){return await t()}class at{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=at.nextInstanceID,at.nextInstanceID+=1,this.instanceID>0&&ae()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Js),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Bs({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Cn(i.fetch),this.lock=i.lock||Kr,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,i.lock?this.lock=i.lock:ae()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Vs:this.lock=Kr,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:rt()?this.storage=Hs:(this.memoryStorage={},this.storage=Hr(this.memoryStorage)):(this.memoryStorage={},this.storage=Hr(this.memoryStorage)),ae()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=ae()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return T(e)?{error:e}:{error:new Pn("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,r,i;try{await this._removeSession();let s;if("email"in e){const{email:c,password:d,options:h}=e;let f=null,g=null;if(this.flowType==="pkce"){const m=Ce();await be(this.storage,`${this.storageKey}-code-verifier`,m),f=await Pe(m),g=m===f?"plain":"s256"}s=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},xform:Te})}else if("phone"in e){const{phone:c,password:d,options:h}=e;s=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Te})}else throw new mt("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(T(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:s,password:a,options:o}=e;t=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gr})}else if("phone"in e){const{phone:s,password:a,options:o}=e;t=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gr})}else throw new mt("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Jt}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await gt(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/"),{data:s,error:a}=await D(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Te});return await Vt(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Jt}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:i,access_token:s,nonce:a}=e,o=await D(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Te}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Jt}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:l}=e;let u=null,c=null;if(this.flowType==="pkce"){const h=Ce();await be(this.storage,`${this.storageKey}-code-verifier`,h),u=await Pe(h),c=h===u?"plain":"s256"}const{error:d}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new mt("You must provide either an email or phone number.")}catch(o){if(T(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await D(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Te});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(T(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{await this._removeSession();let s=null,a=null;if(this.flowType==="pkce"){const o=Ce();await be(this.storage,`${this.storageKey}-code-verifier`,o),s=await Pe(o),a=o===s?"plain":"s256"}return await D(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Ls})}catch(s){if(T(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new xe;const{error:i}=await D(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(T(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await D(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:o}=await D(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new mt("You must provide either an email or phone number and a type")}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await gt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r)return{data:{session:e},error:null};const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ge}):await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)throw a;return await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:ge})})}catch(t){if(T(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new xe;const a=i.session;let o=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const d=Ce();await be(this.storage,`${this.storageKey}-code-verifier`,d),o=await Pe(d),l=d===o?"plain":"s256"}const{data:u,error:c}=await D(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:ge});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Fr(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xe;const t=Date.now()/1e3;let r=t,i=!0,s=null;const a=Fr(e.access_token);if(a.exp&&(r=a.exp,i=r<=t),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(T(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new xe;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!ae())throw new pt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new pt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Br("Not a valid PKCE flow url.");const t=Kt(window.location.href);if(e){if(!t.code)throw new Br("No code detected.");const{data:_,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:_.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new pt(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=t;if(!s||!o||!a||!u)throw new pt("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(o);let h=c+d;l&&(h=parseInt(l));const f=h-c;f*1e3<=Ze&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const g=h-d;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",g,h,c);const{data:m,error:p}=await this._getUser(s);if(p)throw p;const y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(t){if(T(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=Kt(window.location.href);return!!(ae()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Kt(window.location.href),t=await gt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Rs(o)&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Vt(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=bs(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){const s=Ce();await be(this.storage,`${this.storageKey}-code-verifier`,`${s}/PASSWORD_RECOVERY`),r=await Pe(s),i=s===r?"plain":"s256"}try{return await D(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(T(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,u,c;const{data:d,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await D(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return ae()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(T(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)throw a;return await D(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(T(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Ss(async i=>(await Os(i*200),this._debug(t,"refreshing attempt",i),await D(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Te})),(i,s,a)=>a&&a.error&&Yt(a.error)&&Date.now()+(i+1)*200-r<Ze)}catch(r){if(this._debug(t,"error",r),T(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ae()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await gt(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+qr;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${qr}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Yt(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new xe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Nt;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new xe;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),T(s)){const a={session:null,error:s};return Yt(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await be(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Vt(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ae()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ze);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ze);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ze}ms, refresh threshold is ${Wr} ticks`),i<=Wr&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $n)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ae()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const s=Ce();await be(this.storage,`${this.storageKey}-code-verifier`,s);const a=await Pe(s),o=s===a?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",a,"method",o);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await D(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(T(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:l}=await D(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(T(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:o}=await D(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(T(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await D(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(T(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}at.nextInstanceID=0;class Ys extends at{constructor(e){super(e)}}var Zs=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class Xs{constructor(e,t,r){var i,s,a,o,l,u,c,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=ys(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g={db:ds,realtime:fs,auth:Object.assign(Object.assign({},hs),{storageKey:f}),global:us},m=_s(r??{},g);this.storageKey=(s=(i=m.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=(a=m.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,(u=m.global)===null||u===void 0?void 0:u.fetch),this.fetch=vs(t,this._getAccessToken.bind(this),(c=m.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},m.realtime)),this.rest=new yr(`${h}/rest/v1`,{headers:this.headers,schema:(d=m.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Oi(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new os(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Zs(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,debug:o},l,u){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ys({url:this.authUrl,headers:Object.assign(Object.assign({},c),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:a,debug:o,fetch:u})}_initRealtimeClient(e){return new Vi(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Qs=(n,e,t)=>new Xs(n,e,t),ea="https://aeyqvohamxphnokxqbab.supabase.co",ta="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFleXF2b2hhbXhwaG5va3hxYmFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTEwNjI4MTEsImV4cCI6MjAyNjYzODgxMX0.yWiXfS1QclI1U6LHsgWv7HV3ryUTZHMfqU8YwLMccnY";Qs(ea,ta);const ra=[{name:"Seo Taiji",id:"1","debut year":"1992","debut song":"Seo Taiji","highest mv views":"Come Back Home https://youtu.be/q3xy4p2JTfU?si=ykWzTIrIAda-Ttn5",image:""},{name:"HOT",id:"2","debut year":"1996","debut song":"HOT","highest mv views":"",image:""},{name:"S.E.S.",id:"3","debut year":"1997","debut song":"S.E.S.","highest mv views":"",image:""},{name:"TVXQ",id:"4","debut year":"Dec 2003","debut song":"TVXQ","highest mv views":"",image:""},{name:"Super Junior",id:"5","debut year":"2005","debut song":"Super Junior","highest mv views":"",image:""},{name:"Big Bang",id:"6","debut year":"2006","debut song":"Big Bang","highest mv views":"",image:""},{name:"Girls' Generation",id:"7","debut year":"2007","debut song":"Girls' Generation","highest mv views":"",image:""},{name:"Wonder Girls",id:"8","debut year":"2007","debut song":"Wonder Girls","highest mv views":"",image:""},{name:"2PM",id:"9","debut year":"2008","debut song":"2PM","highest mv views":"",image:""},{name:"Shinee",id:"10","debut year":"2008","debut song":"Shinee","highest mv views":"Ring Ding Dong https://www.youtube.com/watch?v=roughtzsCDI",image:""},{name:"2NE1",id:"11","debut year":"2009","debut song":"2NE1","highest mv views":"",image:""},{name:"BEAST",id:"12","debut year":"2009","debut song":"BEAST","highest mv views":"",image:""},{name:"f(x)",id:"13","debut year":"2009","debut song":"f(x)","highest mv views":"",image:""},{name:"Miss A",id:"14","debut year":"2010","debut song":"Miss A","highest mv views":"",image:""},{name:"Sistar",id:"15","debut year":"2010","debut song":"Sistar","highest mv views":"나혼자 https://youtu.be/E0ZHXVp_wUE?feature=shared",image:""},{name:"EXO",id:"16","debut year":"Dec 2012","debut song":"EXO","highest mv views":"Love Shot https://www.youtube.com/watch?v=pSudEWBAYRE",image:""},{name:"BTS",id:"17","debut year":"2013","debut song":"BTS","highest mv views":"DYNAMITE https://www.youtube.com/watch?v=gdZLi9oWNZg",image:""},{name:"GOT7",id:"18","debut year":"2014","debut song":"GOT7","highest mv views":"Just right https://youtu.be/vrdk3IGcau8?feature=shared",image:""},{name:"Mamamoo",id:"19","debut year":"2014","debut song":"Mamamoo","highest mv views":"Hip https://youtu.be/KhTeiaCezwM?feature=shared",image:""},{name:"Red Velvet",id:"20","debut year":"2014","debut song":"Red Velvet","highest mv views":"Bad Boy https://youtu.be/J_CFBjAyPWE?feature=shared",image:""},{name:"WINNER",id:"21","debut year":"2014","debut song":"WINNER","highest mv views":"REALLY REALLY https://youtu.be/4tBnF46ybZk?feature=shared",image:""},{name:"GFriend",id:"22","debut year":"2015","debut song":"GFriend","highest mv views":"MAGO https://youtu.be/LmBYPXGqtss?feature=shared",image:""},{name:"iKON",id:"23","debut year":"2015","debut song":"iKON","highest mv views":"Love Scenario https://youtu.be/vecSVX1QYbQ?feature=shared",image:""},{name:"Oh My Girl",id:"24","debut year":"2015","debut song":"Oh My Girl","highest mv views":"Nonstop https://www.youtube.com/watch?v=iDjQSdN_ig8",image:""},{name:"Seventeen",id:"25","debut year":"2015","debut song":"Seventeen","highest mv views":"Don't Wanna Cry https://youtu.be/zEkg4GBQumc?feature=shared",image:""},{name:"TWICE",id:"26","debut year":"2015","debut song":"TWICE","highest mv views":"What is Love? https://www.youtube.com/watch?v=i0p1bmr0EmE",image:""},{name:"NCT",id:"27","debut year":"Apr 9, 2016","debut song":"NCT","highest mv views":"Make A Wish https://youtu.be/tyrVtwE8Gv0?feature=shared",image:""},{name:"I.O.I",id:"28","debut year":"May 4, 2016","debut song":"I.O.I","highest mv views":"Very Very Very https://youtu.be/GdxvD7r58ng?feature=shared",image:""},{name:"BLACKPINK",id:"29","debut year":"Aug 8, 2016","debut song":"BLACKPINK","highest mv views":"DDU-DU DDU-DU https://www.youtube.com/watch?v=IHNzOHi8sJs",image:""},{name:"Wanna One",id:"30","debut year":"2017","debut song":"Wanna One","highest mv views":"Boomerang https://www.youtube.com/watch?v=pmMjkMtpnTc",image:""},{name:"Stray Kids",id:"31","debut year":"Mar 25, 2018","debut song":"Stray Kids","highest mv views":"God's Menu https://www.youtube.com/watch?v=TQTlCHxyuu8",image:""},{name:"(G)I-DLE",id:"32","debut year":"May 1, 2018","debut song":"(G)I-DLE","highest mv views":"Queencard https://youtu.be/7HDeem-JaSY?feature=shared",image:""},{name:"IZONE",id:"33","debut year":"Oct 29, 2018","debut song":"IZONE","highest mv views":"Fiesta https://www.youtube.com/watch?v=eDEFolvLn0A",image:""},{name:"ITZY",id:"34","debut year":"2019","debut song":"ITZY","highest mv views":"WANNABE https://www.youtube.com/watch?v=fE2h3lGlOsk",image:""},{name:"TXT",id:"35","debut year":"2019","debut song":"TXT","highest mv views":"Blue Hour https://youtu.be/Vd9QkWsd5p4?feature=shared",image:""},{name:"TREASURE",id:"36","debut year":"2020","debut song":"TREASURE","highest mv views":"JIKJIN https://youtu.be/ZJaKdBBzUYk?feature=shared",image:""},{name:"aespa",id:"37","debut year":"2020","debut song":"aespa","highest mv views":"Next Level https://youtu.be/4TWR90KJl84?feature=shared",image:""},{name:"ENHYPEN",id:"38","debut year":"2020","debut song":"ENHYPEN","highest mv views":"Drunk-Dazed",image:""},{name:"IVE",id:"39","debut year":"Dec 2021","debut song":"IVE","highest mv views":"Love Dive",image:""},{name:"Kep1er",id:"40","debut year":"Jan 3, 2022","debut song":"Kep1er","highest mv views":"Up!",image:""},{name:"NMIXX",id:"41","debut year":"Feb 22, 2022","debut song":"NMIXX","highest mv views":"DICE",image:""},{name:"LE SSERAFIM",id:"42","debut year":"May 2, 2022","debut song":"LE SSERAFIM","highest mv views":"ANTIFRAGILE",image:""},{name:"NewJeans",id:"43","debut year":"July 22, 2022","debut song":"NewJeans","highest mv views":"Super Shy",image:""},{name:"BOYNEXTDOOR",id:"44","debut year":"2023","debut song":"BOYNEXTDOOR","highest mv views":"But Sometimes (뭣 같아)",image:""},{name:"ZEROBASEONE",id:"45","debut year":"2023","debut song":"ZEROBASEONE","highest mv views":"CRUSH (가시)",image:""},{name:"RIIZE",id:"46","debut year":"2023","debut song":"RIIZE","highest mv views":"Talk Saxy",image:""},{name:"BabyMonster",id:"47","debut year":"2023","debut song":"BabyMonster","highest mv views":"Stuck in the Middle",image:""},{name:"TWS",id:"48","debut year":"2024","debut song":"TWS","highest mv views":"BFF",image:""},{name:"VCHA",id:"49","debut year":"2024","debut song":"VCHA","highest mv views":"Y.O.Universe https://www.youtube.com/watch?v=M8EsxRh0zOc",image:""},{name:"ILLIT",id:"50","debut year":"2024","debut song":"ILLIT","highest mv views":"",image:""}];function na(n){const e=n-1;return e*e*e+1}function jn(n,{from:e,to:t},r={}){const i=getComputedStyle(n),s=i.transform==="none"?"":i.transform,[a,o]=i.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*a/t.width-(t.left+a),u=e.top+e.height*o/t.height-(t.top+o),{delay:c=0,duration:d=f=>Math.sqrt(f)*120,easing:h=na}=r;return{delay:c,duration:gr(d)?d(Math.sqrt(l*l+u*u)):d,easing:h,css:(f,g)=>{const m=g*l,p=g*u,y=f+g*e.width/t.width,_=f+g*e.height/t.height;return`transform: ${s} translate(${m}px, ${p}px) scale(${y}, ${_});`}}}function Vr(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Dt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vr(Object(t),!0).forEach(function(r){We(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vr(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nt(n){"@babel/helpers - typeof";return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(n)}function We(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ia(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function sa(n,e){if(n==null)return{};var t=ia(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function aa(n,e){return la(n)||ua(n,e)||Er(n,e)||ha()}function ne(n){return oa(n)||ca(n)||Er(n)||da()}function oa(n){if(Array.isArray(n))return ar(n)}function la(n){if(Array.isArray(n))return n}function ca(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ua(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,a,o;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function Er(n,e){if(n){if(typeof n=="string")return ar(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ar(n,e)}}function ar(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function da(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ha(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dt(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Er(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return s=l.done,l},e:function(l){a=!0,o=l},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw o}}}}var fa="finalize",ga="consider";function Ke(n,e,t){n.dispatchEvent(new CustomEvent(fa,{detail:{items:e,info:t}}))}function ye(n,e,t){n.dispatchEvent(new CustomEvent(ga,{detail:{items:e,info:t}}))}var Ut="draggedEntered",ht="draggedLeft",Mt="draggedOverIndex",Tr="draggedLeftDocument",kt={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function ma(n,e,t){n.dispatchEvent(new CustomEvent(Ut,{detail:{indexObj:e,draggedEl:t}}))}function pa(n,e,t){n.dispatchEvent(new CustomEvent(ht,{detail:{draggedEl:e,type:kt.LEFT_FOR_ANOTHER,theOtherDz:t}}))}function va(n,e){n.dispatchEvent(new CustomEvent(ht,{detail:{draggedEl:e,type:kt.OUTSIDE_OF_ANY}}))}function ya(n,e,t){n.dispatchEvent(new CustomEvent(Mt,{detail:{indexObj:e,draggedEl:t}}))}function _a(n){window.dispatchEvent(new CustomEvent(Tr,{detail:{draggedEl:n}}))}var K={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Ut,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Mt,DRAGGED_LEFT:ht,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Y={POINTER:"pointer",KEYBOARD:"keyboard"},Ft="isDndShadowItem",Or="data-is-dnd-shadow-item-internal",wa="data-is-dnd-shadow-item-hint",ba="id:dnd-shadow-placeholder-0000",Ea="dnd-action-dragged-el",F="id",or=0;function Ln(){or++}function Nn(){if(or===0)throw new Error("Bug! trying to decrement when there are no dropzones");or--}var Sr=typeof window>"u";function lr(n){var e,t=n.getBoundingClientRect(),r=getComputedStyle(n),i=r.transform;if(i){var s,a,o,l;if(i.startsWith("matrix3d("))e=i.slice(9,-1).split(/, /),s=+e[0],a=+e[5],o=+e[12],l=+e[13];else if(i.startsWith("matrix("))e=i.slice(7,-1).split(/, /),s=+e[0],a=+e[3],o=+e[4],l=+e[5];else return t;var u=r.transformOrigin,c=t.x-o-(1-s)*parseFloat(u),d=t.y-l-(1-a)*parseFloat(u.slice(u.indexOf(" ")+1)),h=s?t.width/s:n.offsetWidth,f=a?t.height/a:n.offsetHeight;return{x:c,y:d,width:h,height:f,top:d,right:c+h,bottom:d+f,left:c}}else return t}function Un(n){var e=lr(n);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Mn(n){var e=n.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Fn(n){return{x:(n.left+n.right)/2,y:(n.top+n.bottom)/2}}function Ta(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Bt(n,e){return n.y<=e.bottom&&n.y>=e.top&&n.x>=e.left&&n.x<=e.right}function ot(n){return Fn(Mn(n))}function Jr(n,e){var t=ot(n),r=Un(e);return Bt(t,r)}function Oa(n,e){var t=ot(n),r=ot(e);return Ta(t,r)}function Sa(n){var e=Mn(n);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}var Fe;function Dr(){Fe=new Map}Dr();function Da(n){var e=Array.from(n.children).findIndex(function(t){return t.getAttribute(Or)});if(e>=0)return Fe.has(n)||Fe.set(n,new Map),Fe.get(n).set(e,Un(n.children[e])),e}function ka(n,e){if(!Jr(n,e))return null;var t=e.children;if(t.length===0)return{index:0,isProximityBased:!0};for(var r=Da(e),i=0;i<t.length;i++)if(Jr(n,t[i])){var s=Fe.has(e)&&Fe.get(e).get(i);return s&&!Bt(ot(n),s)?{index:r,isProximityBased:!1}:{index:i,isProximityBased:!1}}for(var a=Number.MAX_VALUE,o=void 0,l=0;l<t.length;l++){var u=Oa(n,t[l]);u<a&&(a=u,o=l)}return{index:o,isProximityBased:!0}}function vt(n){return JSON.stringify(n,null,2)}function At(n){if(!n)throw new Error("cannot get depth of a falsy node");return Bn(n,0)}function Bn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.parentElement?Bn(n.parentElement,e+1):e-1}function Aa(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(var t in n)if(!{}.hasOwnProperty.call(e,t)||e[t]!==n[t])return!1;return!0}function Ia(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var Ra=200,Yr=10,cr;function Ca(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ra,r=arguments.length>3?arguments[3]:void 0,i,s,a=!1,o,l=Array.from(e).sort(function(c,d){return At(d)-At(c)});function u(){var c=ot(n),d=r.multiScrollIfNeeded();if(!d&&o&&Math.abs(o.x-c.x)<Yr&&Math.abs(o.y-c.y)<Yr){cr=window.setTimeout(u,t);return}if(Sa(n)){_a(n);return}o=c;var h=!1,f=dt(l),g;try{for(f.s();!(g=f.n()).done;){var m=g.value;d&&Dr();var p=ka(n,m);if(p!==null){var y=p.index;h=!0,m!==i?(i&&pa(i,n,m),ma(m,p,n),i=m):y!==s&&(ya(m,p,n),s=y);break}}}catch(_){f.e(_)}finally{f.f()}!h&&a&&i?(va(i,n),i=void 0,s=void 0,a=!1):a=!0,cr=window.setTimeout(u,t)}u()}function Pa(){clearTimeout(cr),Dr()}var Xe=30;function xa(){var n;function e(){n={directionObj:void 0,stepPx:0}}e();function t(s){var a=n,o=a.directionObj,l=a.stepPx;o&&(s.scrollBy(o.x*l,o.y*l),window.requestAnimationFrame(function(){return t(s)}))}function r(s){return Xe-s}function i(s,a){if(!a)return!1;var o=$a(s,a);if(o===null)return e(),!1;var l=!!n.directionObj,u=!1,c=!1;return a.scrollHeight>a.clientHeight&&(o.bottom<Xe?(u=!0,n.directionObj={x:0,y:1},n.stepPx=r(o.bottom)):o.top<Xe&&(u=!0,n.directionObj={x:0,y:-1},n.stepPx=r(o.top)),!l&&u)||a.scrollWidth>a.clientWidth&&(o.right<Xe?(c=!0,n.directionObj={x:1,y:0},n.stepPx=r(o.right)):o.left<Xe&&(c=!0,n.directionObj={x:-1,y:0},n.stepPx=r(o.left)),!l&&c)?(t(a),!0):(e(),!1)}return{scrollIfNeeded:i,resetScrolling:e}}function $a(n,e){var t=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();return Bt(n,t)?{top:n.y-t.top,bottom:t.bottom-n.y,left:n.x-t.left,right:t.right-n.x}:null}function ja(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,t=Na(n),r=Array.from(t).sort(function(o,l){return At(l)-At(o)}),i=xa(),s=i.scrollIfNeeded;function a(){var o=e();if(!o||!r)return!1;for(var l=r.filter(function(d){return Bt(o,d.getBoundingClientRect())||d===document.scrollingElement}),u=0;u<l.length;u++){var c=s(o,l[u]);if(c)return!0}return!1}return{multiScrollIfNeeded:t.size>0?a:function(){return!1}}}function La(n){if(!n)return[];for(var e=[],t=n;t;){var r=window.getComputedStyle(t),i=r.overflow;i.split(" ").some(function(s){return s.includes("auto")||s.includes("scroll")})&&e.push(t),t=t.parentElement}return e}function Na(n){var e=new Set,t=dt(n),r;try{for(t.s();!(r=t.n()).done;){var i=r.value;La(i).forEach(function(s){return e.add(s)})}}catch(s){t.e(s)}finally{t.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement),e}function Ua(n){var e=n.cloneNode(!0),t=[],r=n.tagName==="SELECT",i=r?[n]:ne(n.querySelectorAll("select")),s=dt(i),a;try{for(s.s();!(a=s.n()).done;){var o=a.value;t.push(o.value)}}catch(S){s.e(S)}finally{s.f()}if(i.length>0)for(var l=r?[e]:ne(e.querySelectorAll("select")),u=0;u<l.length;u++){var c=l[u],d=t[u],h=c.querySelector('option[value="'.concat(d,'"'));h&&h.setAttribute("selected",!0)}var f=n.tagName==="CANVAS",g=f?[n]:ne(n.querySelectorAll("canvas"));if(g.length>0)for(var m=f?[e]:ne(e.querySelectorAll("canvas")),p=0;p<m.length;p++){var y=g[p],_=m[p];_.width=y.width,_.height=y.height,_.getContext("2d").drawImage(y,0,0)}return e}var lt=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Ma=We({},lt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function zn(n){if(!lt[n])throw new Error("Can't get non existing feature flag ".concat(n,"! Supported flags: ").concat(Object.keys(lt)));return Ma[n]}var Fa=.2;function Ee(n){return"".concat(n," ").concat(Fa,"s ease")}function Ba(n,e){var t=n.getBoundingClientRect(),r=Ua(n);Gn(n,r),r.id=Ea,r.style.position="fixed";var i=t.top,s=t.left;if(r.style.top="".concat(i,"px"),r.style.left="".concat(s,"px"),e){var a=Fn(t);i-=a.y-e.y,s-=a.x-e.x,window.setTimeout(function(){r.style.top="".concat(i,"px"),r.style.left="".concat(s,"px")},0)}return r.style.margin="0",r.style.boxSizing="border-box",r.style.height="".concat(t.height,"px"),r.style.width="".concat(t.width,"px"),r.style.transition="".concat(Ee("top"),", ").concat(Ee("left"),", ").concat(Ee("background-color"),", ").concat(Ee("opacity"),", ").concat(Ee("color")," "),window.setTimeout(function(){return r.style.transition+=", ".concat(Ee("width"),", ").concat(Ee("height"))},0),r.style.zIndex="9999",r.style.cursor="grabbing",r}function za(n){n.style.cursor="grab"}function Ga(n,e,t,r){Gn(e,n);var i=e.getBoundingClientRect(),s=n.getBoundingClientRect(),a=i.width-s.width,o=i.height-s.height;if(a||o){var l={left:(t-s.left)/s.width,top:(r-s.top)/s.height};zn(lt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(n.style.height="".concat(i.height,"px"),n.style.width="".concat(i.width,"px")),n.style.left="".concat(parseFloat(n.style.left)-l.left*a,"px"),n.style.top="".concat(parseFloat(n.style.top)-l.top*o,"px")}}function Gn(n,e){var t=window.getComputedStyle(n);Array.from(t).filter(function(r){return r.startsWith("background")||r.startsWith("padding")||r.startsWith("font")||r.startsWith("text")||r.startsWith("align")||r.startsWith("justify")||r.startsWith("display")||r.startsWith("flex")||r.startsWith("border")||r==="opacity"||r==="color"||r==="list-style-type"||zn(lt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(r==="width"||r==="height")}).forEach(function(r){return e.style.setProperty(r,t.getPropertyValue(r),t.getPropertyPriority(r))})}function qa(n,e){n.draggable=!1,n.ondragstart=function(){return!1},e?(n.style.userSelect="",n.style.WebkitUserSelect="",n.style.cursor=""):(n.style.userSelect="none",n.style.WebkitUserSelect="none",n.style.cursor="grab")}function qn(n){n.style.display="none",n.style.position="fixed",n.style.zIndex="-5"}function Ha(n){n.style.visibility="hidden",n.setAttribute(Or,"true")}function Wa(n){n.style.visibility="",n.removeAttribute(Or)}function _t(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};n.forEach(function(r){var i=e(r);Object.keys(i).forEach(function(s){r.style[s]=i[s]}),t(r).forEach(function(s){return r.classList.add(s)})})}function It(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};n.forEach(function(r){var i=e(r);Object.keys(i).forEach(function(s){r.style[s]=""}),t(r).forEach(function(s){return r.classList.contains(s)&&r.classList.remove(s)})})}function Ka(n){var e=n.style.minHeight;n.style.minHeight=window.getComputedStyle(n).getPropertyValue("height");var t=n.style.minWidth;return n.style.minWidth=window.getComputedStyle(n).getPropertyValue("width"),function(){n.style.minHeight=e,n.style.minWidth=t}}var Va="--any--",Ja=100,Ya=20,Zr=3,Xr={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Qr="data-is-dnd-original-dragged-item",de,z,J,zt,L,Gt,ve,H,me,X,De=!1,kr=!1,Ar,ft=!1,wt=[],ce=new Map,U=new Map,Zt=new WeakMap;function Za(n,e){ce.has(e)||ce.set(e,new Set),ce.get(e).has(n)||(ce.get(e).add(n),Ln())}function en(n,e){ce.get(e).delete(n),Nn(),ce.get(e).size===0&&ce.delete(e)}function Xa(){var n=ce.get(zt),e=dt(n),t;try{for(e.s();!(t=e.n()).done;){var r=t.value;r.addEventListener(Ut,Hn),r.addEventListener(ht,Wn),r.addEventListener(Mt,Kn)}}catch(o){e.e(o)}finally{e.f()}window.addEventListener(Tr,Ve);var i=Math.max.apply(Math,ne(Array.from(n.keys()).map(function(o){return U.get(o).dropAnimationDurationMs}))),s=i===0?Ya:Math.max(i,Ja),a=ja(n,function(){return X});Ca(z,n,s*1.07,a)}function Qa(){var n=ce.get(zt),e=dt(n),t;try{for(e.s();!(t=e.n()).done;){var r=t.value;r.removeEventListener(Ut,Hn),r.removeEventListener(ht,Wn),r.removeEventListener(Mt,Kn)}}catch(i){e.e(i)}finally{e.f()}window.removeEventListener(Tr,Ve),Pa()}function qt(n){return n.findIndex(function(e){return!!e[Ft]})}function eo(n){var e;return Dt(Dt({},n),{},(e={},We(e,Ft,!0),We(e,F,ba),e))}function Hn(n){var e=U.get(n.currentTarget),t=e.items,r=e.dropFromOthersDisabled;if(!(r&&n.currentTarget!==L)){if(ft=!1,t=t.filter(function(c){return c[F]!==ve[F]}),L!==n.currentTarget){var i=U.get(L).items,s=i.filter(function(c){return!c[Ft]});ye(L,s,{trigger:K.DRAGGED_ENTERED_ANOTHER,id:J[F],source:Y.POINTER})}var a=n.detail.indexObj,o=a.index,l=a.isProximityBased,u=l&&o===n.currentTarget.children.length-1?o+1:o;H=n.currentTarget,t.splice(u,0,ve),ye(n.currentTarget,t,{trigger:K.DRAGGED_ENTERED,id:J[F],source:Y.POINTER})}}function Wn(n){if(De){var e=U.get(n.currentTarget),t=e.items,r=e.dropFromOthersDisabled;if(!(r&&n.currentTarget!==L&&n.currentTarget!==H)){var i=ne(t),s=qt(i);s!==-1&&i.splice(s,1);var a=H;H=void 0;var o=n.detail,l=o.type,u=o.theOtherDz;if(l===kt.OUTSIDE_OF_ANY||l===kt.LEFT_FOR_ANOTHER&&u!==L&&U.get(u).dropFromOthersDisabled){ft=!0,H=L;var c=a===L?i:ne(U.get(L).items);c.splice(Gt,0,ve),ye(L,c,{trigger:K.DRAGGED_LEFT_ALL,id:J[F],source:Y.POINTER})}ye(n.currentTarget,i,{trigger:K.DRAGGED_LEFT,id:J[F],source:Y.POINTER})}}}function Kn(n){var e=U.get(n.currentTarget),t=e.items,r=e.dropFromOthersDisabled;if(!(r&&n.currentTarget!==L)){var i=ne(t);ft=!1;var s=n.detail.indexObj.index,a=qt(i);a!==-1&&i.splice(a,1),i.splice(s,0,ve),ye(n.currentTarget,i,{trigger:K.DRAGGED_OVER_INDEX,id:J[F],source:Y.POINTER})}}function Rt(n){n.preventDefault();var e=n.touches?n.touches[0]:n;X={x:e.clientX,y:e.clientY},z.style.transform="translate3d(".concat(X.x-me.x,"px, ").concat(X.y-me.y,"px, 0)")}function Ve(){kr=!0,window.removeEventListener("mousemove",Rt),window.removeEventListener("touchmove",Rt),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchend",Ve),Qa(),za(z),H||(H=L);var n=U.get(H),e=n.items,t=n.type;It(ce.get(t),function(s){return U.get(s).dropTargetStyle},function(s){return U.get(s).dropTargetClasses});var r=qt(e);r===-1&&H===L&&(r=Gt),e=e.map(function(s){return s[Ft]?J:s});function i(){Ar(),Ke(H,e,{trigger:ft?K.DROPPED_OUTSIDE_OF_ANY:K.DROPPED_INTO_ZONE,id:J[F],source:Y.POINTER}),H!==L&&Ke(L,U.get(L).items,{trigger:K.DROPPED_INTO_ANOTHER,id:J[F],source:Y.POINTER}),r!==-1&&Wa(H.children[r]),no()}to(r,i)}function to(n,e){var t=n>-1?lr(H.children[n]):lr(H),r={x:t.left-parseFloat(z.style.left),y:t.top-parseFloat(z.style.top)},i=U.get(H),s=i.dropAnimationDurationMs,a="transform ".concat(s,"ms ease");z.style.transition=z.style.transition?z.style.transition+","+a:a,z.style.transform="translate3d(".concat(r.x,"px, ").concat(r.y,"px, 0)"),window.setTimeout(e,s)}function ro(n,e){wt.push({dz:n,destroy:e}),window.requestAnimationFrame(function(){qn(n),document.body.appendChild(n)})}function no(){z.remove(),de.remove(),wt.length&&(wt.forEach(function(n){var e=n.dz,t=n.destroy;t(),e.remove()}),wt=[]),z=void 0,de=void 0,J=void 0,zt=void 0,L=void 0,Gt=void 0,ve=void 0,H=void 0,me=void 0,X=void 0,De=!1,kr=!1,Ar=void 0,ft=!1}function io(n,e){var t=!1,r={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Xr,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1},i=new Map;function s(){window.addEventListener("mousemove",l,{passive:!1}),window.addEventListener("touchmove",l,{passive:!1,capture:!1}),window.addEventListener("mouseup",o,{passive:!1}),window.addEventListener("touchend",o,{passive:!1})}function a(){window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",o),window.removeEventListener("touchend",o)}function o(){a(),de=void 0,me=void 0,X=void 0}function l(h){h.preventDefault();var f=h.touches?h.touches[0]:h;X={x:f.clientX,y:f.clientY},(Math.abs(X.x-me.x)>=Zr||Math.abs(X.y-me.y)>=Zr)&&(a(),c())}function u(h){if(!(h.target!==h.currentTarget&&(h.target.value!==void 0||h.target.isContentEditable))&&!h.button&&!De){h.stopPropagation();var f=h.touches?h.touches[0]:h;me={x:f.clientX,y:f.clientY},X=Dt({},me),de=h.currentTarget,s()}}function c(){De=!0;var h=i.get(de);Gt=h,L=de.parentElement;var f=L.closest("dialog")||L.getRootNode(),g=f.body||f,m=r.items,p=r.type,y=r.centreDraggedOnCursor,_=ne(m);J=_[h],zt=p,ve=eo(J),z=Ba(de,y&&X),de.setAttribute(Qr,!0);function S(){z.parentElement?window.requestAnimationFrame(S):(g.appendChild(z),z.focus(),Xa(),qn(de),g.appendChild(de),ve[F]=J[F])}window.requestAnimationFrame(S),_t(Array.from(ce.get(r.type)).filter(function(E){return E===L||!U.get(E).dropFromOthersDisabled}),function(E){return U.get(E).dropTargetStyle},function(E){return U.get(E).dropTargetClasses}),_.splice(h,1,ve),Ar=Ka(L),ye(L,_,{trigger:K.DRAG_STARTED,id:J[F],source:Y.POINTER}),window.addEventListener("mousemove",Rt,{passive:!1}),window.addEventListener("touchmove",Rt,{passive:!1,capture:!1}),window.addEventListener("mouseup",Ve,{passive:!1}),window.addEventListener("touchend",Ve,{passive:!1})}function d(h){var f=h.items,g=f===void 0?void 0:f,m=h.flipDurationMs,p=m===void 0?0:m,y=h.type,_=y===void 0?Va:y,S=h.dragDisabled,E=S===void 0?!1:S,b=h.morphDisabled,I=b===void 0?!1:b,k=h.dropFromOthersDisabled,G=k===void 0?!1:k,V=h.dropTargetStyle,Q=V===void 0?Xr:V,ee=h.dropTargetClasses,x=ee===void 0?[]:ee,A=h.transformDraggedElement,w=A===void 0?function(){}:A,j=h.centreDraggedOnCursor,_e=j===void 0?!1:j;r.dropAnimationDurationMs=p,r.type&&_!==r.type&&en(n,r.type),r.type=_,r.items=ne(g),r.dragDisabled=E,r.morphDisabled=I,r.transformDraggedElement=w,r.centreDraggedOnCursor=_e,t&&De&&!kr&&(!Aa(Q,r.dropTargetStyle)||!Ia(x,r.dropTargetClasses))&&(It([n],function(){return r.dropTargetStyle},function(){return x}),_t([n],function(){return Q},function(){return x})),r.dropTargetStyle=Q,r.dropTargetClasses=ne(x);function M(ue,Ir){return U.get(ue)?U.get(ue)[Ir]:r[Ir]}t&&De&&r.dropFromOthersDisabled!==G&&(G?It([n],function(ue){return M(ue,"dropTargetStyle")},function(ue){return M(ue,"dropTargetClasses")}):_t([n],function(ue){return M(ue,"dropTargetStyle")},function(ue){return M(ue,"dropTargetClasses")})),r.dropFromOthersDisabled=G,U.set(n,r),Za(n,_);for(var Qn=qt(r.items),Ie=0;Ie<n.children.length;Ie++){var se=n.children[Ie];if(qa(se,E),Ie===Qn){r.transformDraggedElement(z,J,Ie),I||Ga(z,se,X.x,X.y),Ha(se);continue}se.removeEventListener("mousedown",Zt.get(se)),se.removeEventListener("touchstart",Zt.get(se)),E||(se.addEventListener("mousedown",u),se.addEventListener("touchstart",u),Zt.set(se,u)),i.set(se,Ie),t||(t=!0)}}return d(e),{update:function(f){d(f)},destroy:function(){function f(){en(n,U.get(n).type),U.delete(n)}De&&!n.closest("[".concat(Qr,"]"))?ro(n,f):f()}}}var yt,ur={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Vn=(yt={},We(yt,ur.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),We(yt,ur.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),yt),so="dnd-action-aria-alert",N;function dr(){N||(N=document.createElement("div"),function(){N.id=so,N.style.position="fixed",N.style.bottom="0",N.style.left="0",N.style.zIndex="-5",N.style.opacity="0",N.style.height="0",N.style.width="0",N.setAttribute("role","alert")}(),document.body.prepend(N),Object.entries(Vn).forEach(function(n){var e=aa(n,2),t=e[0],r=e[1];return document.body.prepend(lo(t,r))}))}function ao(){return Sr?null:(document.readyState==="complete"?dr():window.addEventListener("DOMContentLoaded",dr),Dt({},ur))}function oo(){Sr||!N||(Object.keys(Vn).forEach(function(n){var e;return(e=document.getElementById(n))===null||e===void 0?void 0:e.remove()}),N.remove(),N=void 0)}function lo(n,e){var t=document.createElement("div");return t.id=n,t.innerHTML="<p>".concat(e,"</p>"),t.style.display="none",t.style.position="fixed",t.style.zIndex="-5",t}function Be(n){if(!Sr){N||dr(),N.innerHTML="";var e=document.createTextNode(n);N.appendChild(e),N.style.display="none",N.style.display="inline"}}var co="--any--",tn={outline:"rgba(255, 255, 102, 0.7) solid 2px"},re=!1,hr,W,ke="",Oe,he,pe="",Ct=new WeakSet,rn=new WeakMap,nn=new WeakMap,fr=new Map,B=new Map,le=new Map,Pt;function uo(n,e){le.size===0&&(Pt=ao(),window.addEventListener("keydown",Jn),window.addEventListener("click",Yn)),le.has(e)||le.set(e,new Set),le.get(e).has(n)||(le.get(e).add(n),Ln())}function sn(n,e){W===n&&ct(),le.get(e).delete(n),Nn(),le.get(e).size===0&&le.delete(e),le.size===0&&(window.removeEventListener("keydown",Jn),window.removeEventListener("click",Yn),Pt=void 0,oo())}function Jn(n){if(re)switch(n.key){case"Escape":{ct();break}}}function Yn(){re&&(Ct.has(document.activeElement)||ct())}function ho(n){if(re){var e=n.currentTarget;if(e!==W){ke=e.getAttribute("aria-label")||"";var t=B.get(W),r=t.items,i=r.find(function(d){return d[F]===he}),s=r.indexOf(i),a=r.splice(s,1)[0],o=B.get(e),l=o.items,u=o.autoAriaDisabled;e.getBoundingClientRect().top<W.getBoundingClientRect().top||e.getBoundingClientRect().left<W.getBoundingClientRect().left?(l.push(a),u||Be("Moved item ".concat(pe," to the end of the list ").concat(ke))):(l.unshift(a),u||Be("Moved item ".concat(pe," to the beginning of the list ").concat(ke)));var c=W;Ke(c,r,{trigger:K.DROPPED_INTO_ANOTHER,id:he,source:Y.KEYBOARD}),Ke(e,l,{trigger:K.DROPPED_INTO_ZONE,id:he,source:Y.KEYBOARD}),W=e}}}function Zn(){fr.forEach(function(n,e){var t=n.update;return t(B.get(e))})}function ct(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;B.get(W).autoAriaDisabled||Be("Stopped dragging item ".concat(pe)),Ct.has(document.activeElement)&&document.activeElement.blur(),n&&ye(W,B.get(W).items,{trigger:K.DRAG_STOPPED,id:he,source:Y.KEYBOARD}),It(le.get(hr),function(e){return B.get(e).dropTargetStyle},function(e){return B.get(e).dropTargetClasses}),Oe=null,he=null,pe="",hr=null,W=null,ke="",re=!1,Zn()}function fo(n,e){var t={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:tn,dropTargetClasses:[],autoAriaDisabled:!1};function r(c,d,h){c.length<=1||c.splice(h,1,c.splice(d,1,c[h])[0])}function i(c){switch(c.key){case"Enter":case" ":{if((c.target.disabled!==void 0||c.target.href||c.target.isContentEditable)&&!Ct.has(c.target))return;c.preventDefault(),c.stopPropagation(),re?ct():s(c);break}case"ArrowDown":case"ArrowRight":{if(!re)return;c.preventDefault(),c.stopPropagation();var d=B.get(n),h=d.items,f=Array.from(n.children),g=f.indexOf(c.currentTarget);g<f.length-1&&(t.autoAriaDisabled||Be("Moved item ".concat(pe," to position ").concat(g+2," in the list ").concat(ke)),r(h,g,g+1),Ke(n,h,{trigger:K.DROPPED_INTO_ZONE,id:he,source:Y.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!re)return;c.preventDefault(),c.stopPropagation();var m=B.get(n),p=m.items,y=Array.from(n.children),_=y.indexOf(c.currentTarget);_>0&&(t.autoAriaDisabled||Be("Moved item ".concat(pe," to position ").concat(_," in the list ").concat(ke)),r(p,_,_-1),Ke(n,p,{trigger:K.DROPPED_INTO_ZONE,id:he,source:Y.KEYBOARD}));break}}}function s(c){o(c.currentTarget),W=n,hr=t.type,re=!0;var d=Array.from(le.get(t.type)).filter(function(f){return f===W||!B.get(f).dropFromOthersDisabled});if(_t(d,function(f){return B.get(f).dropTargetStyle},function(f){return B.get(f).dropTargetClasses}),!t.autoAriaDisabled){var h="Started dragging item ".concat(pe,". Use the arrow keys to move it within its list ").concat(ke);d.length>1&&(h+=", or tab to another list in order to move the item into it"),Be(h)}ye(n,B.get(n).items,{trigger:K.DRAG_STARTED,id:he,source:Y.KEYBOARD}),Zn()}function a(c){re&&c.currentTarget!==Oe&&(c.stopPropagation(),ct(!1),s(c))}function o(c){var d=B.get(n),h=d.items,f=Array.from(n.children),g=f.indexOf(c);Oe=c,Oe.tabIndex=t.zoneItemTabIndex,he=h[g][F],pe=f[g].getAttribute("aria-label")||""}function l(c){var d=c.items,h=d===void 0?[]:d,f=c.type,g=f===void 0?co:f,m=c.dragDisabled,p=m===void 0?!1:m,y=c.zoneTabIndex,_=y===void 0?0:y,S=c.zoneItemTabIndex,E=S===void 0?0:S,b=c.dropFromOthersDisabled,I=b===void 0?!1:b,k=c.dropTargetStyle,G=k===void 0?tn:k,V=c.dropTargetClasses,Q=V===void 0?[]:V,ee=c.autoAriaDisabled,x=ee===void 0?!1:ee;t.items=ne(h),t.dragDisabled=p,t.dropFromOthersDisabled=I,t.zoneTabIndex=_,t.zoneItemTabIndex=E,t.dropTargetStyle=G,t.dropTargetClasses=Q,t.autoAriaDisabled=x,t.type&&g!==t.type&&sn(n,t.type),t.type=g,uo(n,g),x||(n.setAttribute("aria-disabled",p),n.setAttribute("role","list"),n.setAttribute("aria-describedby",p?Pt.DND_ZONE_DRAG_DISABLED:Pt.DND_ZONE_ACTIVE)),B.set(n,t),re?n.tabIndex=n===W||Oe.contains(n)||t.dropFromOthersDisabled||W&&t.type!==B.get(W).type?-1:0:n.tabIndex=t.zoneTabIndex,n.addEventListener("focus",ho);for(var A=function(_e){var M=n.children[_e];Ct.add(M),M.tabIndex=re?-1:t.zoneItemTabIndex,x||M.setAttribute("role","listitem"),M.removeEventListener("keydown",rn.get(M)),M.removeEventListener("click",nn.get(M)),p||(M.addEventListener("keydown",i),rn.set(M,i),M.addEventListener("click",a),nn.set(M,a)),re&&t.items[_e][F]===he&&(Oe=M,Oe.tabIndex=t.zoneItemTabIndex,M.focus())},w=0;w<n.children.length;w++)A(w)}l(e);var u={update:function(d){l(d)},destroy:function(){sn(n,t.type),B.delete(n),fr.delete(n)}};return fr.set(n,u),u}var go=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"];function Xn(n,e){if(mo(n))return{update:function(){},destroy:function(){}};an(e);var t=io(n,e),r=fo(n,e);return{update:function(s){an(s),t.update(s),r.update(s)},destroy:function(){t.destroy(),r.destroy()}}}function mo(n){return!!n.closest("[".concat(wa,'="true"]'))}function an(n){var e=n.items;n.flipDurationMs,n.type,n.dragDisabled,n.morphDisabled,n.dropFromOthersDisabled;var t=n.zoneTabIndex,r=n.zoneItemTabIndex;n.dropTargetStyle;var i=n.dropTargetClasses;n.transformDraggedElement,n.autoAriaDisabled,n.centreDraggedOnCursor;var s=sa(n,go);if(Object.keys(s).length>0&&console.warn("dndzone will ignore unknown options",s),!e)throw new Error("no 'items' key provided to dndzone");var a=e.find(function(o){return!{}.hasOwnProperty.call(o,F)});if(a)throw new Error("missing '".concat(F,"' property for item ").concat(vt(a)));if(i&&!Array.isArray(i))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(nt(i),", ").concat(vt(i)));if(t&&!on(t))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(nt(t),", ").concat(vt(t)));if(r&&!on(r))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(nt(r),", ").concat(vt(r)))}function on(n){return!isNaN(n)&&function(e){return(e|0)===e}(parseFloat(n))}function ln(n,e,t){const r=n.slice();return r[7]=e[t],r}function cn(n,e,t){const r=n.slice();return r[10]=e[t],r}function un(n,e){let t,r=e[10].name+"",i,s,a,o=ie,l,u;return{key:n,first:null,c(){t=C("div"),i=pn(r),s=Et(),this.h()},l(c){t=P(c,"DIV",{class:!0});var d=et(t);i=vn(d,r),s=Tt(d),d.forEach(O),this.h()},h(){v(t,"class","card svelte-1lcxr5j"),this.first=t},m(c,d){Je(c,t,d),R(t,i),R(t,s),l||(u=it(t,"click",vo),l=!0)},p(c,d){e=c,d&1&&r!==(r=e[10].name+"")&&yn(i,r)},r(){a=t.getBoundingClientRect()},f(){On(t),o()},a(){o(),o=Tn(t,a,jn,{duration:ze})},d(c){c&&O(t),l=!1,u()}}}function dn(n,e){let t,r,i=e[7].name+"",s,a,o,l=[],u=new Map,c,d,h,f,g=ie,m,p,y=Ge(e[7].items);const _=b=>b[10].id;for(let b=0;b<y.length;b+=1){let I=cn(e,y,b),k=_(I);u.set(k,l[b]=un(k,I))}function S(...b){return e[5](e[7],...b)}function E(...b){return e[6](e[7],...b)}return{key:n,first:null,c(){t=C("div"),r=C("div"),s=pn(i),a=Et(),o=C("div");for(let b=0;b<l.length;b+=1)l[b].c();d=Et(),this.h()},l(b){t=P(b,"DIV",{class:!0});var I=et(t);r=P(I,"DIV",{class:!0});var k=et(r);s=vn(k,i),k.forEach(O),a=Tt(I),o=P(I,"DIV",{class:!0});var G=et(o);for(let V=0;V<l.length;V+=1)l[V].l(G);G.forEach(O),d=Tt(I),I.forEach(O),this.h()},h(){v(r,"class","column-title svelte-1lcxr5j"),v(o,"class","column-content svelte-1lcxr5j"),v(t,"class",h="column "+(e[7].id==0?"artists":"")+" svelte-1lcxr5j"),this.first=t},m(b,I){Je(b,t,I),R(t,r),R(r,s),R(t,a),R(t,o);for(let k=0;k<l.length;k+=1)l[k]&&l[k].m(o,null);R(t,d),m||(p=[gn(c=Xn.call(null,o,{items:e[7].items,flipDurationMs:ze})),it(o,"consider",S),it(o,"finalize",E)],m=!0)},p(b,I){if(e=b,I&1&&i!==(i=e[7].name+"")&&yn(s,i),I&1){y=Ge(e[7].items);for(let k=0;k<l.length;k+=1)l[k].r();l=_n(l,I,_,1,e,y,u,o,wn,un,null,cn);for(let k=0;k<l.length;k+=1)l[k].a()}c&&gr(c.update)&&I&1&&c.update.call(null,{items:e[7].items,flipDurationMs:ze}),I&1&&h!==(h="column "+(e[7].id==0?"artists":"")+" svelte-1lcxr5j")&&v(t,"class",h)},r(){f=t.getBoundingClientRect()},f(){On(t),g()},a(){g(),g=Tn(t,f,jn,{duration:ze})},d(b){b&&O(t);for(let I=0;I<l.length;I+=1)l[I].d();m=!1,mn(p)}}}function po(n){let e,t=[],r=new Map,i,s,a,o=Ge(n[0]);const l=u=>u[7].id;for(let u=0;u<o.length;u+=1){let c=ln(n,o,u),d=l(c);r.set(d,t[u]=dn(d,c))}return{c(){e=C("section");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=P(u,"SECTION",{class:!0});var c=et(e);for(let d=0;d<t.length;d+=1)t[d].l(c);c.forEach(O),this.h()},h(){v(e,"class","board svelte-1lcxr5j")},m(u,c){Je(u,e,c);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);s||(a=[gn(i=Xn.call(null,e,{items:n[0],flipDurationMs:ze,type:"columns"})),it(e,"consider",n[1]),it(e,"finalize",n[2])],s=!0)},p(u,[c]){if(c&25){o=Ge(u[0]);for(let d=0;d<t.length;d+=1)t[d].r();t=_n(t,c,l,1,u,o,r,e,wn,dn,null,ln);for(let d=0;d<t.length;d+=1)t[d].a()}i&&gr(i.update)&&c&1&&i.update.call(null,{items:u[0],flipDurationMs:ze,type:"columns"})},i:ie,o:ie,d(u){u&&O(e);for(let c=0;c<t.length;c+=1)t[c].d();s=!1,mn(a)}}}const ze=200;function vo(n){alert("dragabble elements are still clickable :)")}function yo(n,e,t){let{columnItems:r}=e;function i(c){t(0,r=c.detail.items)}function s(c){t(0,r=c.detail.items)}function a(c,d){const h=r.findIndex(f=>f.id===c);t(0,r[h].items=d.detail.items,r),t(0,r=[...r])}function o(c,d){const h=r.findIndex(f=>f.id===c);t(0,r[h].items=d.detail.items,r),t(0,r=[...r])}const l=(c,d)=>a(c.id,d),u=(c,d)=>o(c.id,d);return n.$$set=c=>{"columnItems"in c&&t(0,r=c.columnItems)},[r,i,s,a,o,l,u]}class _o extends $t{constructor(e){super(),jt(this,e,yo,po,xt,{columnItems:0})}}function hn(n){let e,t;return e=new _o({props:{columnItems:n[1]}}),{c(){Xt(e.$$.fragment)},l(r){Qt(e.$$.fragment,r)},m(r,i){er(e,r,i),t=!0},p:ie,i(r){t||(Ne(e.$$.fragment,r),t=!0)},o(r){st(e.$$.fragment,r),t=!1},d(r){tr(e,r)}}}function wo(n){let e,t,r=n[0]&&hn(n);return{c(){r&&r.c(),e=bt()},l(i){r&&r.l(i),e=bt()},m(i,s){r&&r.m(i,s),Je(i,e,s),t=!0},p(i,[s]){i[0]?r?(r.p(i,s),s&1&&Ne(r,1)):(r=hn(i),r.c(),Ne(r,1),r.m(e.parentNode,e)):r&&(ai(),st(r,1,1,()=>{r=null}),oi())},i(i){t||(Ne(r),t=!0)},o(i){st(r),t=!1},d(i){i&&O(e),r&&r.d(i)}}}function bo(n,e,t){let r=[{id:0,name:"artists",items:ra},{id:1,name:"gen 1",items:[]},{id:2,name:"gen 2",items:[]},{id:3,name:"gen 3",items:[]},{id:4,name:"gen 4",items:[]},{id:5,name:"gen 5",items:[]}],i=!1;return si(async()=>{t(0,i=!0)}),[i,r]}class Eo extends $t{constructor(e){super(),jt(this,e,bo,wo,xt,{})}}const To={title:"Title TK",description:"Description tk."},Oo=[{type:"svelte",value:{component:"Example"}}],fn={meta:To,body:Oo};function So(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.17.0"),console.log("build: 2024-03-27-10:15"),console.log("--- --- --- --- --- ---")}function Do(n){let e,t,r,i;return e=new yi({props:{title:n[1],description:n[2],url:n[3],preloadFont:n[0],keywords:n[4]}}),r=new Eo({}),{c(){Xt(e.$$.fragment),t=Et(),Xt(r.$$.fragment)},l(s){Qt(e.$$.fragment,s),t=Tt(s),Qt(r.$$.fragment,s)},m(s,a){er(e,s,a),Je(s,t,a),er(r,s,a),i=!0},p:ie,i(s){i||(Ne(e.$$.fragment,s),Ne(r.$$.fragment,s),i=!0)},o(s){st(e.$$.fragment,s),st(r.$$.fragment,s),i=!1},d(s){s&&O(t),tr(e,s),tr(r,s)}}}function ko(n,e,t){let{data:r}=e;So();const i=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:s,description:a,url:o,keywords:l}=fn;return Rr("copy",fn),Rr("data",r.data),n.$$set=u=>{"data"in u&&t(5,r=u.data)},[i,s,a,o,l,r]}class $o extends $t{constructor(e){super(),jt(this,e,ko,Do,xt,{data:5})}}export{$o as component};
